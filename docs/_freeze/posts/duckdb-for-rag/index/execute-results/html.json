{
  "hash": "fd0fcf7b942eab6f281e11152587dd7e",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Using DuckDB (or any database Ibis supports) for RAG\"\nauthor: \"Cody Peterson\"\ndate: \"2024-02-29\"\nimage: thumbnail.png\ncategories:\n    - blog\n    - llms\n    - duckdb\n---\n\n## Overview\n\nIn this post, we'll demonstrate traditional retrieval-augmented generation (RAG)\nwith DuckDB and OpenAI via Ibis and discuss the pros and cons. Notice that\nbecause Ibis is portable, you can use (almost) any database Ibis supports for\nRAG!\n\n::: {.callout-tip title=\"Which databases can I use?\"}\nThe database must support array types and have some form of similarity metric\nbetween arrays of numbers. Alternatively, a custom user-defined function (UDF)\ncan be used for the similarity metric.\n:::\n\nDuckDB is the default backend for Ibis and makes rapid prototyping locally very\neasy. You can deploy it to [MotherDuck](https://motherduck.com) just by changing\nthe connection string, or swap out DuckDB for another Ibis backend.\n\n## What is RAG?\n\nRetrieval-augmented generation (RAG) is a technique for language model systems\nto retrieve relevant information from a knowledge base, augmented the model's\ninput with that knowledge, and then generate a response. It serves to increase\nthe accuracy of the model's response and provide useful context given language\nmodels' context length limitations.\n\n::: {.callout-note title=\"Is RAG dead?\"}\nWith increasing language model context lengths, is RAG dead?\n\n**No**. Though as we'll discuss later, it's unclear if traditional vector\nsimilarity search RAG is the best approach. Regardless, just because a language\nmodel can use the entire context of a textbook doesn't mean you'll get better\nperformance (accuracy or efficiency) than first retrieving the relevant subsets\nof the textbook.\n:::\n\nTraditional RAG embeds text into vectors of numbers and then computes a\nsimilarity metric between input text and the knowledge base to determine the\nmost relevant context.\n\n\n```{mermaid}\ngraph LR\n    style T fill:#1E90FF,stroke:#1E90FF,color:#ffffff\n    style N fill:#1E90FF,stroke:#1E90FF,color:#ffffff\n    style C fill:#1E90FF,stroke:#1E90FF,color:#ffffff\n\n    T(\"text\") --> N(\"numbers (embedding vector)\")\n    N --> C(\"compute similarity metric\")\n```\n\n\nLet's jump into the code!\n\n## RAG over Ibis documentation\n\nWe'll use the Ibis documentation as our knowledge base. A common toy problem is\na chatbot over documentation, so this is a good starting point.\n\n### Setup code\n\nFirst, we need to install and import the necessary packages:\n\n```bash\npip install 'ibis-framework[duckdb]' openai python-dotenv\n```\n\n::: {#fa2c245e .cell execution_count=1}\n``` {.python .cell-code}\nimport os  # <1>\nimport ibis\nimport shutil\nimport subprocess\n\nfrom openai import OpenAI\nfrom dotenv import load_dotenv  # <1>\n```\n:::\n\n\n1. Import the libraries we'll use.\n\nWe need to set the `OPENAI_API_KEY` environment variable to our OpenAI API key.\nDo this by creating a `.env` file in the same directory as the code and adding\nthe following line:\n\n```txt\nOPENAI_API_KEY=<your-api-key>\n```\n\nThen, load the environment variables:\n\n::: {#04dad3fb .cell execution_count=2}\n``` {.python .cell-code}\nload_dotenv()  # <1>\n```\n\n::: {.cell-output .cell-output-display execution_count=2}\n```\nTrue\n```\n:::\n:::\n\n\n1. Load environment variables from the `.env` file.\n\nNow, we're ready to make LLM calls. Let's setup Ibis for interactive use:\n\n::: {#7445796c .cell execution_count=3}\n``` {.python .cell-code}\nibis.options.interactive = True  # <1>\n```\n:::\n\n\n1. Turn on Ibis interactive mode.\n\n### Getting the data into DuckDB\n\nWe'll write a function to clone any repository:\n\n::: {#132eb1a4 .cell execution_count=4}\n``` {.python .cell-code}\ndef clone_repo(repo_url):  # <1>\n    subprocess.run([\"git\", \"clone\", \"--depth\", \"1\", repo_url], check=False)  # <1>\n```\n:::\n\n\n1. Define a function to clone a repository.\n\nNow, we will clone `ibis` and prepare to ingest all the Quarto markdown files\ninto a DuckDB database called `rag.ddb`:\n\n::: {#72e52490 .cell execution_count=5}\n``` {.python .cell-code}\norg_url = \"https://github.com/ibis-project\"  # <1>\nrepo_name = \"ibis\"  # <1>\n\nshutil.rmtree(repo_name, ignore_errors=True)  # <2>\nclone_repo(f\"{org_url}/{repo_name}\")  # <3>\n\nif os.path.exists(\"rag.ddb\"):  # <4>\n    os.remove(\"rag.ddb\")\nif os.path.exists(\"rag.ddb.wal\"):\n    os.remove(\"rag.ddb.wal\")  # <4>\n\nrag_con = ibis.connect(\"duckdb://rag.ddb\")  # <5>\nrag_con.list_tables()  # <6>\n```\n\n::: {.cell-output .cell-output-display execution_count=5}\n```\n[]\n```\n:::\n:::\n\n\n1. Setup the repository to clone.\n2. Remove the repository if it exists to ensure a fresh clone.\n3. Clone the repository.\n4. Remove the DuckDB database if it exists to ensure a fresh database.\n5. Connect to the DuckDB database.\n6. List the tables in the database, showing it is empty.\n\nWe'll walk through all the cloned files. For `.qmd` files, read the contents and\ninsert them into the `ibis` table:\n\n::: {#58b083b7 .cell execution_count=6}\n``` {.python .cell-code}\nfor root, _, files in os.walk(repo_name):  # <1>\n    for file in files:  # <2>\n        if file.endswith(\".qmd\"):  # <3>\n            with open(os.path.join(root, file)) as f:  # <4>\n                contents = f.read()  # <5>\n\n                data = {  # <6>\n                    \"filepath\": [os.path.join(root, file)],\n                    \"contents\": [contents],\n                }  # <6>\n\n                t = ibis.memtable(data)  # <7>\n\n                if repo_name not in rag_con.list_tables():  # <8>\n                    rag_con.create_table(repo_name, t)  # <8>\n                else:  # <9>\n                    rag_con.insert(repo_name, t)  # <9>\n\nfor table in rag_con.list_tables():  # <10>\n    if \"memtable\" in table:\n        rag_con.drop_view(table)  # <10>\n\nrag_con.list_tables()  # <11>\n```\n\n::: {.cell-output .cell-output-display execution_count=6}\n```\n['ibis']\n```\n:::\n:::\n\n\n1. Walk through all the files in the repository.\n2. For all of the files...\n3. ...if the file ends with `.qmd`...\n4. ...open the file.\n5. Read the contents of the file into a string.\n6. Setup the data to insert into the `ibis` table.\n7. Create an Ibis memtable from the data.\n8. If the table does not exist, create it and insert the data.\n9. If the table exists, insert the data.\n10. Drop any memtable views that were created.\n11. List the tables, showing the `ibis` table.\n\n\n\nLet's inspect the table:\n\n::: {#d3e4221b .cell execution_count=8}\n``` {.python .cell-code}\nt = rag_con.table(repo_name)  # <1>\nt\n```\n\n::: {.cell-output .cell-output-display execution_count=8}\n```{=html}\n<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃<span style=\"font-weight: bold\"> filepath                                    </span>┃<span style=\"font-weight: bold\"> contents                                                                                  </span>┃\n┡━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                      │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                                                                    │\n├─────────────────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────┤\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/why.qmd                          </span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Why Ibis?\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis is the portable Python dataframe library.</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">If …   </span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/404.qmd                          </span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Page not found</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">The page you requested cannot be found (perhaps it was moved …       </span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/support_matrix.qmd               </span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Operation support matrix\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">format: dashboard</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">hide:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">  - toc</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">## {…  </span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/index.qmd                        </span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Ibis\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">description: \"the portable Python dataframe library\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">repo-act…      </span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/install.qmd                      </span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">hide:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">  - toc</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">  - navigation</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">  - footer</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\"># Installation</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">{{&lt; include ./…</span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/getting-started.qmd              </span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Getting started\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">sidebar: getting-started</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Welcome to the Ibis …    </span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts.qmd                        </span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Posts\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">listing:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">  contents: posts</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">  sort: \"date desc\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">  image-place…    </span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/presentations.qmd                </span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Presentations\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">sidebar: presentations</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis presentations are l…    </span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/bigquery-arrays/index.qmd  </span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Working with arrays in Google BigQuery</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Phillip Cloud\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date:…      </span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/website-to-quarto/index.qmd</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Migrating Ibis documentation to Quarto\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Cody\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: \"2023-…      </span> │\n│ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                           │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                                                         │\n└─────────────────────────────────────────────┴───────────────────────────────────────────────────────────────────────────────────────────┘\n</pre>\n```\n:::\n:::\n\n\n1. Get the `ibis` table from the DuckDB database.\n\nNow we have a DuckDB database with the `ibis` table containing all the file\npaths and contents of the Quarto markdown files in the `ibis` repository. You\ncan adjust this code to work with any repository and any file type(s)! For\ninstance, we may also want to ingest all the `.py` files in the Ibis repsoitory.\n\n### Embedding text to vectors\n\nTo search for similar text in traditional RAG fashion, we need to **embed** the\ntext into vectors. We can use [OpenAI's embedding\nmodels](https://platform.openai.com/docs/guides/embeddings/embedding-models) to\nperform this step.\n\nNote that the maximum length of input **tokens** is 8,191. A word typically\nconsists of 1-3 tokens. To estimate tokens of a string in Python, we can roughly\ndivide the length of that string by 4. This isn't perfect, but will work for\nnow. Let's augmented our data with the estimated number of tokens and sort from\nlargest to smallest:\n\n::: {#17fde5c5 .cell execution_count=9}\n``` {.python .cell-code}\ndef _estimate_tokens(text: str) -> int:  # <1>\n    return len(text) // 4  # <1>\n\n\n@ibis.udf.scalar.python  # <2>\ndef estimate_tokens(text: str) -> int:  # <2>\n    return _estimate_tokens(text)  # <2>\n```\n:::\n\n\n1. Create a regular Python function to estimate tokens.\n2. Create an Ibis UDF using the Python function.\n\n::: {#3f706179 .cell execution_count=10}\n``` {.python .cell-code}\nt = (\n    t.mutate(tokens_estimate=estimate_tokens(t.contents))  # <1>\n    .order_by(ibis._[\"tokens_estimate\"].desc()) # <2>\n    .relocate(\"filepath\", \"tokens_estimate\") # <3>\n)\nt\n```\n\n::: {.cell-output .cell-output-display execution_count=10}\n```{=html}\n<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃<span style=\"font-weight: bold\"> filepath                                           </span>┃<span style=\"font-weight: bold\"> tokens_estimate </span>┃<span style=\"font-weight: bold\"> contents                                                                             </span>┃\n┡━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                             │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">int64</span>           │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                                                               │\n├────────────────────────────────────────────────────┼─────────────────┼──────────────────────────────────────────────────────────────────────────────────────┤\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/ibis-analytics/index.qmd          </span> │           <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">14401</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Modern, hybrid, open analytics</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Cody\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: \"2024-01-25\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">ima…</span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/backends/impala.qmd                     </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">7688</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Impala</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">[https://impala.apache.org](https://impala.apache.org)</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">![](https://i…</span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/tutorials/ibis-for-sql-users.qmd        </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">6777</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Tutorial: Ibis for SQL users</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">## Prerequisites</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">{{&lt; include ../_tabsets/insta…</span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/lms-for-data/index.qmd            </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">5508</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Using language models for data\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Cody Peterson\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: \"2024… </span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/pydata-performance/index.qmd      </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">4801</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Ibis versus X: Performance across the ecosystem part 1\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Ph…  </span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/tutorials/ibis-for-pandas-users.qmd     </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">4455</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Tutorial: Ibis for pandas users</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">## Prerequisites</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">{{&lt; include ../_tabsets/in…</span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/campaign-finance/index.qmd        </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">4241</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Exploring campaign finance data\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Nick Crews\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: \"2023-0… </span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/backend-agnostic-arrays/index.qmd </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">3471</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Backend agnostic arrays</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Phillip Cloud\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2024-01-19</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">cat…</span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/ibis_substrait_to_duckdb/index.qmd</span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">3323</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Ibis + Substrait + DuckDB\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: Gil Forsyth</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2023-02-01</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">cat…</span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/ci-analysis/index.qmd             </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">3222</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Analysis of Ibis's CI performance\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Phillip Cloud\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: \"2… </span> │\n│ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                  │               <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                                                    │\n└────────────────────────────────────────────────────┴─────────────────┴──────────────────────────────────────────────────────────────────────────────────────┘\n</pre>\n```\n:::\n:::\n\n\n1. Augment the table with the estimated number of tokens.\n2. Sort the table by the estimated number of tokens in descending order.\n3. Relocate the `filepath` and `tokens_estimate` columns to the front of the table.\n\nThe longest text is certainly over our embedding model limit, and the second\nlongest might be as well. In practice, we'd want to chunk our text into smaller\npieces. This is its own challenge, but for the purposes of this demonstration\nwe'll just ignore text that is probably too long.\n\nLet's define our embedding functions:\n\n::: {#a0b41c8e .cell execution_count=11}\n``` {.python .cell-code}\ndef _embed(text: str) -> list[float]:  # <1>\n    \"\"\"Text to fixed-length array embedding.\"\"\"  # <1>\n    try:  # <2>\n        model = \"text-embedding-3-small\"  # <3>\n        text = text.replace(\"\\n\", \" \")  # <4>\n        client = OpenAI()  # <5>\n        return (  # <6>\n            client.embeddings.create(input=[text], model=model).data[0].embedding\n        )  # <6>\n    except Exception as e:  # <7>\n        print(e)  # <7>\n        return None  # <7>\n\n\n@ibis.udf.scalar.python  # <8>\ndef embed(text: str, tokens_estimate: int) -> list[float]:  # <8>\n    \"\"\"Text to fixed-length array embedding.\"\"\"  # <8>\n    if 0 < tokens_estimate < 8191:  # <9>\n        return _embed(text)  # <10>\n    return None  # <11>\n```\n:::\n\n\n1. Define a regular Python function to embed text.\n2. Since it's an external API call, we need to handle exceptions.\n3. Define the embedding model to use.\n4. Replace newlines with spaces.\n5. Create an OpenAI client.\n6. Call the OpenAI API to embed the text.\n7. Handle exceptions and return `None` if an error occurs.\n8. Define an Ibis UDF using the Python function.\n9. If the estimated number of tokens is within the limit...\n10. ...call the Python function to embed the text.\n11. Otherwise, return `None`.\n\nCosine similarity over vectors is a common way to measure similarity for RAG\napplications. We'll explore its downsides below.\n\nLet's embed the text:\n\n\n\n::: {#37d77077 .cell execution_count=13}\n``` {.python .cell-code}\nt = t.mutate(  # <1>\n    embedding=embed(t[\"contents\"], t[\"tokens_estimate\"])  # <1>\n).cache()  # <1>\nt\n```\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<script type=\"application/vnd.jupyter.widget-view+json\">\n{\"model_id\":\"70c220ac60da4858aedd0ccf29fc513b\",\"version_major\":2,\"version_minor\":0,\"quarto_mimetype\":\"application/vnd.jupyter.widget-view+json\"}\n</script>\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\nError code: 400 - {'error': {'message': \"This model's maximum context length is 8192 tokens, however you requested 8428 tokens (8428 in your prompt; 0 for the completion). Please reduce your prompt; or completion length.\", 'type': 'invalid_request_error', 'param': None, 'code': None}}\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=13}\n```{=html}\n<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃<span style=\"font-weight: bold\"> filepath                                           </span>┃<span style=\"font-weight: bold\"> tokens_estimate </span>┃<span style=\"font-weight: bold\"> contents                                                                             </span>┃<span style=\"font-weight: bold\"> embedding                                                   </span>┃\n┡━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                             │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">int64</span>           │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                                                               │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">array&lt;float64&gt;</span>                                              │\n├────────────────────────────────────────────────────┼─────────────────┼──────────────────────────────────────────────────────────────────────────────────────┼─────────────────────────────────────────────────────────────┤\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/ibis-analytics/index.qmd          </span> │           <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">14401</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Modern, hybrid, open analytics</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Cody\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: \"2024-01-25\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">ima…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">NULL</span>                                                        │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/backends/impala.qmd                     </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">7688</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Impala</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">[https://impala.apache.org](https://impala.apache.org)</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">![](https://i…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">NULL</span>                                                        │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/tutorials/ibis-for-sql-users.qmd        </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">6777</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Tutorial: Ibis for SQL users</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">## Prerequisites</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">{{&lt; include ../_tabsets/insta…</span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.032762881368398666</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.03934009373188019</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>     │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/lms-for-data/index.qmd            </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">5508</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Using language models for data\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Cody Peterson\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: \"2024… </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.019190069288015366</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.041595082730054855</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>    │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/pydata-performance/index.qmd      </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">4801</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Ibis versus X: Performance across the ecosystem part 1\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Ph…  </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.010016703978180885</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.0049371435306966305</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>    │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/tutorials/ibis-for-pandas-users.qmd     </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">4455</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Tutorial: Ibis for pandas users</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">## Prerequisites</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">{{&lt; include ../_tabsets/in…</span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.007494321092963219</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.028004156425595284</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>    │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/campaign-finance/index.qmd        </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">4241</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Exploring campaign finance data\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Nick Crews\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: \"2023-0… </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.01551054883748293</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.01505258958786726</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>      │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/backend-agnostic-arrays/index.qmd </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">3471</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Backend agnostic arrays</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Phillip Cloud\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2024-01-19</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">cat…</span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.0014422409003600478</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.0041314102709293365</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/ibis_substrait_to_duckdb/index.qmd</span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">3323</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Ibis + Substrait + DuckDB\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: Gil Forsyth</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2023-02-01</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">cat…</span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.026451440528035164</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.06056130677461624</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>     │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/ci-analysis/index.qmd             </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">3222</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Analysis of Ibis's CI performance\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Phillip Cloud\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: \"2… </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.013408638536930084</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.02664416842162609</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>     │\n│ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                  │               <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                                                    │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                           │\n└────────────────────────────────────────────────────┴─────────────────┴──────────────────────────────────────────────────────────────────────────────────────┴─────────────────────────────────────────────────────────────┘\n</pre>\n```\n:::\n:::\n\n\n1. Augment the table with the embedded text and cache the result.\n\nNotice there was one error -- that second row's content was indeed too long! Our\ntoken estimate is a bit off, but overall useful. We accounted for this\npossibility in our Python UDF above, returning `None` (mapped to `NULL` in\nDuckDB) when the text is too long or an error occurs.\n\n### Searching with cosine similarity\n\nWe'll make Ibis aware of DuckDB's built-in `list_cosine_similarity` function:\n\n::: {#b23eba96 .cell execution_count=14}\n``` {.python .cell-code}\n@ibis.udf.scalar.builtin  # <1>\ndef list_cosine_similarity(x, y) -> float:  # <1>\n    \"\"\"Compute cosine similarity between two vectors.\"\"\"  # <1>\n```\n:::\n\n\n1. Use an Ibis builtin UDF to define a cosine similarity function.\n\n::: {.callout-tip}\nIf using a different backend, you'll need to use its corresponding cosine\nsimilarity function or define your own.\n:::\n\nNow we can search for similar text in the documentation:\n\n::: {#1a1fc07d .cell execution_count=15}\n``` {.python .cell-code}\ndef search_docs(text):  # <1>\n    embedding = _embed(text)  # <2>\n\n    s = (\n        t.mutate(similarity=list_cosine_similarity(t.embedding, embedding))  # <3>\n        .relocate(\"similarity\")  # <4>\n        .order_by(ibis._[\"similarity\"].desc())  # <5>\n        .cache()  # <6>\n    )\n\n    return s\n```\n:::\n\n\n1. Define a function to search the documentation.\n2. Embed the input text.\n3. Augment the table with the cosine similarity between the embedded text and the input text.\n4. Relocate the `similarity` column to the front of the table.\n5. Sort the table by the cosine similarity in descending order.\n6. Cache the result.\n\n::: {#7f6fb10e .cell execution_count=16}\n``` {.python .cell-code}\ntext = \"where can I chat with the community about Ibis?\"\nsearch_docs(text)\n```\n\n::: {.cell-output .cell-output-display execution_count=16}\n```{=html}\n<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">┏━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃<span style=\"font-weight: bold\"> similarity </span>┃<span style=\"font-weight: bold\"> filepath                                                          </span>┃<span style=\"font-weight: bold\"> tokens_estimate </span>┃<span style=\"font-weight: bold\"> contents                                                                               </span>┃<span style=\"font-weight: bold\"> embedding                                                 </span>┃\n┡━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">float64</span>    │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                                            │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">int64</span>           │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                                                                 │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">array&lt;float64&gt;</span>                                            │\n├────────────┼───────────────────────────────────────────────────────────────────┼─────────────────┼────────────────────────────────────────────────────────────────────────────────────────┼───────────────────────────────────────────────────────────┤\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.661852</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/zulip/index.qmd                                  </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">440</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Announcing Zulip for Ibis community chat\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Ibis team\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date:…   </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.00033197790617123246</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05603647977113724</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.578235</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/concepts/who.qmd                                       </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">800</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Who supports Ibis?</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis is an open-source project that welcomes contribution…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.006300679408013821</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05288177356123924</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.569246</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/why.qmd                                                </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">731</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Why Ibis?\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis is the portable Python dataframe library.</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">If …</span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.00048549860366620123</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05761361122131348</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span> │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.560286</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/concepts/user-testimonials.qmd                         </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1079</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># User testimonials</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">This page collects user testimonials about Ibis from the c…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.013335400260984898</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.034098923206329346</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.551246</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/getting-started.qmd                                    </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">157</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Getting started\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">sidebar: getting-started</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Welcome to the Ibis … </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.035996999591588974</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.03943954035639763</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.527626</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/contribute/02_workflow.qmd                             </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">574</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Contribute to the Ibis codebase</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">## Getting started</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">First, set up a [develop…  </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.01897418312728405</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05570495128631592</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>    │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.522431</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/ibis-version-4.0.0-release/index.qmd             </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">743</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Ibis v4.0.0</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: Patrick Clarke</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2023-01-09</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">categories:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">    … </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.017321649938821793</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05772090330719948</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.519414</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/Ibis-version-3.0.0-release/index.qmd             </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">2038</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Ibis v3.0.0</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: Marlene Mhangami</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2022-04-25</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">categories:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">  … </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.02136301063001156</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.03890605643391609</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>    │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.517491</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/tutorials/open-source-software/apache-flink/0_setup.qmd</span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">425</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Getting started</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">In this tutorial, you will learn how to set up and use Flink…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.049202971160411835</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.037027861922979355</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.510845</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/_code/setup_penguins.qmd                               </span> │              <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">85</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">```{python}</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">import ibis  # &lt;1&gt;</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">import ibis.selectors as s  # &lt;1&gt;</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">ibis.options.…  </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.009995625354349613</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.014497287571430206</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│          <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                                 │               <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                                                      │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                         │\n└────────────┴───────────────────────────────────────────────────────────────────┴─────────────────┴────────────────────────────────────────────────────────────────────────────────────────┴───────────────────────────────────────────────────────────┘\n</pre>\n```\n:::\n:::\n\n\n::: {#a5843bca .cell execution_count=17}\n``` {.python .cell-code}\ntext = \"what do users say about Ibis?\"\nsearch_docs(text)\n```\n\n::: {.cell-output .cell-output-display execution_count=17}\n```{=html}\n<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">┏━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃<span style=\"font-weight: bold\"> similarity </span>┃<span style=\"font-weight: bold\"> filepath                                             </span>┃<span style=\"font-weight: bold\"> tokens_estimate </span>┃<span style=\"font-weight: bold\"> contents                                                                               </span>┃<span style=\"font-weight: bold\"> embedding                                                 </span>┃\n┡━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">float64</span>    │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                               │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">int64</span>           │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                                                                 │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">array&lt;float64&gt;</span>                                            │\n├────────────┼──────────────────────────────────────────────────────┼─────────────────┼────────────────────────────────────────────────────────────────────────────────────────┼───────────────────────────────────────────────────────────┤\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.574679</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/concepts/user-testimonials.qmd            </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1079</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># User testimonials</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">This page collects user testimonials about Ibis from the c…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.013335400260984898</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.034098923206329346</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.562193</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/why.qmd                                   </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">731</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Why Ibis?\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis is the portable Python dataframe library.</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">If …</span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.00048549860366620123</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05761361122131348</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span> │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.544941</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/concepts/who.qmd                          </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">800</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Who supports Ibis?</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis is an open-source project that welcomes contribution…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.006300679408013821</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05288177356123924</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.528465</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/zulip/index.qmd                     </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">440</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Announcing Zulip for Ibis community chat\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Ibis team\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date:…   </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.00033197790617123246</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05603647977113724</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.523024</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/getting-started.qmd                       </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">157</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Getting started\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">sidebar: getting-started</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Welcome to the Ibis … </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.035996999591588974</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.03943954035639763</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.516631</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/ibis-version-4.0.0-release/index.qmd</span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">743</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Ibis v4.0.0</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: Patrick Clarke</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2023-01-09</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">categories:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">    … </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.017321649938821793</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05772090330719948</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.500695</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/_tabsets/install_default.qmd              </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">127</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">We recommend starting with the default (DuckDB) backend for a performant, fully…      </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.004252271726727486</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.025945203378796577</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.497401</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/how-to/configure/basics.qmd               </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">611</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Basic configuration</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">If you don't have your own data, you can load example da…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.02095085009932518</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.04434989020228386</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>    │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.491826</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/ibis-to-file/index.qmd              </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">700</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Ibis sneak peek: writing to files\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: Kae Suarez</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2023-03…   </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.02339361608028412</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.07014117389917374</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>     │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.484295</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/_code/setup_penguins.qmd                  </span> │              <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">85</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">```{python}</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">import ibis  # &lt;1&gt;</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">import ibis.selectors as s  # &lt;1&gt;</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">ibis.options.…  </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.009995625354349613</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.014497287571430206</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│          <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                    │               <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                                                      │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                         │\n└────────────┴──────────────────────────────────────────────────────┴─────────────────┴────────────────────────────────────────────────────────────────────────────────────────┴───────────────────────────────────────────────────────────┘\n</pre>\n```\n:::\n:::\n\n\n::: {#ca19033c .cell execution_count=18}\n``` {.python .cell-code}\ntext = \"can Ibis complete the one billion row challenge?\"\nsearch_docs(text)\n```\n\n::: {.cell-output .cell-output-display execution_count=18}\n```{=html}\n<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">┏━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃<span style=\"font-weight: bold\"> similarity </span>┃<span style=\"font-weight: bold\"> filepath                                             </span>┃<span style=\"font-weight: bold\"> tokens_estimate </span>┃<span style=\"font-weight: bold\"> contents                                                                               </span>┃<span style=\"font-weight: bold\"> embedding                                                 </span>┃\n┡━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">float64</span>    │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                               │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">int64</span>           │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                                                                 │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">array&lt;float64&gt;</span>                                            │\n├────────────┼──────────────────────────────────────────────────────┼─────────────────┼────────────────────────────────────────────────────────────────────────────────────────┼───────────────────────────────────────────────────────────┤\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.608128</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/1brc/index.qmd                      </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">2129</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Using one Python dataframe API to take the billion row challenge wi…     </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.013509240001440048</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.0003828565531875938</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span> │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.504309</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/concepts/who.qmd                          </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">800</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Who supports Ibis?</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis is an open-source project that welcomes contribution…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.006300679408013821</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05288177356123924</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.482077</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/presentations/overview.qmd                </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1697</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Ibis overview\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">format:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">  revealjs:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">    footer: &lt;https://ibis-projec…  </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.0015606271335855126</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.019388146698474884</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span> │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.473605</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/why.qmd                                   </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">731</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Why Ibis?\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis is the portable Python dataframe library.</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">If …</span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.00048549860366620123</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05761361122131348</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span> │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.468865</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/Ibis-version-3.0.0-release/index.qmd</span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">2038</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Ibis v3.0.0</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: Marlene Mhangami</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2022-04-25</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">categories:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">  … </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.02136301063001156</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.03890605643391609</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>    │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.465952</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/concepts/user-testimonials.qmd            </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1079</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># User testimonials</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">This page collects user testimonials about Ibis from the c…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.013335400260984898</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.034098923206329346</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.465942</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/tutorials/data-platforms/clickhouse.qmd   </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">826</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: ClickHouse</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">freeze: auto</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">[Ibis](https://ibis-project.com) suppor… </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.027811484411358833</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.02419976517558098</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.456244</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/_code/setup_penguins.qmd                  </span> │              <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">85</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">```{python}</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">import ibis  # &lt;1&gt;</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">import ibis.selectors as s  # &lt;1&gt;</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">ibis.options.…  </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.009995625354349613</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.014497287571430206</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.455196</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/how-to/visualization/seaborn.qmd          </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">159</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># seaborn + Ibis</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">If you don't have data to visualize, you can load an example …    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.012414666824042797</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.012007818557322025</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.453296</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/how-to/input-output/duckdb-parquet.qmd    </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">651</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Read parquet files with Ibis</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">In this example, we will use Ibis'…  </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.01082119531929493</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.04467007517814636</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>     │\n│          <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                    │               <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                                                      │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                         │\n└────────────┴──────────────────────────────────────────────────────┴─────────────────┴────────────────────────────────────────────────────────────────────────────────────────┴───────────────────────────────────────────────────────────┘\n</pre>\n```\n:::\n:::\n\n\n::: {#c5eda97a .cell execution_count=19}\n``` {.python .cell-code}\ntext = \"teach me about the Polars backend\"\nsearch_docs(text)\n```\n\n::: {.cell-output .cell-output-display execution_count=19}\n```{=html}\n<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">┏━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃<span style=\"font-weight: bold\"> similarity </span>┃<span style=\"font-weight: bold\"> filepath                                             </span>┃<span style=\"font-weight: bold\"> tokens_estimate </span>┃<span style=\"font-weight: bold\"> contents                                                                               </span>┃<span style=\"font-weight: bold\"> embedding                                                 </span>┃\n┡━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">float64</span>    │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                               │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">int64</span>           │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                                                                 │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">array&lt;float64&gt;</span>                                            │\n├────────────┼──────────────────────────────────────────────────────┼─────────────────┼────────────────────────────────────────────────────────────────────────────────────────┼───────────────────────────────────────────────────────────┤\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.597506</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/backends/polars.qmd                       </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">402</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Polars</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">[https://www.pola.rs](https://www.pola.rs)</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">{{&lt; include /_callouts/ex…  </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.04319469630718231</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.030947020277380943</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.396795</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/pydata-performance-part2/index.qmd  </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1567</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Ibis versus X: Performance across the ecosystem part 2\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Ph…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.0013977460330352187</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.028734903782606125</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span> │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.364785</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/ibis-version-4.0.0-release/index.qmd</span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">743</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Ibis v4.0.0</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: Patrick Clarke</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2023-01-09</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">categories:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">    … </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.017321649938821793</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05772090330719948</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.356057</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/_callouts/experimental_backend.qmd        </span> │              <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">26</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">::: {.callout-warning}</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">This backend is experimental and is subject to backwards…     </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.017363974824547768</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.034996237605810165</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.326231</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/how-to/input-output/multiple-backends.qmd </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">331</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Work with multiple backends</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">You can work with multiple backends by creating …    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.014376875944435596</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.018218286335468292</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.324941</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/presentations/overview.qmd                </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1697</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Ibis overview\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">format:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">  revealjs:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">    footer: &lt;https://ibis-projec…  </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.0015606271335855126</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.019388146698474884</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span> │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.315046</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/backends/_templates/api.qmd               </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">121</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">```{python}</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">#| echo: false</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">#| output: asis</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">from _utils import get_backend, ren…  </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.013808815740048885</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.03160477802157402</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.311201</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/backends/postgresql.qmd                   </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">493</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># PostgreSQL</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">[https://www.postgresql.org](https://www.postgresql.org)</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">![](htt…  </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.046312808990478516</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.031841542571783066</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.300936</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/ibis-version-8.0.0-release/index.qmd</span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">2062</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Ibis 8.0: streaming and more!\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Ibis team\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: \"2024-02-1…   </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.005049674306064844</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.03530928120017052</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>    │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.298417</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/why.qmd                                   </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">731</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Why Ibis?\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis is the portable Python dataframe library.</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">If …</span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.00048549860366620123</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05761361122131348</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span> │\n│          <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                    │               <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                                                      │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                         │\n└────────────┴──────────────────────────────────────────────────────┴─────────────────┴────────────────────────────────────────────────────────────────────────────────────────┴───────────────────────────────────────────────────────────┘\n</pre>\n```\n:::\n:::\n\n\n::: {#1bfdeac9 .cell execution_count=20}\n``` {.python .cell-code}\ntext = \"why does Voltron Data support Ibis?\"\nsearch_docs(text)\n```\n\n::: {.cell-output .cell-output-display execution_count=20}\n```{=html}\n<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">┏━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃<span style=\"font-weight: bold\"> similarity </span>┃<span style=\"font-weight: bold\"> filepath                                             </span>┃<span style=\"font-weight: bold\"> tokens_estimate </span>┃<span style=\"font-weight: bold\"> contents                                                                               </span>┃<span style=\"font-weight: bold\"> embedding                                                 </span>┃\n┡━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">float64</span>    │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                               │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">int64</span>           │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                                                                 │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">array&lt;float64&gt;</span>                                            │\n├────────────┼──────────────────────────────────────────────────────┼─────────────────┼────────────────────────────────────────────────────────────────────────────────────────┼───────────────────────────────────────────────────────────┤\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.679064</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/concepts/who.qmd                          </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">800</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Who supports Ibis?</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis is an open-source project that welcomes contribution…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.006300679408013821</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05288177356123924</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.615970</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/why-voda-supports-ibis/index.qmd    </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">3056</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Why Voltron Data supports Ibis\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Cody Peterson + Ian Cook\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">…   </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.0027232086285948753</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.0460839718580246</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.582295</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/why.qmd                                   </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">731</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Why Ibis?\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis is the portable Python dataframe library.</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">If …</span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.00048549860366620123</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05761361122131348</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span> │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.536918</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/_code/input_output_penguins.qmd           </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">947</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">## Data platforms</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">You can connect Ibis to any supported backend to read and wr…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.009215430356562138</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.020675163716077805</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.528772</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/concepts/user-testimonials.qmd            </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1079</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># User testimonials</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">This page collects user testimonials about Ibis from the c…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.013335400260984898</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.034098923206329346</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.523804</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/presentations/overview.qmd                </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1697</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Ibis overview\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">format:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">  revealjs:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">    footer: &lt;https://ibis-projec…  </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.0015606271335855126</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.019388146698474884</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span> │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.516844</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/ibis-version-4.0.0-release/index.qmd</span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">743</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Ibis v4.0.0</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: Patrick Clarke</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2023-01-09</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">categories:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">    … </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.017321649938821793</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05772090330719948</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.515110</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/concepts/composable-ecosystem.qmd         </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1490</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Composable data ecosystem</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis exists in a broader composable data ecosystem…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.0018551592947915196</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.0542871318757534</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.514372</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/backends/trino.qmd                        </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">743</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Trino</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">[https://trino.io](https://trino.io)</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">{{&lt; include /_callouts/experimen…  </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.048331551253795624</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.04068818688392639</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.500438</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/how-to/input-output/basics.qmd            </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">105</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Basic input/output</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">If you don't have your own data, you can load example dat…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.00725388852879405</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.047017041593790054</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│          <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                    │               <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                                                      │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                         │\n└────────────┴──────────────────────────────────────────────────────┴─────────────────┴────────────────────────────────────────────────────────────────────────────────────────┴───────────────────────────────────────────────────────────┘\n</pre>\n```\n:::\n:::\n\n\n::: {#f8fbd26c .cell execution_count=21}\n``` {.python .cell-code}\ntext = \"why should I use Ibis?\"\nsearch_docs(text)\n```\n\n::: {.cell-output .cell-output-display execution_count=21}\n```{=html}\n<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">┏━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃<span style=\"font-weight: bold\"> similarity </span>┃<span style=\"font-weight: bold\"> filepath                                             </span>┃<span style=\"font-weight: bold\"> tokens_estimate </span>┃<span style=\"font-weight: bold\"> contents                                                                               </span>┃<span style=\"font-weight: bold\"> embedding                                                 </span>┃\n┡━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">float64</span>    │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                               │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">int64</span>           │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                                                                 │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">array&lt;float64&gt;</span>                                            │\n├────────────┼──────────────────────────────────────────────────────┼─────────────────┼────────────────────────────────────────────────────────────────────────────────────────┼───────────────────────────────────────────────────────────┤\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.621761</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/why.qmd                                   </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">731</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Why Ibis?\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis is the portable Python dataframe library.</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">If …</span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.00048549860366620123</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05761361122131348</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span> │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.589931</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/concepts/who.qmd                          </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">800</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Who supports Ibis?</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis is an open-source project that welcomes contribution…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.006300679408013821</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05288177356123924</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.580506</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/_tabsets/install_default.qmd              </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">127</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">We recommend starting with the default (DuckDB) backend for a performant, fully…      </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.004252271726727486</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.025945203378796577</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.564820</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/concepts/user-testimonials.qmd            </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1079</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># User testimonials</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">This page collects user testimonials about Ibis from the c…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.013335400260984898</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.034098923206329346</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.563156</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/getting-started.qmd                       </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">157</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Getting started\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">sidebar: getting-started</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Welcome to the Ibis … </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.035996999591588974</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.03943954035639763</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.549894</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/_code/setup_penguins.qmd                  </span> │              <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">85</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">```{python}</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">import ibis  # &lt;1&gt;</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">import ibis.selectors as s  # &lt;1&gt;</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">ibis.options.…  </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.009995625354349613</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.014497287571430206</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.545518</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/how-to/configure/basics.qmd               </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">611</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Basic configuration</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">If you don't have your own data, you can load example da…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.02095085009932518</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.04434989020228386</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>    │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.542379</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/ibis-version-4.0.0-release/index.qmd</span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">743</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Ibis v4.0.0</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: Patrick Clarke</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2023-01-09</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">categories:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">    … </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.017321649938821793</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05772090330719948</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.539636</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/ibis-to-file/index.qmd              </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">700</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Ibis sneak peek: writing to files\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: Kae Suarez</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2023-03…   </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.02339361608028412</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.07014117389917374</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>     │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.534821</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/_callouts/pypi_warning.qmd                </span> │              <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">59</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">::: {.callout-warning}</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Note that the `ibis-framework` package is _not_ the same…     </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.0019332439405843616</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.01002512127161026</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│          <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                    │               <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                                                      │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                         │\n└────────────┴──────────────────────────────────────────────────────┴─────────────────┴────────────────────────────────────────────────────────────────────────────────────────┴───────────────────────────────────────────────────────────┘\n</pre>\n```\n:::\n:::\n\n\n::: {#dbfb5c99 .cell execution_count=22}\n``` {.python .cell-code}\ntext = \"what is the Ibis roadmap?\"\nsearch_docs(text)\n```\n\n::: {.cell-output .cell-output-display execution_count=22}\n```{=html}\n<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">┏━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃<span style=\"font-weight: bold\"> similarity </span>┃<span style=\"font-weight: bold\"> filepath                                             </span>┃<span style=\"font-weight: bold\"> tokens_estimate </span>┃<span style=\"font-weight: bold\"> contents                                                                               </span>┃<span style=\"font-weight: bold\"> embedding                                                 </span>┃\n┡━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">float64</span>    │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                               │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">int64</span>           │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                                                                 │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">array&lt;float64&gt;</span>                                            │\n├────────────┼──────────────────────────────────────────────────────┼─────────────────┼────────────────────────────────────────────────────────────────────────────────────────┼───────────────────────────────────────────────────────────┤\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.569530</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/roadmap-2024-H1/index.qmd           </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">2958</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Ibis project 2024 roadmap\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Cody Peterson\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: \"2024-02-1…   </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.011533920653164387</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.07820627093315125</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.563495</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/why.qmd                                   </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">731</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Why Ibis?\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis is the portable Python dataframe library.</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">If …</span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.00048549860366620123</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05761361122131348</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span> │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.555974</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/concepts/who.qmd                          </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">800</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Who supports Ibis?</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis is an open-source project that welcomes contribution…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.006300679408013821</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05288177356123924</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.544183</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/ibis-version-4.0.0-release/index.qmd</span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">743</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Ibis v4.0.0</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: Patrick Clarke</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2023-01-09</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">categories:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">    … </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.017321649938821793</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05772090330719948</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.524758</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/zulip/index.qmd                     </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">440</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Announcing Zulip for Ibis community chat\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Ibis team\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date:…   </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.00033197790617123246</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05603647977113724</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.514164</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/concepts/user-testimonials.qmd            </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1079</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># User testimonials</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">This page collects user testimonials about Ibis from the c…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.013335400260984898</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.034098923206329346</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.510721</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/Ibis-version-3.0.0-release/index.qmd</span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">2038</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Ibis v3.0.0</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: Marlene Mhangami</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2022-04-25</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">categories:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">  … </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.02136301063001156</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.03890605643391609</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>    │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.507631</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/ibis-to-file/index.qmd              </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">700</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Ibis sneak peek: writing to files\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: Kae Suarez</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2023-03…   </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.02339361608028412</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.07014117389917374</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>     │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.505868</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/posts/why-voda-supports-ibis/index.qmd    </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">3056</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Why Voltron Data supports Ibis\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Cody Peterson + Ian Cook\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">…   </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.0027232086285948753</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.0460839718580246</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.501694</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">ibis/docs/getting-started.qmd                       </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">157</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Getting started\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">sidebar: getting-started</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Welcome to the Ibis … </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.035996999591588974</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.03943954035639763</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│          <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                    │               <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                                                      │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                         │\n└────────────┴──────────────────────────────────────────────────────┴─────────────────┴────────────────────────────────────────────────────────────────────────────────────────┴───────────────────────────────────────────────────────────┘\n</pre>\n```\n:::\n:::\n\n\n## RAG pitfalls\n\nAs in traditional software engineering and machine learning, the architecture\nwhen building systems around language models is not a monolith. The best\nsolution is often \"**it depends**.\" Using cosine (or otherwise) similarity\nsearch over text transformed to numbers is not a silver bullet.\n\nWe can demonstrate this with the following scenario: let's assume we're building\na chatbot that writes and runs SQL on the user's behalf based on their questions\nposed in English (or any language the language model understand sufficiently).\nWe might store past queries, the SQL generated, and some evaluation criteria\n(upvote/downvote on the generated SQL from the user) in a database. Then we can\nuse the same RAG approach above to augment our queries with the user's past\nqueries and the generated SQL.\n\nTake the following English query:\n\n::: {#d6d22257 .cell execution_count=23}\n``` {.python .cell-code}\na = \"\"\"the first 10 rows of the penguins, ordered by body_mass_g from\nlightest to heaviest\"\"\"\n```\n:::\n\n\nWe can compute the cosine similarity of this query against itself, resulting in\n1.0 or close to it:\n\n::: {#1eef655b .cell execution_count=24}\n``` {.python .cell-code}\nlist_cosine_similarity(_embed(a), _embed(a))\n```\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\"></pre>\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=24}\n\n::: {.ansi-escaped-output}\n```{=html}\n<pre><span class=\"ansi-cyan-fg ansi-bold\">1.0</span></pre>\n```\n:::\n\n:::\n:::\n\n\nNow, let's flip the ordering. This would result in an entirely different SQL\nquery and result set:\n\n::: {#4590abeb .cell execution_count=25}\n``` {.python .cell-code}\nb = \"\"\"the first 10 rows of the penguins, ordered by body_mass_g from\nheaviest to lightest\"\"\"\n```\n:::\n\n\nAnd compute the cosine similarity of `a` and `b`:\n\n::: {#dcd77629 .cell execution_count=26}\n``` {.python .cell-code}\nlist_cosine_similarity(_embed(a), _embed(b))\n```\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\"></pre>\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=26}\n\n::: {.ansi-escaped-output}\n```{=html}\n<pre><span class=\"ansi-cyan-fg ansi-bold\">0.9926690646912523</span></pre>\n```\n:::\n\n:::\n:::\n\n\nSimilarly, we can construct a semantically equivalent query that would result in\nthe same SQL as example `a`:\n\n::: {#a0de06e7 .cell execution_count=27}\n``` {.python .cell-code}\nc = \"\"\"of the birds retrieve the initial ten opposite-of-columns,\nsorted from biggest to smallest by weight\"\"\"\n```\n:::\n\n\nThat has a much lower cosine similarity in the embedding space:\n\n::: {#19776bea .cell execution_count=28}\n``` {.python .cell-code}\nlist_cosine_similarity(_embed(a), _embed(c))\n```\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\"></pre>\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=28}\n\n::: {.ansi-escaped-output}\n```{=html}\n<pre><span class=\"ansi-cyan-fg ansi-bold\">0.5682471739636249</span></pre>\n```\n:::\n\n:::\n:::\n\n\nYou need to be careful and understand what the system is doing.\n\n## Discussion\n\nIs traditional RAG the best approach? It's unclear, and **it depends**.\n\n### System architecture\n\nOften, RAG-based systems introduce yet-another-database to store the embeddings.\nHopefully this post has demonstrated that traditional database options can work\njust fine. While we're only demonstrating this on a few rows here, DuckDB can\nscale up to many millions with ease.\n\n### Cost and speed\n\nThe cost of running this demo from OpenAI is less than $0.01 USD. It also runs\nin about a minute, but with many rows this would be much slower. You need to\nconsider your architecture here. One option would be using an open source\nembedding model that can run locally. Swap out the OpenAI calls with that and\nsee how it goes!\n\n### Alternatives to vector search RAG\n\nIt's clear that we should always be augmenting our language model calls with the\nmost relevant context, even if traditional vector search RAG is not the best\nsolution.  The problem then becomes the best way to retrieve that context for a\ngiven system's desired behavior.\n\n::: {.callout-note title=\"Abolish RAG as terminology?\"}\n> I would like to abolish the term RAG and instead just agree that we should\n> always try to provide models with the appropriate context to provide high\n> quality answers.\n\\- [Hamel Husain](https://twitter.com/HamelHusain/status/1709740984643596768)\n:::\n\nSome alternatives to vector search RAG include:\n\n- traditional search\n- using a web search engine\n- using a language model for search\n\nThe last point is particularly interesting -- in the above examples with `a` and\n`c` strings, cosine similarity in the embedding space could not tell the queries\nare semantically equivalent. However, a sufficiently good language model\ncertainly could. As we demonstrated in [language models for\ndata](../lms-for-data/index.qmd), we could even setup a classifier and use [the\nlogit bias\ntrick](https://www.askmarvin.ai/docs/text/classification/#classifying-text) to\ncompute similarity with a single output token.\n\nThis trick makes the language model faster, but for practical applications the\ncost and speed of language models for search is still a concern. We can expect\nthis concern to be mitigated over time as language models become faster and\ncheaper to run.\n\nWith larger context lengths, we could also use an initial call to a language\nmodel to extract out relevant sections of text and then make a second call with\nthat augmented context.\n\n\n## Next steps\n\nTry this out yourself! All you need is an OpenAI account and the code above.\n\nIt's never been a better time to get involved with Ibis. [Join us on Zulip and\nintroduce yourself!](https://ibis-project.zulipchat.com/) More Ibis + language\nmodel content coming soon.\n\n",
    "supporting": [
      "index_files/figure-html"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n<script src=\"https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js\" crossorigin=\"anonymous\"></script>\n"
      ],
      "include-after-body": [
        "<script type=application/vnd.jupyter.widget-state+json>\n{\"state\":{\"6bf5c69ee20a445da707fe0605e3e3ba\":{\"model_module\":\"@jupyter-widgets/controls\",\"model_module_version\":\"2.0.0\",\"model_name\":\"ProgressStyleModel\",\"state\":{\"_model_module\":\"@jupyter-widgets/controls\",\"_model_module_version\":\"2.0.0\",\"_model_name\":\"ProgressStyleModel\",\"_view_count\":null,\"_view_module\":\"@jupyter-widgets/base\",\"_view_module_version\":\"2.0.0\",\"_view_name\":\"StyleView\",\"bar_color\":\"black\",\"description_width\":\"\"}},\"70c220ac60da4858aedd0ccf29fc513b\":{\"model_module\":\"@jupyter-widgets/controls\",\"model_module_version\":\"2.0.0\",\"model_name\":\"FloatProgressModel\",\"state\":{\"_dom_classes\":[],\"_model_module\":\"@jupyter-widgets/controls\",\"_model_module_version\":\"2.0.0\",\"_model_name\":\"FloatProgressModel\",\"_view_count\":null,\"_view_module\":\"@jupyter-widgets/controls\",\"_view_module_version\":\"2.0.0\",\"_view_name\":\"ProgressView\",\"bar_style\":\"\",\"description\":\"\",\"description_allow_html\":false,\"layout\":\"IPY_MODEL_df976e11d9b44b1d8dcae01d39f1c26f\",\"max\":100,\"min\":0,\"orientation\":\"horizontal\",\"style\":\"IPY_MODEL_6bf5c69ee20a445da707fe0605e3e3ba\",\"tabbable\":null,\"tooltip\":null,\"value\":100}},\"df976e11d9b44b1d8dcae01d39f1c26f\":{\"model_module\":\"@jupyter-widgets/base\",\"model_module_version\":\"2.0.0\",\"model_name\":\"LayoutModel\",\"state\":{\"_model_module\":\"@jupyter-widgets/base\",\"_model_module_version\":\"2.0.0\",\"_model_name\":\"LayoutModel\",\"_view_count\":null,\"_view_module\":\"@jupyter-widgets/base\",\"_view_module_version\":\"2.0.0\",\"_view_name\":\"LayoutView\",\"align_content\":null,\"align_items\":null,\"align_self\":null,\"border_bottom\":null,\"border_left\":null,\"border_right\":null,\"border_top\":null,\"bottom\":null,\"display\":null,\"flex\":null,\"flex_flow\":null,\"grid_area\":null,\"grid_auto_columns\":null,\"grid_auto_flow\":null,\"grid_auto_rows\":null,\"grid_column\":null,\"grid_gap\":null,\"grid_row\":null,\"grid_template_areas\":null,\"grid_template_columns\":null,\"grid_template_rows\":null,\"height\":null,\"justify_content\":null,\"justify_items\":null,\"left\":null,\"margin\":null,\"max_height\":null,\"max_width\":null,\"min_height\":null,\"min_width\":null,\"object_fit\":null,\"object_position\":null,\"order\":null,\"overflow\":null,\"padding\":null,\"right\":null,\"top\":null,\"visibility\":null,\"width\":\"auto\"}}},\"version_major\":2,\"version_minor\":0}\n</script>\n"
      ]
    }
  }
}