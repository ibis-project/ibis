{
  "hash": "098c066ec81a2ba01d8cf7017e54d78c",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Using DuckDB + Ibis for RAG\"\nauthor: \"Cody Peterson\"\ndate: \"2024-02-22\"\nimage: thumbnail.png\ncategories:\n    - blog\n    - llms\n    - duckdb\n---\n\n## Overview\n\nIn this post, we'll demonstrate traditional retrieval-augmented generation (RAG)\nwith DuckDB and OpenAI via Ibis and discuss the pros and cons. Notice that\nbecause Ibis is portable, you can use (almost) any database Ibis supports for\nRAG!\n\n::: {.callout-tip title=\"Which databases can I use?\"}\nThe database must support array types and have some form of similarity metric\nbetween arrays of numbers. Alternatively, a custom user-defined function (UDF)\ncan be used for the similarity metric.\n\nThe performance of calculating similarity will also be much faster if the\ndatabase supports [fixed-sized\narrays](https://duckdb.org/docs/sql/data_types/array) as DuckDB recently\nlaunched in version 0.10.0. We're still using 0.9.2 in this post, but it'll be\neasy to upgrade.\n:::\n\n[DuckDB is the default backend for Ibis](../why-duckdb/index.qmd) and makes\nrapid prototyping locally very easy. You can deploy it to\n[MotherDuck](https://motherduck.com) just by changing the connection string, or\nswap out DuckDB for another Ibis backend.\n\n## What is RAG?\n\nRetrieval-augmented generation (RAG) is a technique for language model systems\nto retrieve relevant information from a knowledge base, augment the model's\ninput with that knowledge, and then generate a response. It serves to provide\nuseful context given language models' context length limitations and increase\nthe quality of the response.\n\n::: {.callout-note title=\"Is RAG dead?\"}\nWith increasing language model context lengths, is RAG dead?\n\n**No**. Though as we'll discuss later, it's unclear if traditional vector\nsimilarity search RAG is the best approach. Regardless, just because a language\nmodel can use the entire content of a textbook doesn't mean you'll get better\nperformance (accuracy or efficiency) than first retrieving the relevant subsets\nof the textbook.\n:::\n\nTraditional RAG embeds text into vectors of numbers and then computes a\nsimilarity metric between input text and the knowledge base to determine the\nmost relevant context.\n\n\n```{mermaid}\ngraph LR\n    style T fill:#1E90FF,stroke:#1E90FF,color:#ffffff\n    style N fill:#1E90FF,stroke:#1E90FF,color:#ffffff\n    style C fill:#1E90FF,stroke:#1E90FF,color:#ffffff\n\n    T(\"text\") --> N(\"numbers (embedding vector)\")\n    N --> C(\"compute similarity metric\")\n```\n\n\nLet's jump into the code!\n\n## RAG over Ibis documentation\n\nWe'll use the Ibis documentation as our knowledge base.\n\n### Setup code\n\nFirst we need to install and import the necessary packages:\n\n```bash\npip install 'ibis-framework[duckdb]' openai python-dotenv\n```\n\n::: {#c22a6ef3 .cell execution_count=1}\n``` {.python .cell-code}\nimport os  # <1>\nimport ibis\n\nfrom openai import OpenAI\nfrom dotenv import load_dotenv\nfrom pathlib import Path  # <1>\n```\n:::\n\n\n1. Import the libraries we'll use.\n\nWe need to set the `OPENAI_API_KEY` environment variable to our OpenAI API key.\nDo this by creating a `.env` file in the same directory as the code and adding\nthe following line:\n\n```txt\nOPENAI_API_KEY=<your-api-key>  # <1>\n```\n\n1. Replace with your OpenAI API key.\n\nThen load the environment variables:\n\n::: {#81edc5fc .cell execution_count=2}\n``` {.python .cell-code}\nload_dotenv()  # <1>\n```\n\n::: {.cell-output .cell-output-display execution_count=2}\n```\nTrue\n```\n:::\n:::\n\n\n1. Load environment variables from the `.env` file.\n\nNow we're ready to make OpenAI calls.\n\nLet's also setup Ibis for interactive use:\n\n::: {#8eb1e5aa .cell execution_count=3}\n``` {.python .cell-code}\nibis.options.interactive = True  # <1>\n```\n:::\n\n\n1. Turn on Ibis interactive mode.\n\n### Getting the data into DuckDB\n\nLet's prepare to ingest all the Quarto markdown files into a\nDuckDB database called `rag.ddb`:\n\n::: {#4e9b28a6 .cell execution_count=4}\n``` {.python .cell-code}\nrag_con = ibis.connect(\"duckdb://rag.ddb\")  # <1>\n\nfor table in rag_con.list_tables():  # <2>\n    rag_con.drop_table(table)  # <2>\n\nrag_con.list_tables()  # <3>\n```\n\n::: {.cell-output .cell-output-display execution_count=4}\n```\n[]\n```\n:::\n:::\n\n\n1. Create the Ibis connection to the DuckDB database.\n2. Drop any existing tables from previous runs.\n3. List the tables in the database to show that there are none.\n\nWe'll walk through the Ibis `docs/` directory. For `.qmd` files, read the\ncontents and insert them into the `ibis` table:\n\n::: {.callout-tip}\nWe are running this blog within the Ibis repository. To run this on your own\ndata, adjust the code accordingly!\n:::\n\n::: {#c3e282a3 .cell execution_count=5}\n``` {.python .cell-code}\ntable_name = \"ibis\"  # <1>\n\nfor filepath in Path(ibis.__file__).parents[1].joinpath(\"docs\").rglob(\"*.qmd\"):  # <2>\n    contents = filepath.read_text()  # <3>\n\n    data = { # <4>\n        \"filepath\": [str(filepath).split(\"ibis/\")[1]],\n        \"contents\": [contents],\n    }  # <4>\n\n    t = ibis.memtable(data)  # <5>\n\n    if \"ibis\" not in rag_con.list_tables():  # <6>\n        rag_con.create_table(\"ibis\", t)  # <6>\n    else:  # <7>\n        rag_con.insert(\"ibis\", t)  # <7>\n\nfor table in rag_con.list_tables():  # <8>\n    if \"memtable\" in table:  # <8>\n        rag_con.drop_view(table)  # <8>\n\nrag_con.list_tables()  # <9>\n```\n\n::: {.cell-output .cell-output-display execution_count=5}\n```\n['ibis']\n```\n:::\n:::\n\n\n1. Define the table name.\n2. Walk through the `docs/` directory and find all `.qmd` files.\n3. Read the contents of each file.\n4. Create a dictionary with the file path and contents.\n5. Create an Ibis memtable from the dictionary.\n6. If the table doesn't exist, create it and insert the data.\n7. Otherwise, insert the data into the existing table.\n8. Drop any memtables that were created.\n9. List the tables in the database to show that the `ibis` table was created.\n\nLet's inspect the table:\n\n::: {#67710c75 .cell execution_count=6}\n``` {.python .cell-code}\nt = rag_con.table(table_name)  # <1>\nt\n```\n\n::: {.cell-output .cell-output-display execution_count=6}\n```{=html}\n<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃<span style=\"font-weight: bold\"> filepath                               </span>┃<span style=\"font-weight: bold\"> contents                                                                                  </span>┃\n┡━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                 │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                                                                    │\n├────────────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────┤\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/why.qmd                          </span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Why Ibis?\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis is the portable Python dataframe library.</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">If …   </span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/404.qmd                          </span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Page not found</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">The page you requested cannot be found (perhaps it was moved …       </span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/support_matrix.qmd               </span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Operation support matrix\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">format: dashboard</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">hide:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">  - toc</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">## {…  </span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/index.qmd                        </span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Ibis\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">description: \"the portable Python dataframe library\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">repo-act…      </span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/install.qmd                      </span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">hide:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">  - toc</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">  - navigation</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">  - footer</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\"># Installation</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">{{&lt; include ./…</span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/getting-started.qmd              </span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Getting started\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">sidebar: getting-started</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Welcome to the Ibis …    </span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts.qmd                        </span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Posts\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">listing:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">  contents: posts</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">  sort: \"date desc\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">  image-place…    </span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/presentations.qmd                </span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Presentations\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">sidebar: presentations</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis presentations are l…    </span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/bigquery-arrays/index.qmd  </span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Working with arrays in Google BigQuery</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Phillip Cloud\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date:…      </span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/website-to-quarto/index.qmd</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Migrating Ibis documentation to Quarto\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Cody\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: \"2023-…      </span> │\n│ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                      │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                                                         │\n└────────────────────────────────────────┴───────────────────────────────────────────────────────────────────────────────────────────┘\n</pre>\n```\n:::\n:::\n\n\n1. Get the `ibis` table from the DuckDB database.\n\nNow we have a DuckDB database with the `ibis` table containing all the file\npaths and contents of the Quarto markdown files in the `ibis` repository. You\ncan adjust this code to work with any repository and any file type(s)! For\ninstance, we may also want to ingest all the `.py` files in the Ibis repsoitory.\n\n### Embedding text to vectors\n\nTo search for similar text in traditional RAG fashion, we need to **embed** the\ntext into vectors. We can use [OpenAI's embedding\nmodels](https://platform.openai.com/docs/guides/embeddings/embedding-models) to\nperform this step.\n\nNote that the maximum length of input **tokens** is 8,191. A word typically\nconsists of 1-3 tokens. To estimate the number of tokens of a string in Python,\nwe can divide the length of that string by 4. This isn't perfect, but will work\nfor now. Let's augmented our data with the estimated number of tokens and sort\nfrom largest to smallest:\n\n::: {#1783de45 .cell execution_count=7}\n``` {.python .cell-code}\nt = (\n    t.mutate(tokens_estimate=t[\"contents\"].length() // 4)  # <1>\n    .order_by(ibis._[\"tokens_estimate\"].desc())  # <2>\n    .relocate(\"filepath\", \"tokens_estimate\")  # <3>\n)\nt\n```\n\n::: {.cell-output .cell-output-display execution_count=7}\n```{=html}\n<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃<span style=\"font-weight: bold\"> filepath                                      </span>┃<span style=\"font-weight: bold\"> tokens_estimate </span>┃<span style=\"font-weight: bold\"> contents                                                                             </span>┃\n┡━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                        │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">int64</span>           │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                                                               │\n├───────────────────────────────────────────────┼─────────────────┼──────────────────────────────────────────────────────────────────────────────────────┤\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/ibis-analytics/index.qmd          </span> │           <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">14401</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Modern, hybrid, open analytics</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Cody\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: \"2024-01-25\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">ima…</span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/backends/impala.qmd                     </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">7677</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Impala</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">[https://impala.apache.org](https://impala.apache.org)</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">![](https://i…</span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/tutorials/ibis-for-sql-users.qmd        </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">6777</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Tutorial: Ibis for SQL users</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">## Prerequisites</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">{{&lt; include ../_tabsets/insta…</span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/lms-for-data/index.qmd            </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">5508</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Using language models for data\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Cody Peterson\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: \"2024… </span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/pydata-performance/index.qmd      </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">4801</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Ibis versus X: Performance across the ecosystem part 1\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Ph…  </span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/tutorials/ibis-for-pandas-users.qmd     </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">4455</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Tutorial: Ibis for pandas users</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">## Prerequisites</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">{{&lt; include ../_tabsets/in…</span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/campaign-finance/index.qmd        </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">4241</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Exploring campaign finance data\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Nick Crews\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: \"2023-0… </span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/duckdb-for-rag/index.qmd          </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">3951</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Using DuckDB + Ibis for RAG\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Cody Peterson\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: \"2024-02… </span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/backend-agnostic-arrays/index.qmd </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">3471</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Backend agnostic arrays</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Phillip Cloud\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2024-01-19</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">cat…</span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/ibis_substrait_to_duckdb/index.qmd</span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">3323</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Ibis + Substrait + DuckDB\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: Gil Forsyth</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2023-02-01</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">cat…</span> │\n│ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                             │               <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                                                    │\n└───────────────────────────────────────────────┴─────────────────┴──────────────────────────────────────────────────────────────────────────────────────┘\n</pre>\n```\n:::\n:::\n\n\n1. Augment the table with the estimated number of tokens.\n2. Sort the table by the estimated number of tokens in descending order.\n3. Relocate the `filepath` and `tokens_estimate` columns to the front of the table.\n\nThe longest text is certainly over our embedding model's token limit, and the\nsecond longest might be as well. In practice, we'd want to chunk our text into\nsmaller pieces. This is its own challenge, but for the purposes of this\ndemonstration we'll just ignore text that is too long.\n\nLet's define our embedding functions:\n\n::: {#9e935b47 .cell execution_count=8}\n``` {.python .cell-code}\ndef _embed(text: str) -> list[float]:  # <1>\n    \"\"\"Text to fixed-length array embedding.\"\"\"  # <1>\n\n    model = \"text-embedding-3-small\"  # <2>\n    text = text.replace(\"\\n\", \" \")  # <3>\n    client = OpenAI()  # <4>\n\n    try:  # <5>\n        return (  # <6>\n            client.embeddings.create(input=[text], model=model).data[0].embedding\n        )  # <6>\n    except Exception as e:  # <7>\n        print(e)  # <7>\n    return None  # <7>\n\n\n@ibis.udf.scalar.python  # <8>\ndef embed(text: str, tokens_estimate: int) -> list[float]:  # <8>\n    \"\"\"Text to fixed-length array embedding.\"\"\"  # <8>\n\n    if 0 < tokens_estimate < 8191:  # <9>\n        return _embed(text)  # <10>\n    return None  # <11>\n```\n:::\n\n\n1. Define a regular Python function to embed text.\n2. Define the embedding model to use.\n3. Replace newlines with spaces.\n4. Create an OpenAI client.\n5. Since it's an external API call, we need to handle exceptions.\n6. Call the OpenAI API to embed the text.\n7. Handle exceptions and return `None` if an error occurs.\n8. Define an Ibis UDF using the Python function.\n9. If the estimated number of tokens is within the limit...\n10. ...call the Python function to embed the text.\n11. Otherwise, return `None`.\n\nLet's embed the text:\n\n::: {#eaa47383 .cell execution_count=9}\n``` {.python .cell-code}\nt = t.mutate(  # <1>\n    embedding=embed(t[\"contents\"], t[\"tokens_estimate\"])  # <1>\n).cache()  # <1>\nt\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nError code: 400 - {'error': {'message': \"This model's maximum context length is 8192 tokens, however you requested 8413 tokens (8413 in your prompt; 0 for the completion). Please reduce your prompt; or completion length.\", 'type': 'invalid_request_error', 'param': None, 'code': None}}\n```\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<script type=\"application/vnd.jupyter.widget-view+json\">\n{\"model_id\":\"b6f82069965c447980822b582e732f47\",\"version_major\":2,\"version_minor\":0,\"quarto_mimetype\":\"application/vnd.jupyter.widget-view+json\"}\n</script>\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=9}\n```{=html}\n<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃<span style=\"font-weight: bold\"> filepath                                      </span>┃<span style=\"font-weight: bold\"> tokens_estimate </span>┃<span style=\"font-weight: bold\"> contents                                                                             </span>┃<span style=\"font-weight: bold\"> embedding                                                   </span>┃\n┡━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                        │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">int64</span>           │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                                                               │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">array&lt;float64&gt;</span>                                              │\n├───────────────────────────────────────────────┼─────────────────┼──────────────────────────────────────────────────────────────────────────────────────┼─────────────────────────────────────────────────────────────┤\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/ibis-analytics/index.qmd          </span> │           <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">14401</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Modern, hybrid, open analytics</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Cody\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: \"2024-01-25\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">ima…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">NULL</span>                                                        │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/backends/impala.qmd                     </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">7677</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Impala</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">[https://impala.apache.org](https://impala.apache.org)</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">![](https://i…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">NULL</span>                                                        │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/tutorials/ibis-for-sql-users.qmd        </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">6777</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Tutorial: Ibis for SQL users</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">## Prerequisites</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">{{&lt; include ../_tabsets/insta…</span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.032762881368398666</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.03934009373188019</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>     │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/lms-for-data/index.qmd            </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">5508</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Using language models for data\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Cody Peterson\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: \"2024… </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.019190069288015366</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.041595082730054855</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>    │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/pydata-performance/index.qmd      </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">4801</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Ibis versus X: Performance across the ecosystem part 1\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Ph…  </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.00992082990705967</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.00490616587921977</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>       │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/tutorials/ibis-for-pandas-users.qmd     </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">4455</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Tutorial: Ibis for pandas users</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">## Prerequisites</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">{{&lt; include ../_tabsets/in…</span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.007494321092963219</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.028004156425595284</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>    │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/campaign-finance/index.qmd        </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">4241</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Exploring campaign finance data\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Nick Crews\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: \"2023-0… </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.01551054883748293</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.01505258958786726</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>      │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/duckdb-for-rag/index.qmd          </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">3951</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Using DuckDB + Ibis for RAG\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Cody Peterson\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: \"2024-02… </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.018623681738972664</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05166473984718323</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>     │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/backend-agnostic-arrays/index.qmd </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">3471</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Backend agnostic arrays</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Phillip Cloud\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2024-01-19</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">cat…</span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.0014422409003600478</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.0041314102709293365</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span> │\n│ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/ibis_substrait_to_duckdb/index.qmd</span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">3323</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Ibis + Substrait + DuckDB\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: Gil Forsyth</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2023-02-01</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">cat…</span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.02641780860722065</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.06054646894335747</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>      │\n│ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                             │               <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                                                    │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                           │\n└───────────────────────────────────────────────┴─────────────────┴──────────────────────────────────────────────────────────────────────────────────────┴─────────────────────────────────────────────────────────────┘\n</pre>\n```\n:::\n:::\n\n\n1. Augment the table with the embedded text and cache the result.\n\nNotice there was one error -- that second row's content was indeed too long! Our\ntoken estimate is a bit off, but overall useful. We accounted for this\npossibility in our Python UDF above, returning `None` (mapped to `NULL` in\nDuckDB) when the text is too long or an error occurs.\n\n### Searching with cosine similarity\n\nCosine similarity over vectors is a common way to measure similarity for RAG\napplications. We'll explore its downsides later. We need to make Ibis aware of\nDuckDB's built-in `list_cosine_similarity` function:\n\n::: {#866b828a .cell execution_count=10}\n``` {.python .cell-code}\n@ibis.udf.scalar.builtin  # <1>\ndef list_cosine_similarity(x, y) -> float:  # <1>\n    \"\"\"Compute cosine similarity between two vectors.\"\"\"  # <1>\n```\n:::\n\n\n1. Use an Ibis builtin UDF to define a cosine similarity function.\n\n::: {.callout-tip}\nIf using a different backend, you'll need to use its corresponding cosine\nsimilarity function or define your own.\n:::\n\nNow we can search for similar text in the documentation:\n\n::: {#87066e2b .cell execution_count=11}\n``` {.python .cell-code}\ndef search_docs(text):  # <1>\n    \"\"\"Search documentation for similar text, returning a sorted table\"\"\"  # <1>\n\n    embedding = _embed(text)  # <2>\n\n    s = (\n        t.mutate(similarity=list_cosine_similarity(t[\"embedding\"], embedding))  # <3>\n        .relocate(\"similarity\")  # <4>\n        .order_by(ibis._[\"similarity\"].desc())  # <5>\n        .cache()  # <6>\n    )\n\n    return s\n```\n:::\n\n\n1. Define a function to search the documentation.\n2. Embed the input text.\n3. Augment the table with the cosine similarity between the embedded text and the input text.\n4. Relocate the `similarity` column to the front of the table.\n5. Sort the table by the cosine similarity in descending order.\n6. Cache the result.\n\n::: {#e6cdf0cc .cell execution_count=12}\n``` {.python .cell-code}\ntext = \"where can I chat with the community about Ibis?\"\nsearch_docs(text)\n```\n\n::: {.cell-output .cell-output-display execution_count=12}\n```{=html}\n<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">┏━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃<span style=\"font-weight: bold\"> similarity </span>┃<span style=\"font-weight: bold\"> filepath                                                     </span>┃<span style=\"font-weight: bold\"> tokens_estimate </span>┃<span style=\"font-weight: bold\"> contents                                                                               </span>┃<span style=\"font-weight: bold\"> embedding                                                 </span>┃\n┡━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">float64</span>    │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                                       │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">int64</span>           │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                                                                 │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">array&lt;float64&gt;</span>                                            │\n├────────────┼──────────────────────────────────────────────────────────────┼─────────────────┼────────────────────────────────────────────────────────────────────────────────────────┼───────────────────────────────────────────────────────────┤\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.661852</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/zulip/index.qmd                                  </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">440</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Announcing Zulip for Ibis community chat\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Ibis team\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date:…   </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.00033197790617123246</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05603647977113724</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.578235</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/concepts/who.qmd                                       </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">800</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Who supports Ibis?</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis is an open-source project that welcomes contribution…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.006300679408013821</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05288177356123924</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.569246</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/why.qmd                                                </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">731</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Why Ibis?\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis is the portable Python dataframe library.</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">If …</span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.00048549860366620123</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05761361122131348</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span> │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.560286</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/concepts/user-testimonials.qmd                         </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1079</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># User testimonials</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">This page collects user testimonials about Ibis from the c…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.013335400260984898</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.034098923206329346</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.551246</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/getting-started.qmd                                    </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">157</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Getting started\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">sidebar: getting-started</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Welcome to the Ibis … </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.035996999591588974</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.03943954035639763</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.527626</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/contribute/02_workflow.qmd                             </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">574</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Contribute to the Ibis codebase</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">## Getting started</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">First, set up a [develop…  </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.01897418312728405</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05570495128631592</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>    │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.522431</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/ibis-version-4.0.0-release/index.qmd             </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">743</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Ibis v4.0.0</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: Patrick Clarke</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2023-01-09</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">categories:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">    … </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.017321649938821793</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05772090330719948</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.519414</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/Ibis-version-3.0.0-release/index.qmd             </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">2038</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Ibis v3.0.0</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: Marlene Mhangami</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2022-04-25</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">categories:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">  … </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.02136301063001156</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.03890605643391609</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>    │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.517491</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/tutorials/open-source-software/apache-flink/0_setup.qmd</span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">425</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Getting started</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">In this tutorial, you will learn how to set up and use Flink…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.049202971160411835</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.037027861922979355</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.510845</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/_code/setup_penguins.qmd                               </span> │              <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">85</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">```{python}</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">import ibis  # &lt;1&gt;</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">import ibis.selectors as s  # &lt;1&gt;</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">ibis.options.…  </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.009995625354349613</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.014497287571430206</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│          <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                            │               <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                                                      │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                         │\n└────────────┴──────────────────────────────────────────────────────────────┴─────────────────┴────────────────────────────────────────────────────────────────────────────────────────┴───────────────────────────────────────────────────────────┘\n</pre>\n```\n:::\n:::\n\n\nNow that we have retrieved the most similar documentation, we can augment our\nlanguage model's input with that context prior to generating a response! In\npractice, we'd probably want to set a similarity threshold and take the top `N`\nresults. Chunking our text into smaller pieces and selecting from those results\nwould also be a good idea.\n\nLet's try a few more queries:\n\n::: {#530385fa .cell execution_count=13}\n``` {.python .cell-code}\ntext = \"what do users say about Ibis?\"\nsearch_docs(text)\n```\n\n::: {.cell-output .cell-output-display execution_count=13}\n```{=html}\n<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">┏━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃<span style=\"font-weight: bold\"> similarity </span>┃<span style=\"font-weight: bold\"> filepath                                        </span>┃<span style=\"font-weight: bold\"> tokens_estimate </span>┃<span style=\"font-weight: bold\"> contents                                                                               </span>┃<span style=\"font-weight: bold\"> embedding                                                 </span>┃\n┡━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">float64</span>    │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                          │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">int64</span>           │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                                                                 │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">array&lt;float64&gt;</span>                                            │\n├────────────┼─────────────────────────────────────────────────┼─────────────────┼────────────────────────────────────────────────────────────────────────────────────────┼───────────────────────────────────────────────────────────┤\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.574682</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/concepts/user-testimonials.qmd            </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1079</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># User testimonials</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">This page collects user testimonials about Ibis from the c…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.013335400260984898</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.034098923206329346</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.562258</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/why.qmd                                   </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">731</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Why Ibis?\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis is the portable Python dataframe library.</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">If …</span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.00048549860366620123</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05761361122131348</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span> │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.544948</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/concepts/who.qmd                          </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">800</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Who supports Ibis?</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis is an open-source project that welcomes contribution…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.006300679408013821</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05288177356123924</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.528427</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/zulip/index.qmd                     </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">440</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Announcing Zulip for Ibis community chat\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Ibis team\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date:…   </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.00033197790617123246</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05603647977113724</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.523075</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/getting-started.qmd                       </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">157</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Getting started\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">sidebar: getting-started</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Welcome to the Ibis … </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.035996999591588974</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.03943954035639763</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.516679</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/ibis-version-4.0.0-release/index.qmd</span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">743</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Ibis v4.0.0</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: Patrick Clarke</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2023-01-09</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">categories:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">    … </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.017321649938821793</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05772090330719948</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.500733</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/_tabsets/install_default.qmd              </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">127</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">We recommend starting with the default (DuckDB) backend for a performant, fully…      </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.004252271726727486</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.025945203378796577</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.497463</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/how-to/configure/basics.qmd               </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">611</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Basic configuration</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">If you don't have your own data, you can load example da…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.02095085009932518</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.04434989020228386</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>    │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.491889</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/ibis-to-file/index.qmd              </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">700</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Ibis sneak peek: writing to files\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: Kae Suarez</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2023-03…   </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.02339361608028412</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.07014117389917374</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>     │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.484358</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/_code/setup_penguins.qmd                  </span> │              <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">85</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">```{python}</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">import ibis  # &lt;1&gt;</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">import ibis.selectors as s  # &lt;1&gt;</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">ibis.options.…  </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.009995625354349613</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.014497287571430206</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│          <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                               │               <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                                                      │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                         │\n└────────────┴─────────────────────────────────────────────────┴─────────────────┴────────────────────────────────────────────────────────────────────────────────────────┴───────────────────────────────────────────────────────────┘\n</pre>\n```\n:::\n:::\n\n\n::: {#340a7110 .cell execution_count=14}\n``` {.python .cell-code}\ntext = \"can Ibis complete the one billion row challenge?\"\nsearch_docs(text)\n```\n\n::: {.cell-output .cell-output-display execution_count=14}\n```{=html}\n<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">┏━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃<span style=\"font-weight: bold\"> similarity </span>┃<span style=\"font-weight: bold\"> filepath                                        </span>┃<span style=\"font-weight: bold\"> tokens_estimate </span>┃<span style=\"font-weight: bold\"> contents                                                                               </span>┃<span style=\"font-weight: bold\"> embedding                                                 </span>┃\n┡━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">float64</span>    │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                          │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">int64</span>           │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                                                                 │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">array&lt;float64&gt;</span>                                            │\n├────────────┼─────────────────────────────────────────────────┼─────────────────┼────────────────────────────────────────────────────────────────────────────────────────┼───────────────────────────────────────────────────────────┤\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.608117</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/1brc/index.qmd                      </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">2129</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Using one Python dataframe API to take the billion row challenge wi…     </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.013509240001440048</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.0003828565531875938</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span> │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.504276</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/concepts/who.qmd                          </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">800</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Who supports Ibis?</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis is an open-source project that welcomes contribution…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.006300679408013821</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05288177356123924</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.482052</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/presentations/overview.qmd                </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1697</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Ibis overview\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">format:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">  revealjs:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">    footer: &lt;https://ibis-projec…  </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.0015606271335855126</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.019388146698474884</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span> │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.473564</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/why.qmd                                   </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">731</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Why Ibis?\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis is the portable Python dataframe library.</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">If …</span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.00048549860366620123</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05761361122131348</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span> │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.468842</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/Ibis-version-3.0.0-release/index.qmd</span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">2038</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Ibis v3.0.0</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: Marlene Mhangami</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2022-04-25</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">categories:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">  … </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.02136301063001156</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.03890605643391609</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>    │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.465956</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/tutorials/data-platforms/clickhouse.qmd   </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">826</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: ClickHouse</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">freeze: auto</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">[Ibis](https://ibis-project.com) suppor… </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.027811484411358833</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.02419976517558098</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.465920</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/concepts/user-testimonials.qmd            </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1079</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># User testimonials</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">This page collects user testimonials about Ibis from the c…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.013335400260984898</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.034098923206329346</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.456237</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/_code/setup_penguins.qmd                  </span> │              <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">85</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">```{python}</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">import ibis  # &lt;1&gt;</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">import ibis.selectors as s  # &lt;1&gt;</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">ibis.options.…  </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.009995625354349613</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.014497287571430206</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.455206</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/how-to/visualization/seaborn.qmd          </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">159</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># seaborn + Ibis</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">If you don't have data to visualize, you can load an example …    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.012414666824042797</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.012007818557322025</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.453313</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/how-to/input-output/duckdb-parquet.qmd    </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">651</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Read parquet files with Ibis</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">In this example, we will use Ibis'…  </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.01082119531929493</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.04467007517814636</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>     │\n│          <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                               │               <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                                                      │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                         │\n└────────────┴─────────────────────────────────────────────────┴─────────────────┴────────────────────────────────────────────────────────────────────────────────────────┴───────────────────────────────────────────────────────────┘\n</pre>\n```\n:::\n:::\n\n\n::: {#e11c996a .cell execution_count=15}\n``` {.python .cell-code}\ntext = \"teach me about the Polars backend\"\nsearch_docs(text)\n```\n\n::: {.cell-output .cell-output-display execution_count=15}\n```{=html}\n<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">┏━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃<span style=\"font-weight: bold\"> similarity </span>┃<span style=\"font-weight: bold\"> filepath                                        </span>┃<span style=\"font-weight: bold\"> tokens_estimate </span>┃<span style=\"font-weight: bold\"> contents                                                                               </span>┃<span style=\"font-weight: bold\"> embedding                                                 </span>┃\n┡━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">float64</span>    │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                          │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">int64</span>           │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                                                                 │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">array&lt;float64&gt;</span>                                            │\n├────────────┼─────────────────────────────────────────────────┼─────────────────┼────────────────────────────────────────────────────────────────────────────────────────┼───────────────────────────────────────────────────────────┤\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.597506</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/backends/polars.qmd                       </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">402</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Polars</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">[https://www.pola.rs](https://www.pola.rs)</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">{{&lt; include /_callouts/ex…  </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.04319469630718231</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.030947020277380943</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.396795</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/pydata-performance-part2/index.qmd  </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1567</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Ibis versus X: Performance across the ecosystem part 2\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Ph…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.0013977460330352187</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.028734903782606125</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span> │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.364785</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/ibis-version-4.0.0-release/index.qmd</span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">743</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Ibis v4.0.0</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: Patrick Clarke</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2023-01-09</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">categories:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">    … </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.017321649938821793</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05772090330719948</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.356085</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/_callouts/experimental_backend.qmd        </span> │              <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">26</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">::: {.callout-warning}</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">This backend is experimental and is subject to backwards…     </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.017363416031003</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.03505472466349602</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>       │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.326378</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/how-to/input-output/multiple-backends.qmd </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">331</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Work with multiple backends</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">You can work with multiple backends by creating …    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.014367456547915936</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.01823212020099163</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.324941</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/presentations/overview.qmd                </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1697</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Ibis overview\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">format:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">  revealjs:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">    footer: &lt;https://ibis-projec…  </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.0015606271335855126</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.019388146698474884</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span> │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.315046</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/backends/_templates/api.qmd               </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">121</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">```{python}</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">#| echo: false</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">#| output: asis</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">from _utils import get_backend, ren…  </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.013808815740048885</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.03160477802157402</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.311201</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/backends/postgresql.qmd                   </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">493</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># PostgreSQL</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">[https://www.postgresql.org](https://www.postgresql.org)</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">![](htt…  </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.046312808990478516</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.031841542571783066</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.300936</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/ibis-version-8.0.0-release/index.qmd</span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">2062</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Ibis 8.0: streaming and more!\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Ibis team\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: \"2024-02-1…   </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.005049674306064844</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.03530928120017052</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>    │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.298417</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/why.qmd                                   </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">731</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Why Ibis?\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis is the portable Python dataframe library.</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">If …</span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.00048549860366620123</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05761361122131348</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span> │\n│          <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                               │               <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                                                      │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                         │\n└────────────┴─────────────────────────────────────────────────┴─────────────────┴────────────────────────────────────────────────────────────────────────────────────────┴───────────────────────────────────────────────────────────┘\n</pre>\n```\n:::\n:::\n\n\n::: {#d64f362a .cell execution_count=16}\n``` {.python .cell-code}\ntext = \"why does Voltron Data support Ibis?\"\nsearch_docs(text)\n```\n\n::: {.cell-output .cell-output-display execution_count=16}\n```{=html}\n<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">┏━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃<span style=\"font-weight: bold\"> similarity </span>┃<span style=\"font-weight: bold\"> filepath                                        </span>┃<span style=\"font-weight: bold\"> tokens_estimate </span>┃<span style=\"font-weight: bold\"> contents                                                                               </span>┃<span style=\"font-weight: bold\"> embedding                                                 </span>┃\n┡━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">float64</span>    │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                          │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">int64</span>           │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                                                                 │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">array&lt;float64&gt;</span>                                            │\n├────────────┼─────────────────────────────────────────────────┼─────────────────┼────────────────────────────────────────────────────────────────────────────────────────┼───────────────────────────────────────────────────────────┤\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.679104</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/concepts/who.qmd                          </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">800</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Who supports Ibis?</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis is an open-source project that welcomes contribution…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.006300679408013821</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05288177356123924</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.616018</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/why-voda-supports-                  </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">3056</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Why Voltron Data supports Ibis\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Cody Peterson + Ian Cook\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">…   </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.0027232086285948753</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.0460839718580246</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.582328</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/why.qmd                                   </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">731</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Why Ibis?\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis is the portable Python dataframe library.</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">If …</span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.00048549860366620123</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05761361122131348</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span> │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.536979</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/_code/input_output_penguins.qmd           </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">947</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">## Data platforms</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">You can connect Ibis to any supported backend to read and wr…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.009215430356562138</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.020675163716077805</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.528810</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/concepts/user-testimonials.qmd            </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1079</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># User testimonials</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">This page collects user testimonials about Ibis from the c…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.013335400260984898</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.034098923206329346</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.523802</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/presentations/overview.qmd                </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1697</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Ibis overview\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">format:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">  revealjs:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">    footer: &lt;https://ibis-projec…  </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.0015606271335855126</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.019388146698474884</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span> │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.516846</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/ibis-version-4.0.0-release/index.qmd</span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">743</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Ibis v4.0.0</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: Patrick Clarke</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2023-01-09</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">categories:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">    … </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.017321649938821793</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05772090330719948</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.515140</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/concepts/composable-ecosystem.qmd         </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1490</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Composable data ecosystem</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis exists in a broader composable data ecosystem…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.0018551592947915196</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.0542871318757534</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.513805</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/backends/trino.qmd                        </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">743</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Trino</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">[https://trino.io](https://trino.io)</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">{{&lt; include /_callouts/experimen…  </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.04838176444172859</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.04063660651445389</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>    │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.500496</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/how-to/input-output/basics.qmd            </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">105</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Basic input/output</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">If you don't have your own data, you can load example dat…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.00725388852879405</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.047017041593790054</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│          <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                               │               <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                                                      │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                         │\n└────────────┴─────────────────────────────────────────────────┴─────────────────┴────────────────────────────────────────────────────────────────────────────────────────┴───────────────────────────────────────────────────────────┘\n</pre>\n```\n:::\n:::\n\n\n::: {#9a238648 .cell execution_count=17}\n``` {.python .cell-code}\ntext = \"why should I use Ibis?\"\nsearch_docs(text)\n```\n\n::: {.cell-output .cell-output-display execution_count=17}\n```{=html}\n<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">┏━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃<span style=\"font-weight: bold\"> similarity </span>┃<span style=\"font-weight: bold\"> filepath                                        </span>┃<span style=\"font-weight: bold\"> tokens_estimate </span>┃<span style=\"font-weight: bold\"> contents                                                                               </span>┃<span style=\"font-weight: bold\"> embedding                                                 </span>┃\n┡━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">float64</span>    │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                          │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">int64</span>           │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                                                                 │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">array&lt;float64&gt;</span>                                            │\n├────────────┼─────────────────────────────────────────────────┼─────────────────┼────────────────────────────────────────────────────────────────────────────────────────┼───────────────────────────────────────────────────────────┤\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.621761</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/why.qmd                                   </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">731</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Why Ibis?\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis is the portable Python dataframe library.</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">If …</span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.00048549860366620123</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05761361122131348</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span> │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.589931</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/concepts/who.qmd                          </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">800</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Who supports Ibis?</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis is an open-source project that welcomes contribution…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.006300679408013821</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05288177356123924</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.580506</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/_tabsets/install_default.qmd              </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">127</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">We recommend starting with the default (DuckDB) backend for a performant, fully…      </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.004252271726727486</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.025945203378796577</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.564820</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/concepts/user-testimonials.qmd            </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1079</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># User testimonials</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">This page collects user testimonials about Ibis from the c…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.013335400260984898</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.034098923206329346</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.563156</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/getting-started.qmd                       </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">157</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Getting started\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">sidebar: getting-started</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Welcome to the Ibis … </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.035996999591588974</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.03943954035639763</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.549894</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/_code/setup_penguins.qmd                  </span> │              <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">85</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">```{python}</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">import ibis  # &lt;1&gt;</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">import ibis.selectors as s  # &lt;1&gt;</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">ibis.options.…  </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.009995625354349613</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.014497287571430206</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.545518</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/how-to/configure/basics.qmd               </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">611</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Basic configuration</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">If you don't have your own data, you can load example da…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.02095085009932518</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.04434989020228386</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>    │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.542379</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/ibis-version-4.0.0-release/index.qmd</span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">743</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Ibis v4.0.0</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: Patrick Clarke</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2023-01-09</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">categories:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">    … </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.017321649938821793</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05772090330719948</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.539636</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/ibis-to-file/index.qmd              </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">700</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Ibis sneak peek: writing to files\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: Kae Suarez</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2023-03…   </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.02339361608028412</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.07014117389917374</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>     │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.534821</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/_callouts/pypi_warning.qmd                </span> │              <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">59</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">::: {.callout-warning}</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Note that the `ibis-framework` package is _not_ the same…     </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.0019332439405843616</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.01002512127161026</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│          <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                               │               <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                                                      │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                         │\n└────────────┴─────────────────────────────────────────────────┴─────────────────┴────────────────────────────────────────────────────────────────────────────────────────┴───────────────────────────────────────────────────────────┘\n</pre>\n```\n:::\n:::\n\n\n::: {#3d02dbb7 .cell execution_count=18}\n``` {.python .cell-code}\ntext = \"what is the Ibis roadmap?\"\nsearch_docs(text)\n```\n\n::: {.cell-output .cell-output-display execution_count=18}\n```{=html}\n<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">┏━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃<span style=\"font-weight: bold\"> similarity </span>┃<span style=\"font-weight: bold\"> filepath                                        </span>┃<span style=\"font-weight: bold\"> tokens_estimate </span>┃<span style=\"font-weight: bold\"> contents                                                                               </span>┃<span style=\"font-weight: bold\"> embedding                                                 </span>┃\n┡━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">float64</span>    │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                          │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">int64</span>           │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">string</span>                                                                                 │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">array&lt;float64&gt;</span>                                            │\n├────────────┼─────────────────────────────────────────────────┼─────────────────┼────────────────────────────────────────────────────────────────────────────────────────┼───────────────────────────────────────────────────────────┤\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.569501</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/roadmap-2024-H1/index.qmd           </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">2958</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Ibis project 2024 roadmap\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Cody Peterson\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: \"2024-02-1…   </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.011533920653164387</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.07820627093315125</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.563448</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/why.qmd                                   </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">731</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Why Ibis?\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis is the portable Python dataframe library.</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">If …</span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.00048549860366620123</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05761361122131348</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span> │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.555909</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/concepts/who.qmd                          </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">800</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># Who supports Ibis?</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Ibis is an open-source project that welcomes contribution…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.006300679408013821</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05288177356123924</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.544127</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/ibis-version-4.0.0-release/index.qmd</span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">743</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Ibis v4.0.0</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: Patrick Clarke</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2023-01-09</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">categories:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">    … </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.017321649938821793</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05772090330719948</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.524721</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/zulip/index.qmd                     </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">440</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Announcing Zulip for Ibis community chat\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Ibis team\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date:…   </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.00033197790617123246</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.05603647977113724</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.514110</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/concepts/user-testimonials.qmd            </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1079</span> │ <span style=\"color: #008000; text-decoration-color: #008000\"># User testimonials</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">This page collects user testimonials about Ibis from the c…    </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.013335400260984898</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.034098923206329346</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>  │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.510652</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/Ibis-version-3.0.0-release/index.qmd</span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">2038</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: Ibis v3.0.0</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: Marlene Mhangami</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2022-04-25</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">categories:</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">  … </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.02136301063001156</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.03890605643391609</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>    │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.507567</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/ibis-to-file/index.qmd              </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">700</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Ibis sneak peek: writing to files\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: Kae Suarez</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">date: 2023-03…   </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.02339361608028412</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.07014117389917374</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>     │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.505812</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/posts/why-voda-supports-                  </span> │            <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">3056</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Why Voltron Data supports Ibis\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">author: \"Cody Peterson + Ian Cook\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">…   </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.0027232086285948753</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.0460839718580246</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│   <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.501638</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">docs/getting-started.qmd                       </span> │             <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">157</span> │ <span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">title: \"Getting started\"</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">sidebar: getting-started</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">---</span><span style=\"color: #d78700; text-decoration-color: #d78700\">\\n\\n</span><span style=\"color: #008000; text-decoration-color: #008000\">Welcome to the Ibis … </span> │ <span style=\"font-weight: bold\">[</span><span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">-0.035996999591588974</span>, <span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">0.03943954035639763</span>, <span style=\"color: #808000; text-decoration-color: #808000\">...</span> +<span style=\"color: #008080; text-decoration-color: #008080; font-weight: bold\">1534</span><span style=\"font-weight: bold\">]</span>   │\n│          <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                               │               <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span> │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                                                      │ <span style=\"color: #7f7f7f; text-decoration-color: #7f7f7f\">…</span>                                                         │\n└────────────┴─────────────────────────────────────────────────┴─────────────────┴────────────────────────────────────────────────────────────────────────────────────────┴───────────────────────────────────────────────────────────┘\n</pre>\n```\n:::\n:::\n\n\n## RAG pitfalls\n\nAs in traditional software engineering and machine learning, the architecture\nwhen building systems around language models is not a universal. The best\ndepends on the application of the system. Using cosine (or otherwise) similarity\nsearch over text transformed to numbers may not always perform best.\n\nWe can demonstrate this with the following scenario: let's assume we're building\na chatbot that writes and runs SQL on the user's behalf based on their questions\nposed in English (or any language the language model understand sufficiently).\nWe might store past queries, the SQL generated, and some evaluation criteria\n(upvote/downvote on the generated SQL from the user) in a database. Then we can\nuse the same RAG approach above to augment our queries with the user's past\nqueries and the generated SQL.\n\nTake the following English query:\n\n::: {#cc91ed9c .cell execution_count=19}\n``` {.python .cell-code}\na = \"\"\"the first 10 rows of the penguins, ordered by body_mass_g from\nlightest to heaviest\"\"\"\n```\n:::\n\n\nWe can compute the cosine similarity of this query against itself, resulting in\n1.0 or close to it:\n\n::: {#9ec65ea2 .cell execution_count=20}\n``` {.python .cell-code}\nlist_cosine_similarity(_embed(a), _embed(a))\n```\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\"></pre>\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=20}\n\n::: {.ansi-escaped-output}\n```{=html}\n<pre><span class=\"ansi-cyan-fg ansi-bold\">0.9999994546885027</span></pre>\n```\n:::\n\n:::\n:::\n\n\nNow, let's flip the ordering. This would result in an entirely different SQL\nquery and result set:\n\n::: {#feb65948 .cell execution_count=21}\n``` {.python .cell-code}\nb = \"\"\"the first 10 rows of the penguins, ordered by body_mass_g from\nheaviest to lightest\"\"\"\n```\n:::\n\n\nAnd compute the cosine similarity of `a` and `b`:\n\n::: {#f6e638b2 .cell execution_count=22}\n``` {.python .cell-code}\nlist_cosine_similarity(_embed(a), _embed(b))\n```\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\"></pre>\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=22}\n\n::: {.ansi-escaped-output}\n```{=html}\n<pre><span class=\"ansi-cyan-fg ansi-bold\">0.9934337761234602</span></pre>\n```\n:::\n\n:::\n:::\n\n\nSimilarly, we can construct a semantically equivalent query that would result in\nthe same SQL as example `a`:\n\n::: {#5b7538bd .cell execution_count=23}\n``` {.python .cell-code}\nc = \"\"\"of the birds retrieve the initial ten opposite-of-columns,\nsorted from biggest to smallest by weight\"\"\"\n```\n:::\n\n\nThat has a much lower cosine similarity in the embedding space:\n\n::: {#e0b9ca7b .cell execution_count=24}\n``` {.python .cell-code}\nlist_cosine_similarity(_embed(a), _embed(c))\n```\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\"></pre>\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=24}\n\n::: {.ansi-escaped-output}\n```{=html}\n<pre><span class=\"ansi-cyan-fg ansi-bold\">0.5682471739636249</span></pre>\n```\n:::\n\n:::\n:::\n\n\nDespite semantic equivalence, these two queries would not be considered similar.\nYou need to be careful and understand what the system is doing.\n\n## Discussion\n\nIs traditional RAG the best approach? It's unclear, and **it depends**.\n\n### System architecture\n\nOften RAG-based systems introduce yet-another-database to store the embeddings.\nHopefully this post has demonstrated that traditional database options can work\njust fine. While we're only demonstrating this on a few rows here, DuckDB can\nscale up to many millions with ease.\n\n### Cost and speed\n\nThe cost of running this demo from OpenAI is less than $0.01 USD. It also runs\nin about a minute, but with many rows this would be much slower. You need to\nconsider your architecture here. One option would be using an open source\nembedding model that can run locally. Swap out the OpenAI calls with that and\nsee how it goes!\n\n### Alternatives to vector search RAG\n\nIt's clear that we should always be augmenting our language model calls with the\nmost relevant context, even if traditional vector search RAG is not the best\nsolution.  The problem then becomes the best way to retrieve that context for a\ngiven system's desired behavior.\n\n::: {.callout-note title=\"Abolish RAG as terminology?\"}\n\"I would like to abolish the term RAG and instead just agree that we should\nalways try to provide models with the appropriate context to provide high\nquality answers.\" - [Hamel\nHusain](https://twitter.com/HamelHusain/status/1709740984643596768)\n:::\n\nSome alternatives to vector search RAG include:\n\n- traditional search methods\n- using an external web search engine\n- using a language model for search\n\nThe last point is particularly interesting -- in the above examples with `a` and\n`c` strings, cosine similarity in the embedding space could not tell the queries\nare semantically equivalent. However, a sufficiently good language model\ncertainly could. As we demonstrated in [language models for\ndata](../lms-for-data/index.qmd), we could even setup a classifier and use [the\nlogit bias\ntrick](https://www.askmarvin.ai/docs/text/classification/#classifying-text) to\ncompute similarity with a single output token.\n\nThis trick makes the language model faster, but for practical applications the\ncost and speed of language models for search is still a concern. We can expect\nthis concern to be mitigated over time as language models become faster and\ncheaper to run.\n\nWith larger context lengths, we could also use an initial call to a language\nmodel to extract out relevant sections of text and then make a second call with\nthat augmented context.\n\n## Next steps\n\nTry this out yourself! All you need is an OpenAI account and the code above.\n\nIt's never been a better time to get involved with Ibis. [Join us on Zulip and\nintroduce yourself!](https://ibis-project.zulipchat.com/) More Ibis + language\nmodel content coming soon.\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n<script src=\"https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js\" crossorigin=\"anonymous\"></script>\n"
      ],
      "include-after-body": [
        "<script type=application/vnd.jupyter.widget-state+json>\n{\"state\":{\"334610f7538b489e848fd4ada571fb77\":{\"model_module\":\"@jupyter-widgets/base\",\"model_module_version\":\"2.0.0\",\"model_name\":\"LayoutModel\",\"state\":{\"_model_module\":\"@jupyter-widgets/base\",\"_model_module_version\":\"2.0.0\",\"_model_name\":\"LayoutModel\",\"_view_count\":null,\"_view_module\":\"@jupyter-widgets/base\",\"_view_module_version\":\"2.0.0\",\"_view_name\":\"LayoutView\",\"align_content\":null,\"align_items\":null,\"align_self\":null,\"border_bottom\":null,\"border_left\":null,\"border_right\":null,\"border_top\":null,\"bottom\":null,\"display\":null,\"flex\":null,\"flex_flow\":null,\"grid_area\":null,\"grid_auto_columns\":null,\"grid_auto_flow\":null,\"grid_auto_rows\":null,\"grid_column\":null,\"grid_gap\":null,\"grid_row\":null,\"grid_template_areas\":null,\"grid_template_columns\":null,\"grid_template_rows\":null,\"height\":null,\"justify_content\":null,\"justify_items\":null,\"left\":null,\"margin\":null,\"max_height\":null,\"max_width\":null,\"min_height\":null,\"min_width\":null,\"object_fit\":null,\"object_position\":null,\"order\":null,\"overflow\":null,\"padding\":null,\"right\":null,\"top\":null,\"visibility\":null,\"width\":\"auto\"}},\"b6f82069965c447980822b582e732f47\":{\"model_module\":\"@jupyter-widgets/controls\",\"model_module_version\":\"2.0.0\",\"model_name\":\"FloatProgressModel\",\"state\":{\"_dom_classes\":[],\"_model_module\":\"@jupyter-widgets/controls\",\"_model_module_version\":\"2.0.0\",\"_model_name\":\"FloatProgressModel\",\"_view_count\":null,\"_view_module\":\"@jupyter-widgets/controls\",\"_view_module_version\":\"2.0.0\",\"_view_name\":\"ProgressView\",\"bar_style\":\"\",\"description\":\"\",\"description_allow_html\":false,\"layout\":\"IPY_MODEL_334610f7538b489e848fd4ada571fb77\",\"max\":100,\"min\":0,\"orientation\":\"horizontal\",\"style\":\"IPY_MODEL_bc77ba6d8398430aad23c7dd8678070e\",\"tabbable\":null,\"tooltip\":null,\"value\":100}},\"bc77ba6d8398430aad23c7dd8678070e\":{\"model_module\":\"@jupyter-widgets/controls\",\"model_module_version\":\"2.0.0\",\"model_name\":\"ProgressStyleModel\",\"state\":{\"_model_module\":\"@jupyter-widgets/controls\",\"_model_module_version\":\"2.0.0\",\"_model_name\":\"ProgressStyleModel\",\"_view_count\":null,\"_view_module\":\"@jupyter-widgets/base\",\"_view_module_version\":\"2.0.0\",\"_view_name\":\"StyleView\",\"bar_color\":\"black\",\"description_width\":\"\"}}},\"version_major\":2,\"version_minor\":0}\n</script>\n"
      ]
    }
  }
}