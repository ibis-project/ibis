{"version":3,"file":"4324.992bd2c.js","mappings":"iIAUA,IAGIA,EAAiB,4BAOjBC,EAAmB,iBAGnBC,EAAU,qBAEVC,EAAW,yBAIXC,EAAU,oBACVC,EAAS,6BAGTC,EAAU,gBACVC,EAAY,kBACZC,EAAW,iBAIXC,EAAe,qBAsBfC,EAAe,8BAGfC,EAAW,mBAGXC,EAAiB,CAAC,EACtBA,EAxBiB,yBAwBYA,EAvBZ,yBAwBjBA,EAvBc,sBAuBYA,EAtBX,uBAuBfA,EAtBe,uBAsBYA,EArBZ,uBAsBfA,EArBsB,8BAqBYA,EApBlB,wBAqBhBA,EApBgB,yBAoBY,EAC5BA,EAAeV,GAAWU,EAjDX,kBAkDfA,EAhCqB,wBAgCYA,EAhDnB,oBAiDdA,EAhCkB,qBAgCYA,EAhDhB,iBAiDdA,EAhDe,kBAgDYA,EAAeR,GAC1CQ,EA9Ca,gBA8CYA,EA7CT,mBA8ChBA,EAAeL,GAAaK,EA1CZ,mBA2ChBA,EA1Ca,gBA0CYA,EAzCT,mBA0ChBA,EAxCiB,qBAwCY,EAG7B,IAoIMC,EAtBWC,EAAMC,EA9GnBC,EAA8B,iBAAV,EAAAC,GAAsB,EAAAA,GAAU,EAAAA,EAAOC,SAAWA,QAAU,EAAAD,EAGhFE,EAA0B,iBAARC,MAAoBA,MAAQA,KAAKF,SAAWA,QAAUE,KAGxEC,EAAOL,GAAcG,GAAYG,SAAS,cAATA,GAGjCC,EAA4CC,IAAYA,EAAQC,UAAYD,EAG5EE,EAAaH,GAA4CI,IAAWA,EAAOF,UAAYE,EAGvFC,EAAgBF,GAAcA,EAAWF,UAAYD,EAGrDM,EAAcD,GAAiBZ,EAAWc,QAG1CC,EAAY,WACd,IAIE,OAFYL,GAAcA,EAAWM,SAAWN,EAAWM,QAAQ,QAAQC,OAOpEJ,GAAeA,EAAYK,SAAWL,EAAYK,QAAQ,OACnE,CAAE,MAAOC,GAAI,CACf,CAZe,GAeXC,EAAmBL,GAAYA,EAASM,aAiFxCC,EAAaC,MAAMC,UACnBC,EAAYnB,SAASkB,UACrBE,EAAcxB,OAAOsB,UAGrBG,EAAatB,EAAK,sBAGlBuB,EAAeH,EAAUI,SAGzBC,EAAiBJ,EAAYI,eAG7BC,GACElC,EAAM,SAASmC,KAAKL,GAAcA,EAAWM,MAAQN,EAAWM,KAAKC,UAAY,KACvE,iBAAmBrC,EAAO,GAQtCsC,EAAuBT,EAAYG,SAGnCO,EAAmBR,EAAaS,KAAKnC,QAGrCoC,EAAaC,OAAO,IACtBX,EAAaS,KAAKP,GAAgBU,QA7KjB,sBA6KuC,QACvDA,QAAQ,yDAA0D,SAAW,KAI5EC,EAAS7B,EAAgBP,EAAKoC,YAASC,EACvCC,EAAStC,EAAKsC,OACdC,EAAavC,EAAKuC,WAElBC,GADcJ,GAASA,EAAOK,YA9CjBhD,EA+CUI,OAAO6C,eA/CXhD,EA+C2BG,OA9CzC,SAAS8C,GACd,OAAOlD,EAAKC,EAAUiD,GACxB,GA6CEC,EAAe/C,OAAOgD,OACtBC,EAAuBzB,EAAYyB,qBACnCC,EAAS9B,EAAW8B,OACpBC,EAAiBV,EAASA,EAAOW,iBAAcZ,EAE/Ca,EAAkB,WACpB,IACE,IAAIzD,EAAO0D,GAAUtD,OAAQ,kBAE7B,OADAJ,EAAK,CAAC,EAAG,GAAI,CAAC,GACPA,CACT,CAAE,MAAOqB,GAAI,CACf,CANqB,GASjBsC,EAAiBhB,EAASA,EAAOiB,cAAWhB,EAC5CiB,EAAYC,KAAKC,IACjBC,EAAYC,KAAKC,IAGjBC,EAAMT,GAAUnD,EAAM,OACtB6D,EAAeV,GAAUtD,OAAQ,UAUjCiE,EAAc,WAChB,SAASC,IAAU,CACnB,OAAO,SAASC,GACd,IAAKC,GAASD,GACZ,MAAO,CAAC,EAEV,GAAIpB,EACF,OAAOA,EAAaoB,GAEtBD,EAAO5C,UAAY6C,EACnB,IAAIE,EAAS,IAAIH,EAEjB,OADAA,EAAO5C,eAAYkB,EACZ6B,CACT,CACF,CAdiB,GAuBjB,SAASC,EAAKC,GACZ,IAAIC,GAAS,EACTC,EAAoB,MAAXF,EAAkB,EAAIA,EAAQE,OAG3C,IADAC,KAAKC,UACIH,EAAQC,GAAQ,CACvB,IAAIG,EAAQL,EAAQC,GACpBE,KAAKG,IAAID,EAAM,GAAIA,EAAM,GAC3B,CACF,CA6FA,SAASE,GAAUP,GACjB,IAAIC,GAAS,EACTC,EAAoB,MAAXF,EAAkB,EAAIA,EAAQE,OAG3C,IADAC,KAAKC,UACIH,EAAQC,GAAQ,CACvB,IAAIG,EAAQL,EAAQC,GACpBE,KAAKG,IAAID,EAAM,GAAIA,EAAM,GAC3B,CACF,CA0GA,SAASG,GAASR,GAChB,IAAIC,GAAS,EACTC,EAAoB,MAAXF,EAAkB,EAAIA,EAAQE,OAG3C,IADAC,KAAKC,UACIH,EAAQC,GAAQ,CACvB,IAAIG,EAAQL,EAAQC,GACpBE,KAAKG,IAAID,EAAM,GAAIA,EAAM,GAC3B,CACF,CA4FA,SAASI,GAAMT,GACb,IAAIU,EAAOP,KAAKQ,SAAW,IAAIJ,GAAUP,GACzCG,KAAKS,KAAOF,EAAKE,IACnB,CAsIA,SAASC,GAAiBlB,EAAQmB,EAAKC,SACtB9C,IAAV8C,IAAwBC,GAAGrB,EAAOmB,GAAMC,SAC9B9C,IAAV8C,KAAyBD,KAAOnB,KACnCsB,GAAgBtB,EAAQmB,EAAKC,EAEjC,CAYA,SAASG,GAAYvB,EAAQmB,EAAKC,GAChC,IAAII,EAAWxB,EAAOmB,GAChBzD,EAAeO,KAAK+B,EAAQmB,IAAQE,GAAGG,EAAUJ,UACxC9C,IAAV8C,GAAyBD,KAAOnB,IACnCsB,GAAgBtB,EAAQmB,EAAKC,EAEjC,CAUA,SAASK,GAAaC,EAAOP,GAE3B,IADA,IAAIZ,EAASmB,EAAMnB,OACZA,KACL,GAAIc,GAAGK,EAAMnB,GAAQ,GAAIY,GACvB,OAAOZ,EAGX,OAAQ,CACV,CAWA,SAASe,GAAgBtB,EAAQmB,EAAKC,GACzB,aAAPD,GAAsBhC,EACxBA,EAAea,EAAQmB,EAAK,CAC1B,cAAgB,EAChB,YAAc,EACd,MAASC,EACT,UAAY,IAGdpB,EAAOmB,GAAOC,CAElB,CA7aAhB,EAAKhD,UAAUqD,MAvEf,WACED,KAAKQ,SAAWlB,EAAeA,EAAa,MAAQ,CAAC,EACrDU,KAAKS,KAAO,CACd,EAqEAb,EAAKhD,UAAkB,OAzDvB,SAAoB+D,GAClB,IAAIhB,EAASK,KAAKmB,IAAIR,WAAeX,KAAKQ,SAASG,GAEnD,OADAX,KAAKS,MAAQd,EAAS,EAAI,EACnBA,CACT,EAsDAC,EAAKhD,UAAUwE,IA3Cf,SAAiBT,GACf,IAAIJ,EAAOP,KAAKQ,SAChB,GAAIlB,EAAc,CAChB,IAAIK,EAASY,EAAKI,GAClB,OAAOhB,IAAWvF,OAAiB0D,EAAY6B,CACjD,CACA,OAAOzC,EAAeO,KAAK8C,EAAMI,GAAOJ,EAAKI,QAAO7C,CACtD,EAqCA8B,EAAKhD,UAAUuE,IA1Bf,SAAiBR,GACf,IAAIJ,EAAOP,KAAKQ,SAChB,OAAOlB,OAA8BxB,IAAdyC,EAAKI,GAAsBzD,EAAeO,KAAK8C,EAAMI,EAC9E,EAwBAf,EAAKhD,UAAUuD,IAZf,SAAiBQ,EAAKC,GACpB,IAAIL,EAAOP,KAAKQ,SAGhB,OAFAR,KAAKS,MAAQT,KAAKmB,IAAIR,GAAO,EAAI,EACjCJ,EAAKI,GAAQrB,QAA0BxB,IAAV8C,EAAuBxG,EAAiBwG,EAC9DZ,IACT,EAsHAI,GAAUxD,UAAUqD,MApFpB,WACED,KAAKQ,SAAW,GAChBR,KAAKS,KAAO,CACd,EAkFAL,GAAUxD,UAAkB,OAvE5B,SAAyB+D,GACvB,IAAIJ,EAAOP,KAAKQ,SACZV,EAAQmB,GAAaV,EAAMI,GAE/B,QAAIb,EAAQ,IAIRA,GADYS,EAAKR,OAAS,EAE5BQ,EAAKc,MAEL7C,EAAOf,KAAK8C,EAAMT,EAAO,KAEzBE,KAAKS,KACA,GACT,EAyDAL,GAAUxD,UAAUwE,IA9CpB,SAAsBT,GACpB,IAAIJ,EAAOP,KAAKQ,SACZV,EAAQmB,GAAaV,EAAMI,GAE/B,OAAOb,EAAQ,OAAIhC,EAAYyC,EAAKT,GAAO,EAC7C,EA0CAM,GAAUxD,UAAUuE,IA/BpB,SAAsBR,GACpB,OAAOM,GAAajB,KAAKQ,SAAUG,IAAQ,CAC7C,EA8BAP,GAAUxD,UAAUuD,IAlBpB,SAAsBQ,EAAKC,GACzB,IAAIL,EAAOP,KAAKQ,SACZV,EAAQmB,GAAaV,EAAMI,GAQ/B,OANIb,EAAQ,KACRE,KAAKS,KACPF,EAAKe,KAAK,CAACX,EAAKC,KAEhBL,EAAKT,GAAO,GAAKc,EAEZZ,IACT,EAwGAK,GAASzD,UAAUqD,MAtEnB,WACED,KAAKS,KAAO,EACZT,KAAKQ,SAAW,CACd,KAAQ,IAAIZ,EACZ,IAAO,IAAKP,GAAOe,IACnB,OAAU,IAAIR,EAElB,EAgEAS,GAASzD,UAAkB,OArD3B,SAAwB+D,GACtB,IAAIhB,EAAS4B,GAAWvB,KAAMW,GAAa,OAAEA,GAE7C,OADAX,KAAKS,MAAQd,EAAS,EAAI,EACnBA,CACT,EAkDAU,GAASzD,UAAUwE,IAvCnB,SAAqBT,GACnB,OAAOY,GAAWvB,KAAMW,GAAKS,IAAIT,EACnC,EAsCAN,GAASzD,UAAUuE,IA3BnB,SAAqBR,GACnB,OAAOY,GAAWvB,KAAMW,GAAKQ,IAAIR,EACnC,EA0BAN,GAASzD,UAAUuD,IAdnB,SAAqBQ,EAAKC,GACxB,IAAIL,EAAOgB,GAAWvB,KAAMW,GACxBF,EAAOF,EAAKE,KAIhB,OAFAF,EAAKJ,IAAIQ,EAAKC,GACdZ,KAAKS,MAAQF,EAAKE,MAAQA,EAAO,EAAI,EAC9BT,IACT,EAuGAM,GAAM1D,UAAUqD,MA3EhB,WACED,KAAKQ,SAAW,IAAIJ,GACpBJ,KAAKS,KAAO,CACd,EAyEAH,GAAM1D,UAAkB,OA9DxB,SAAqB+D,GACnB,IAAIJ,EAAOP,KAAKQ,SACZb,EAASY,EAAa,OAAEI,GAG5B,OADAX,KAAKS,KAAOF,EAAKE,KACVd,CACT,EAyDAW,GAAM1D,UAAUwE,IA9ChB,SAAkBT,GAChB,OAAOX,KAAKQ,SAASY,IAAIT,EAC3B,EA6CAL,GAAM1D,UAAUuE,IAlChB,SAAkBR,GAChB,OAAOX,KAAKQ,SAASW,IAAIR,EAC3B,EAiCAL,GAAM1D,UAAUuD,IArBhB,SAAkBQ,EAAKC,GACrB,IAAIL,EAAOP,KAAKQ,SAChB,GAAID,aAAgBH,GAAW,CAC7B,IAAIoB,EAAQjB,EAAKC,SACjB,IAAKnB,GAAQmC,EAAMzB,OAAS0B,IAG1B,OAFAD,EAAMF,KAAK,CAACX,EAAKC,IACjBZ,KAAKS,OAASF,EAAKE,KACZT,KAETO,EAAOP,KAAKQ,SAAW,IAAIH,GAASmB,EACtC,CAGA,OAFAjB,EAAKJ,IAAIQ,EAAKC,GACdZ,KAAKS,KAAOF,EAAKE,KACVT,IACT,EA0IA,SAAS0B,GAAWd,GAClB,OAAa,MAATA,OACe9C,IAAV8C,EAAsB/F,EAAeH,EAEtC+D,GAAkBA,KAAkBnD,OAAOsF,GA6YrD,SAAmBA,GACjB,IAAIe,EAAQzE,EAAeO,KAAKmD,EAAOnC,GACnCmD,EAAMhB,EAAMnC,GAEhB,IACEmC,EAAMnC,QAAkBX,EACxB,IAAI+D,GAAW,CACjB,CAAE,MAAOtF,GAAI,CAEb,IAAIoD,EAASpC,EAAqBE,KAAKmD,GAQvC,OAPIiB,IACEF,EACFf,EAAMnC,GAAkBmD,SAEjBhB,EAAMnC,IAGVkB,CACT,CA9ZMmC,CAAUlB,GAwhBhB,SAAwBA,GACtB,OAAOrD,EAAqBE,KAAKmD,EACnC,CAzhBMmB,CAAenB,EACrB,CASA,SAASoB,GAAgBpB,GACvB,OAAOqB,GAAarB,IAAUc,GAAWd,IAAUtG,CACrD,CA+DA,SAAS4H,GAAU1C,EAAQ2C,EAAQC,EAAUC,EAAYC,GACnD9C,IAAW2C,GA4QR,SAAS3C,EAAQ+C,EAAUC,GAMhC,IALA,IAAI1C,GAAS,EACT2C,EAAWnH,OAAOkE,GAClBkD,EAAQF,EAAShD,GACjBO,EAAS2C,EAAM3C,OAEZA,KAAU,CACf,IAAIY,EAAM+B,IAA6B5C,GACvC,IAA+C,IAA3CyC,EAASE,EAAS9B,GAAMA,EAAK8B,GAC/B,KAEJ,CAEF,CAtRAE,CAAQR,GAAQ,SAASS,EAAUjC,GAEjC,GADA2B,IAAUA,EAAQ,IAAIhC,IAClBZ,GAASkD,IA+BjB,SAAuBpD,EAAQ2C,EAAQxB,EAAKyB,EAAUS,EAAWR,EAAYC,GAC3E,IAAItB,EAAW8B,GAAQtD,EAAQmB,GAC3BiC,EAAWE,GAAQX,EAAQxB,GAC3BoC,EAAUT,EAAMlB,IAAIwB,GAExB,GAAIG,EACFrC,GAAiBlB,EAAQmB,EAAKoC,OADhC,CAIA,IA0HuBC,EACnBC,EAfoBC,EACpBvD,EA2iBqBiB,EAxpBrBuC,EAAWd,EACXA,EAAWrB,EAAU4B,EAAWjC,EAAM,GAAKnB,EAAQ2C,EAAQG,QAC3DxE,EAEAsF,OAAwBtF,IAAbqF,EAEf,GAAIC,EAAU,CACZ,IAAIC,EAAQC,GAAQV,GAChBW,GAAUF,GAASvE,GAAS8D,GAC5BY,GAAWH,IAAUE,GAAU9G,GAAamG,GAEhDO,EAAWP,EACPS,GAASE,GAAUC,EACjBF,GAAQtC,GACVmC,EAAWnC,EA2oBViB,GADkBrB,EAxoBMI,IAyoBDyC,GAAY7C,GAxoBpCuC,EAsHR,SAAmBhB,EAAQjB,GACzB,IAAIpB,GAAS,EACTC,EAASoC,EAAOpC,OAGpB,IADAmB,IAAUA,EAAQvE,MAAMoD,MACfD,EAAQC,GACfmB,EAAMpB,GAASqC,EAAOrC,GAExB,OAAOoB,CACT,CA/HmBwC,CAAU1C,GAEduC,GACPH,GAAW,EACXD,EAqER,SAAqBF,EAAQU,GAEzB,OAAOV,EAAOW,OAOlB,CA9EmBC,CAAYjB,IAEhBY,GACPJ,GAAW,EAqFbzD,EAAS,IADWuD,GAcDF,EAjGUJ,GAkGiBK,QAdrBa,YAAYZ,EAAYa,YACrD,IAAI/F,EAAW2B,GAAQQ,IAAI,IAAInC,EAAWkF,IAatCD,EAZGtD,EAtFDwD,EAmGC,IAAIH,EAAWc,YAAYb,EAAQD,EAAWgB,WAAYhB,EAAWjD,SAhGtEoD,EAAW,GAmyBnB,SAAuBvC,GACrB,IAAKqB,GAAarB,IAAUc,GAAWd,IAAUjG,EAC/C,OAAO,EAET,IAAI8E,EAAQxB,EAAa2C,GACzB,GAAc,OAAVnB,EACF,OAAO,EAET,IAAIwE,EAAO/G,EAAeO,KAAKgC,EAAO,gBAAkBA,EAAMqE,YAC9D,MAAsB,mBAARG,GAAsBA,aAAgBA,GAClDjH,EAAaS,KAAKwG,IAASzG,CAC/B,CA3yBa0G,CAActB,IAAauB,GAAYvB,IAC9CO,EAAWnC,EACPmD,GAAYnD,GACdmC,EAq1BR,SAAuBvC,GACrB,OA5tBF,SAAoBuB,EAAQO,EAAOlD,EAAQ6C,GACzC,IAAI+B,GAAS5E,EACbA,IAAWA,EAAS,CAAC,GAKrB,IAHA,IAAIM,GAAS,EACTC,EAAS2C,EAAM3C,SAEVD,EAAQC,GAAQ,CACvB,IAAIY,EAAM+B,EAAM5C,GAEZqD,OAEArF,OAEaA,IAAbqF,IACFA,EAAWhB,EAAOxB,IAEhByD,EACFtD,GAAgBtB,EAAQmB,EAAKwC,GAE7BpC,GAAYvB,EAAQmB,EAAKwC,EAE7B,CACA,OAAO3D,CACT,CAosBS6E,CAAWzD,EAAO0D,GAAO1D,GAClC,CAv1BmB2D,CAAcvD,GAEjBtB,GAASsB,KAAawD,GAAWxD,KACzCmC,EAwQR,SAAyB3D,GACvB,MAAqC,mBAAtBA,EAAOsE,aAA8BW,GAAYjF,GAE5D,CAAC,EADDD,EAAWtB,EAAauB,GAE9B,CA5QmBkF,CAAgB9B,KAI7BQ,GAAW,CAEf,CACIA,IAEFd,EAAMnC,IAAIyC,EAAUO,GACpBN,EAAUM,EAAUP,EAAUR,EAAUC,EAAYC,GACpDA,EAAc,OAAEM,IAElBlC,GAAiBlB,EAAQmB,EAAKwC,EAnD9B,CAoDF,CA1FMwB,CAAcnF,EAAQ2C,EAAQxB,EAAKyB,EAAUF,GAAWG,EAAYC,OAEjE,CACH,IAAIa,EAAWd,EACXA,EAAWS,GAAQtD,EAAQmB,GAAMiC,EAAWjC,EAAM,GAAKnB,EAAQ2C,EAAQG,QACvExE,OAEaA,IAAbqF,IACFA,EAAWP,GAEblC,GAAiBlB,EAAQmB,EAAKwC,EAChC,CACF,GAAGmB,GACL,CAmGA,IAAIM,GAAmBjG,EAA4B,SAASzD,EAAM2J,GAChE,OAAOlG,EAAezD,EAAM,WAAY,CACtC,cAAgB,EAChB,YAAc,EACd,OA+3Bc0F,EA/3BIiE,EAg4Bb,WACL,OAAOjE,CACT,GAj4BE,UAAY,IA83BhB,IAAkBA,CA53BlB,EAPwCkE,GA8KxC,SAASvD,GAAWwD,EAAKpE,GACvB,IA4GiBC,EACboE,EA7GAzE,EAAOwE,EAAIvE,SACf,OA6GgB,WADZwE,SADapE,EA3GAD,KA6GmB,UAARqE,GAA4B,UAARA,GAA4B,WAARA,EACrD,cAAVpE,EACU,OAAVA,GA9GDL,EAAmB,iBAAPI,EAAkB,SAAW,QACzCJ,EAAKwE,GACX,CAUA,SAASnG,GAAUY,EAAQmB,GACzB,IAAIC,EAnhCN,SAAkBpB,EAAQmB,GACxB,OAAiB,MAAVnB,OAAiB1B,EAAY0B,EAAOmB,EAC7C,CAihCcsE,CAASzF,EAAQmB,GAC7B,OA3WF,SAAsBC,GACpB,SAAKlB,GAASkB,IAodhB,SAAkB1F,GAChB,QAASiC,GAAeA,KAAcjC,CACxC,CAtd0BgK,CAAStE,MAGnB4D,GAAW5D,GAASlD,EAAa5C,GAChCqK,KAgmBjB,SAAkBjK,GAChB,GAAY,MAARA,EAAc,CAChB,IACE,OAAO8B,EAAaS,KAAKvC,EAC3B,CAAE,MAAOqB,GAAI,CACb,IACE,OAAQrB,EAAO,EACjB,CAAE,MAAOqB,GAAI,CACf,CACA,MAAO,EACT,CA1mBsB6I,CAASxE,GAC/B,CAqWSyE,CAAazE,GAASA,OAAQ9C,CACvC,CAkDA,SAASwH,GAAQ1E,EAAOb,GACtB,IAAIiF,SAAcpE,EAGlB,SAFAb,EAAmB,MAAVA,EAAiB1F,EAAmB0F,KAGlC,UAARiF,GACU,UAARA,GAAoBjK,EAASoK,KAAKvE,KAChCA,GAAS,GAAKA,EAAQ,GAAK,GAAKA,EAAQb,CACjD,CA0DA,SAAS0E,GAAY7D,GACnB,IAAIqD,EAAOrD,GAASA,EAAMkD,YAG1B,OAAOlD,KAFqB,mBAARqD,GAAsBA,EAAKrH,WAAcE,EAG/D,CAsEA,SAASgG,GAAQtD,EAAQmB,GACvB,IAAY,gBAARA,GAAgD,mBAAhBnB,EAAOmB,KAIhC,aAAPA,EAIJ,OAAOnB,EAAOmB,EAChB,CAUA,IAAI4E,GAWJ,SAAkBrK,GAChB,IAAIsK,EAAQ,EACRC,EAAa,EAEjB,OAAO,WACL,IAAIC,EAAQxG,IACRyG,EA75CO,IA65CiBD,EAAQD,GAGpC,GADAA,EAAaC,EACTC,EAAY,GACd,KAAMH,GAl6CI,IAm6CR,OAAOI,UAAU,QAGnBJ,EAAQ,EAEV,OAAOtK,EAAK2K,WAAM/H,EAAW8H,UAC/B,CACF,CA7BkBE,CAASlB,IAkF3B,SAAS/D,GAAGD,EAAOmF,GACjB,OAAOnF,IAAUmF,GAAUnF,GAAUA,GAASmF,GAAUA,CAC1D,CAoBA,IAAI5B,GAAcnC,GAAgB,WAAa,OAAO4D,SAAW,CAA/B,IAAsC5D,GAAkB,SAASpB,GACjG,OAAOqB,GAAarB,IAAU1D,EAAeO,KAAKmD,EAAO,YACtDrC,EAAqBd,KAAKmD,EAAO,SACtC,EAyBI0C,GAAU3G,MAAM2G,QA2BpB,SAASG,GAAY7C,GACnB,OAAgB,MAATA,GAAiBoF,GAASpF,EAAMb,UAAYyE,GAAW5D,EAChE,CAgDA,IAAI9B,GAAWD,GAsUf,WACE,OAAO,CACT,EArTA,SAAS2F,GAAW5D,GAClB,IAAKlB,GAASkB,GACZ,OAAO,EAIT,IAAIgB,EAAMF,GAAWd,GACrB,OAAOgB,GAAOpH,GAAWoH,GAAOnH,GAAUmH,GAAOrH,GAAYqH,GAAOhH,CACtE,CA4BA,SAASoL,GAASpF,GAChB,MAAuB,iBAATA,GACZA,GAAS,GAAKA,EAAQ,GAAK,GAAKA,GAASvG,CAC7C,CA2BA,SAASqF,GAASkB,GAChB,IAAIoE,SAAcpE,EAClB,OAAgB,MAATA,IAA0B,UAARoE,GAA4B,YAARA,EAC/C,CA0BA,SAAS/C,GAAarB,GACpB,OAAgB,MAATA,GAAiC,iBAATA,CACjC,CA4DA,IAAInE,GAAeD,EAvnDnB,SAAmBtB,GACjB,OAAO,SAAS0F,GACd,OAAO1F,EAAK0F,EACd,CACF,CAmnDsCqF,CAAUzJ,GAj7BhD,SAA0BoE,GACxB,OAAOqB,GAAarB,IAClBoF,GAASpF,EAAMb,WAAa/E,EAAe0G,GAAWd,GAC1D,EAm+BA,SAAS0D,GAAO9E,GACd,OAAOiE,GAAYjE,GA3oCrB,SAAuBoB,EAAOsF,GAC5B,IAAI7C,EAAQC,GAAQ1C,GAChBuF,GAAS9C,GAASc,GAAYvD,GAC9B2C,GAAUF,IAAU8C,GAASrH,GAAS8B,GACtCwF,GAAU/C,IAAU8C,IAAU5C,GAAU9G,GAAamE,GACrDyF,EAAchD,GAAS8C,GAAS5C,GAAU6C,EAC1CzG,EAAS0G,EAzjBf,SAAmBC,EAAG/D,GAIpB,IAHA,IAAIzC,GAAS,EACTH,EAAShD,MAAM2J,KAEVxG,EAAQwG,GACf3G,EAAOG,GAASyC,EAASzC,GAE3B,OAAOH,CACT,CAijB6B4G,CAAU3F,EAAMb,OAAQyG,QAAU,GACzDzG,EAASJ,EAAOI,OAEpB,IAAK,IAAIY,KAAOC,GACTsF,IAAahJ,EAAeO,KAAKmD,EAAOD,IACvC0F,IAEQ,UAAP1F,GAEC4C,IAAkB,UAAP5C,GAA0B,UAAPA,IAE9ByF,IAAkB,UAAPzF,GAA0B,cAAPA,GAA8B,cAAPA,IAEtD2E,GAAQ3E,EAAKZ,KAElBJ,EAAO2B,KAAKX,GAGhB,OAAOhB,CACT,CAknC+B8G,CAAcjH,GAAQ,GA39BrD,SAAoBA,GAClB,IAAKE,GAASF,GACZ,OAmdJ,SAAsBA,GACpB,IAAIG,EAAS,GACb,GAAc,MAAVH,EACF,IAAK,IAAImB,KAAOrF,OAAOkE,GACrBG,EAAO2B,KAAKX,GAGhB,OAAOhB,CACT,CA3dW+G,CAAalH,GAEtB,IAAImH,EAAUlC,GAAYjF,GACtBG,EAAS,GAEb,IAAK,IAAIgB,KAAOnB,GACD,eAAPmB,IAAyBgG,GAAYzJ,EAAeO,KAAK+B,EAAQmB,KACrEhB,EAAO2B,KAAKX,GAGhB,OAAOhB,CACT,CA88B6DiH,CAAWpH,EACxE,CAiCA,IAxvBwBqH,GAwvBpBC,IAxvBoBD,GAwvBO,SAASrH,EAAQ2C,EAAQC,EAAUC,GAChEH,GAAU1C,EAAQ2C,EAAQC,EAAUC,EACtC,EA13BA,SAAkBnH,EAAM6L,GACtB,OAAOxB,GA6WT,SAAkBrK,EAAM6L,EAAO5L,GAE7B,OADA4L,EAAQhI,OAAoBjB,IAAViJ,EAAuB7L,EAAK6E,OAAS,EAAKgH,EAAO,GAC5D,WAML,IALA,IAAIC,EAAOpB,UACP9F,GAAS,EACTC,EAAShB,EAAUiI,EAAKjH,OAASgH,EAAO,GACxC7F,EAAQvE,MAAMoD,KAETD,EAAQC,GACfmB,EAAMpB,GAASkH,EAAKD,EAAQjH,GAE9BA,GAAS,EAET,IADA,IAAImH,EAAYtK,MAAMoK,EAAQ,KACrBjH,EAAQiH,GACfE,EAAUnH,GAASkH,EAAKlH,GAG1B,OADAmH,EAAUF,GAAS5L,EAAU+F,GAzvCjC,SAAehG,EAAMgM,EAASF,GAC5B,OAAQA,EAAKjH,QACX,KAAK,EAAG,OAAO7E,EAAKuC,KAAKyJ,GACzB,KAAK,EAAG,OAAOhM,EAAKuC,KAAKyJ,EAASF,EAAK,IACvC,KAAK,EAAG,OAAO9L,EAAKuC,KAAKyJ,EAASF,EAAK,GAAIA,EAAK,IAChD,KAAK,EAAG,OAAO9L,EAAKuC,KAAKyJ,EAASF,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAE3D,OAAO9L,EAAK2K,MAAMqB,EAASF,EAC7B,CAkvCWnB,CAAM3K,EAAM8E,KAAMiH,EAC3B,CACF,CAhYqBE,CAASjM,EAAM6L,EAAOjC,IAAW5J,EAAO,GAC7D,CA+HSkM,EAAS,SAAS5H,EAAQ6H,GAC/B,IAAIvH,GAAS,EACTC,EAASsH,EAAQtH,OACjBsC,EAAatC,EAAS,EAAIsH,EAAQtH,EAAS,QAAKjC,EAChDwJ,EAAQvH,EAAS,EAAIsH,EAAQ,QAAKvJ,EAWtC,IATAuE,EAAcwE,GAAS9G,OAAS,GAA0B,mBAAdsC,GACvCtC,IAAUsC,QACXvE,EAEAwJ,GAuIR,SAAwB1G,EAAOd,EAAON,GACpC,IAAKE,GAASF,GACZ,OAAO,EAET,IAAIwF,SAAclF,EAClB,SAAY,UAARkF,EACKvB,GAAYjE,IAAW8F,GAAQxF,EAAON,EAAOO,QACrC,UAARiF,GAAoBlF,KAASN,IAE7BqB,GAAGrB,EAAOM,GAAQc,EAG7B,CAnJiB2G,CAAeF,EAAQ,GAAIA,EAAQ,GAAIC,KAClDjF,EAAatC,EAAS,OAAIjC,EAAYuE,EACtCtC,EAAS,GAEXP,EAASlE,OAAOkE,KACPM,EAAQC,GAAQ,CACvB,IAAIoC,EAASkF,EAAQvH,GACjBqC,GACF0E,GAASrH,EAAQ2C,EAAQrC,EAAOuC,EAEpC,CACA,OAAO7C,CACT,KA8wBF,SAASsF,GAASlE,GAChB,OAAOA,CACT,CAmBA7E,EAAOH,QAAUkL,E,qCCn7DjB,IAAIU,EAAmBxH,MAAQA,KAAKwH,kBAAqBlM,OAAOgD,OAAS,SAAUmJ,EAAGC,EAAGC,EAAGC,QAC7E9J,IAAP8J,IAAkBA,EAAKD,GAC3B,IAAIE,EAAOvM,OAAOwM,yBAAyBJ,EAAGC,GACzCE,KAAS,QAASA,GAAQH,EAAEK,WAAaF,EAAKG,UAAYH,EAAKI,gBAClEJ,EAAO,CAAEK,YAAY,EAAM9G,IAAK,WAAa,OAAOsG,EAAEC,EAAI,IAE5DrM,OAAOqD,eAAe8I,EAAGG,EAAIC,EAChC,EAAI,SAAUJ,EAAGC,EAAGC,EAAGC,QACT9J,IAAP8J,IAAkBA,EAAKD,GAC3BF,EAAEG,GAAMF,EAAEC,EACb,GACGQ,EAAgBnI,MAAQA,KAAKmI,cAAiB,SAAST,EAAG9L,GAC1D,IAAK,IAAIwM,KAAKV,EAAa,YAANU,GAAoB9M,OAAOsB,UAAUM,eAAeO,KAAK7B,EAASwM,IAAIZ,EAAgB5L,EAAS8L,EAAGU,EAC3H,EACA9M,OAAOqD,eAAe/C,EAAS,aAAc,CAAEgF,OAAO,IACtDhF,EAAQyM,wBAA0BzM,EAAQ0M,qBAAuB1M,EAAQ2M,0BAAuB,EAClF,EAAQ,OAEhBC,QAAQC,UACd,MAAMC,EAAQ,EAAQ,OACtBP,EAAa,EAAQ,OAAkBvM,GACvC,MAAM2M,UAA6BG,EAAMC,sBACrC,WAAA7E,CAAY8E,GACRC,QACA7I,KAAK8I,QAAU,IAAIJ,EAAMK,QACzB/I,KAAKgJ,iBAAoBC,IACrBjJ,KAAK8I,QAAQI,KAAKD,EAAM1I,KAAK,EAEjCqI,EAAKO,iBAAiB,SAAUF,GAAUjJ,KAAKoJ,UAAUH,KACzDL,EAAKS,UAAYrJ,KAAKgJ,gBAC1B,CACA,MAAAM,CAAOC,GACH,OAAOvJ,KAAK8I,QAAQG,MAAMM,EAC9B,EAEJ3N,EAAQ2M,qBAAuBA,EAC/B,MAAMD,UAA6BI,EAAMc,sBACrC,WAAA1F,CAAY8E,GACRC,QACA7I,KAAK4I,KAAOA,EACZ5I,KAAKyJ,WAAa,EAClBb,EAAKO,iBAAiB,SAAUF,GAAUjJ,KAAKoJ,UAAUH,IAC7D,CACA,KAAAS,CAAMC,GACF,IAEI,OADA3J,KAAK4I,KAAKgB,YAAYD,GACfE,QAAQC,SACnB,CACA,MAAOC,GAEH,OADA/J,KAAKgK,YAAYD,EAAOJ,GACjBE,QAAQI,OAAOF,EAC1B,CACJ,CACA,WAAAC,CAAYD,EAAOJ,GACf3J,KAAKyJ,aACLzJ,KAAKoJ,UAAUW,EAAOJ,EAAK3J,KAAKyJ,WACpC,CACA,GAAAS,GACA,EAEJtO,EAAQ0M,qBAAuBA,EAU/B1M,EAAQyM,wBATR,SAAiC8B,EAAQC,EAAQC,EAAQC,GAOrD,YANexM,IAAXuM,IACAA,EAAS3B,EAAM6B,YAEf7B,EAAM8B,mBAAmBC,GAAGH,KAC5BA,EAAU,CAAEI,mBAAoBJ,KAE7B,EAAI5B,EAAML,yBAAyB8B,EAAQC,EAAQC,EAAQC,EACtE,C,+BCrEAhP,OAAOqD,eAAe/C,EAAS,aAAc,CAAEgF,OAAO,IACtD,MAAM8H,EAAQ,EAAQ,OACtB,MAAMiC,UAAsBjC,EAAMkC,sBAC9B,WAAA9G,CAAY+G,EAAW,SACnBhC,MAAMgC,GACN7K,KAAK8K,aAAe,IAAIC,YAAY,QACxC,CACA,WAAAC,GACI,OAAOL,EAAcK,WACzB,CACA,UAAAC,CAAWrK,EAAOsK,GACd,OAAO,IAAKC,aAAeC,OAAOxK,EACtC,CACA,QAAA3D,CAAS2D,EAAOiK,GACZ,MAAiB,UAAbA,EACO7K,KAAK8K,aAAaO,OAAOzK,GAGzB,IAAKmK,YAAYF,GAAWQ,OAAOzK,EAElD,CACA,QAAA0K,CAASrI,EAAQlD,GACb,YAAejC,IAAXiC,EACOkD,EAGAA,EAAOW,MAAM,EAAG7D,EAE/B,CACA,WAAAwL,CAAYxL,GACR,OAAO,IAAI/B,WAAW+B,EAC1B,EAEJ4K,EAAcK,YAAc,IAAIhN,WAAW,GAC3C,MAAMwN,EACF,WAAA1H,CAAY2H,GACRzL,KAAKyL,OAASA,EACdzL,KAAK8I,QAAU,IAAIJ,EAAMK,QACzB/I,KAAKgJ,iBAAoBC,IACRA,EAAM1I,KACd2C,cAAcwI,MAAMzI,IACrBjD,KAAK8I,QAAQI,KAAK,IAAIlL,WAAWiF,GAAQ,IAC1C,MACC,EAAIyF,EAAMiD,OAAOC,QAAQ7B,MAAM,0CAA0C,GAC3E,EAEN/J,KAAKyL,OAAOtC,iBAAiB,UAAWnJ,KAAKgJ,iBACjD,CACA,OAAA6C,CAAQC,GAEJ,OADA9L,KAAKyL,OAAOtC,iBAAiB,QAAS2C,GAC/BpD,EAAMqD,WAAWzN,QAAO,IAAM0B,KAAKyL,OAAOO,oBAAoB,QAASF,IAClF,CACA,OAAAG,CAAQH,GAEJ,OADA9L,KAAKyL,OAAOtC,iBAAiB,QAAS2C,GAC/BpD,EAAMqD,WAAWzN,QAAO,IAAM0B,KAAKyL,OAAOO,oBAAoB,QAASF,IAClF,CACA,KAAAI,CAAMJ,GAEF,OADA9L,KAAKyL,OAAOtC,iBAAiB,MAAO2C,GAC7BpD,EAAMqD,WAAWzN,QAAO,IAAM0B,KAAKyL,OAAOO,oBAAoB,MAAOF,IAChF,CACA,MAAAK,CAAOL,GACH,OAAO9L,KAAK8I,QAAQG,MAAM6C,EAC9B,EAEJ,MAAMM,EACF,WAAAtI,CAAY2H,GACRzL,KAAKyL,OAASA,CAClB,CACA,OAAAI,CAAQC,GAEJ,OADA9L,KAAKyL,OAAOtC,iBAAiB,QAAS2C,GAC/BpD,EAAMqD,WAAWzN,QAAO,IAAM0B,KAAKyL,OAAOO,oBAAoB,QAASF,IAClF,CACA,OAAAG,CAAQH,GAEJ,OADA9L,KAAKyL,OAAOtC,iBAAiB,QAAS2C,GAC/BpD,EAAMqD,WAAWzN,QAAO,IAAM0B,KAAKyL,OAAOO,oBAAoB,QAASF,IAClF,CACA,KAAAI,CAAMJ,GAEF,OADA9L,KAAKyL,OAAOtC,iBAAiB,MAAO2C,GAC7BpD,EAAMqD,WAAWzN,QAAO,IAAM0B,KAAKyL,OAAOO,oBAAoB,MAAOF,IAChF,CACA,KAAApC,CAAMnJ,EAAMsK,GACR,GAAoB,iBAATtK,EAAmB,CAC1B,QAAiBzC,IAAb+M,GAAuC,UAAbA,EAC1B,MAAM,IAAIwB,MAAM,sFAAsFxB,KAE1G7K,KAAKyL,OAAOa,KAAK/L,EACrB,MAEIP,KAAKyL,OAAOa,KAAK/L,GAErB,OAAOsJ,QAAQC,SACnB,CACA,GAAAI,GACIlK,KAAKyL,OAAOc,OAChB,EAEJ,MAAMC,EAAe,IAAIrB,YACnBsB,EAAOnR,OAAOoR,OAAO,CACvBC,cAAerR,OAAOoR,OAAO,CACzBpO,OAASuM,GAAa,IAAIF,EAAcE,KAE5C+B,gBAAiBtR,OAAOoR,OAAO,CAC3BG,QAASvR,OAAOoR,OAAO,CACnBI,KAAM,mBACN1B,OAAQ,CAACzB,EAAKW,KACV,GAAwB,UAApBA,EAAQyC,QACR,MAAM,IAAIV,MAAM,sFAAsF/B,EAAQyC,WAElH,OAAOlD,QAAQC,QAAQ0C,EAAapB,OAAO4B,KAAKC,UAAUtD,OAAK7L,EAAW,IAAI,IAGtFoP,QAAS5R,OAAOoR,OAAO,CACnBI,KAAM,mBACNzB,OAAQ,CAACpI,EAAQqH,KACb,KAAMrH,aAAkBjF,YACpB,MAAM,IAAIqO,MAAM,6DAEpB,OAAOxC,QAAQC,QAAQkD,KAAKG,MAAM,IAAIpC,YAAYT,EAAQyC,SAAS1B,OAAOpI,IAAS,MAI/FmK,OAAQ9R,OAAOoR,OAAO,CAClBW,iBAAmB5B,GAAW,IAAID,EAAsBC,GACxD6B,iBAAmB7B,GAAW,IAAIW,EAAsBX,KAE5DG,QACA2B,MAAOjS,OAAOoR,OAAO,CACjB,UAAAc,CAAWjE,EAAUkE,KAAOzG,GACxB,MAAM0G,EAASF,WAAWjE,EAAUkE,KAAOzG,GAC3C,MAAO,CAAE2G,QAAS,IAAMC,aAAaF,GACzC,EACA,YAAAG,CAAatE,KAAavC,GACtB,MAAM0G,EAASF,WAAWjE,EAAU,KAAMvC,GAC1C,MAAO,CAAE2G,QAAS,IAAMC,aAAaF,GACzC,EACA,WAAAI,CAAYvE,EAAUkE,KAAOzG,GACzB,MAAM0G,EAASI,YAAYvE,EAAUkE,KAAOzG,GAC5C,MAAO,CAAE2G,QAAS,IAAMI,cAAcL,GAC1C,MAGR,SAASM,IACL,OAAOvB,CACX,EACA,SAAWuB,GAIPA,EAAIvF,QAHJ,WACIC,EAAMiD,IAAIlD,QAAQgE,EACtB,CAEH,CALD,CAKGuB,IAAQA,EAAM,CAAC,IAClBpS,EAAA,QAAkBoS,C,+BCrJlB1S,OAAOqD,eAAe/C,EAAS,aAAc,CAAEgF,OAAO,IACtDhF,EAAQqS,aAAerS,EAAQsS,cAAgBtS,EAAQyM,wBAA0BzM,EAAQ2O,WAAa3O,EAAQuS,kBAAoBvS,EAAQ4O,mBAAqB5O,EAAQgP,sBAAwBhP,EAAQwS,6BAA+BxS,EAAQ4N,sBAAwB5N,EAAQyS,cAAgBzS,EAAQ0S,4BAA8B1S,EAAQ+M,sBAAwB/M,EAAQ2S,cAAgB3S,EAAQ4S,4BAA8B5S,EAAQ6S,0BAA4B7S,EAAQ8S,kBAAoB9S,EAAQ+S,wBAA0B/S,EAAQmN,QAAUnN,EAAQgT,MAAQhT,EAAQmQ,WAAanQ,EAAQiT,SAAWjT,EAAQkT,MAAQlT,EAAQmT,UAAYnT,EAAQoT,oBAAsBpT,EAAQqT,kBAAoBrT,EAAQsT,kBAAoBtT,EAAQuT,kBAAoBvT,EAAQwT,kBAAoBxT,EAAQyT,kBAAoBzT,EAAQ0T,kBAAoB1T,EAAQ2T,kBAAoB3T,EAAQ4T,kBAAoB5T,EAAQ6T,kBAAoB7T,EAAQ8T,kBAAoB9T,EAAQ+T,iBAAmB/T,EAAQgU,WAAahU,EAAQiU,cAAgBjU,EAAQkU,aAAelU,EAAQmU,aAAenU,EAAQoU,aAAepU,EAAQqU,aAAerU,EAAQsU,aAAetU,EAAQuU,aAAevU,EAAQwU,aAAexU,EAAQyU,aAAezU,EAAQ0U,aAAe1U,EAAQ2U,aAAe3U,EAAQ4U,YAAc5U,EAAQ6U,QAAU7U,EAAQ+P,SAAM,EAC5wC/P,EAAQ8U,gBAAkB9U,EAAQ+U,qBAAuB/U,EAAQgV,2BAA6BhV,EAAQiV,6BAA+BjV,EAAQkV,gBAAkBlV,EAAQmV,iBAAmBnV,EAAQoV,qBAAuBpV,EAAQqV,qBAAuBrV,EAAQsV,YAActV,EAAQuV,YAAcvV,EAAQwV,WAAQ,EACpT,MAAMC,EAAa,EAAQ,OAC3B/V,OAAOqD,eAAe/C,EAAS,UAAW,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOiQ,EAAWZ,OAAS,IAC5GnV,OAAOqD,eAAe/C,EAAS,cAAe,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOiQ,EAAWb,WAAa,IACpHlV,OAAOqD,eAAe/C,EAAS,eAAgB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOiQ,EAAWd,YAAc,IACtHjV,OAAOqD,eAAe/C,EAAS,eAAgB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOiQ,EAAWf,YAAc,IACtHhV,OAAOqD,eAAe/C,EAAS,eAAgB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOiQ,EAAWhB,YAAc,IACtH/U,OAAOqD,eAAe/C,EAAS,eAAgB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOiQ,EAAWjB,YAAc,IACtH9U,OAAOqD,eAAe/C,EAAS,eAAgB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOiQ,EAAWlB,YAAc,IACtH7U,OAAOqD,eAAe/C,EAAS,eAAgB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOiQ,EAAWnB,YAAc,IACtH5U,OAAOqD,eAAe/C,EAAS,eAAgB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOiQ,EAAWpB,YAAc,IACtH3U,OAAOqD,eAAe/C,EAAS,eAAgB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOiQ,EAAWrB,YAAc,IACtH1U,OAAOqD,eAAe/C,EAAS,eAAgB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOiQ,EAAWtB,YAAc,IACtHzU,OAAOqD,eAAe/C,EAAS,eAAgB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOiQ,EAAWvB,YAAc,IACtHxU,OAAOqD,eAAe/C,EAAS,gBAAiB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOiQ,EAAWxB,aAAe,IACxHvU,OAAOqD,eAAe/C,EAAS,aAAc,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOiQ,EAAWzB,UAAY,IAClHtU,OAAOqD,eAAe/C,EAAS,mBAAoB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOiQ,EAAW1B,gBAAkB,IAC9HrU,OAAOqD,eAAe/C,EAAS,oBAAqB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOiQ,EAAW3B,iBAAmB,IAChIpU,OAAOqD,eAAe/C,EAAS,oBAAqB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOiQ,EAAW5B,iBAAmB,IAChInU,OAAOqD,eAAe/C,EAAS,oBAAqB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOiQ,EAAW7B,iBAAmB,IAChIlU,OAAOqD,eAAe/C,EAAS,oBAAqB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOiQ,EAAW9B,iBAAmB,IAChIjU,OAAOqD,eAAe/C,EAAS,oBAAqB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOiQ,EAAW/B,iBAAmB,IAChIhU,OAAOqD,eAAe/C,EAAS,oBAAqB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOiQ,EAAWhC,iBAAmB,IAChI/T,OAAOqD,eAAe/C,EAAS,oBAAqB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOiQ,EAAWjC,iBAAmB,IAChI9T,OAAOqD,eAAe/C,EAAS,oBAAqB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOiQ,EAAWlC,iBAAmB,IAChI7T,OAAOqD,eAAe/C,EAAS,oBAAqB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOiQ,EAAWnC,iBAAmB,IAChI5T,OAAOqD,eAAe/C,EAAS,oBAAqB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOiQ,EAAWpC,iBAAmB,IAChI3T,OAAOqD,eAAe/C,EAAS,sBAAuB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOiQ,EAAWrC,mBAAqB,IACpI,MAAMsC,EAAc,EAAQ,OAC5BhW,OAAOqD,eAAe/C,EAAS,YAAa,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOkQ,EAAYvC,SAAW,IACjHzT,OAAOqD,eAAe/C,EAAS,WAAY,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOkQ,EAAYzC,QAAU,IAC/GvT,OAAOqD,eAAe/C,EAAS,QAAS,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOkQ,EAAYxC,KAAO,IACzG,MAAMyC,EAAe,EAAQ,OAC7BjW,OAAOqD,eAAe/C,EAAS,aAAc,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOmQ,EAAaxF,UAAY,IACpH,MAAMyF,EAAW,EAAQ,KACzBlW,OAAOqD,eAAe/C,EAAS,QAAS,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOoQ,EAAS5C,KAAO,IACtGtT,OAAOqD,eAAe/C,EAAS,UAAW,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOoQ,EAASzI,OAAS,IAC1G,MAAM0I,EAAiB,EAAQ,OAC/BnW,OAAOqD,eAAe/C,EAAS,0BAA2B,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOqQ,EAAe9C,uBAAyB,IAChJrT,OAAOqD,eAAe/C,EAAS,oBAAqB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOqQ,EAAe/C,iBAAmB,IACpI,MAAMgD,EAA4B,EAAQ,OAC1CpW,OAAOqD,eAAe/C,EAAS,4BAA6B,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOsQ,EAA0BjD,yBAA2B,IAC/JnT,OAAOqD,eAAe/C,EAAS,8BAA+B,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOsQ,EAA0BlD,2BAA6B,IACnK,MAAMmD,EAAkB,EAAQ,OAChCrW,OAAOqD,eAAe/C,EAAS,gBAAiB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOuQ,EAAgBpD,aAAe,IAC7HjT,OAAOqD,eAAe/C,EAAS,wBAAyB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOuQ,EAAgBhJ,qBAAuB,IAC7IrN,OAAOqD,eAAe/C,EAAS,8BAA+B,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOuQ,EAAgBrD,2BAA6B,IACzJ,MAAMsD,EAAkB,EAAQ,OAChCtW,OAAOqD,eAAe/C,EAAS,gBAAiB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOwQ,EAAgBvD,aAAe,IAC7H/S,OAAOqD,eAAe/C,EAAS,wBAAyB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOwQ,EAAgBpI,qBAAuB,IAC7IlO,OAAOqD,eAAe/C,EAAS,+BAAgC,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOwQ,EAAgBxD,4BAA8B,IAC3J,MAAMyD,EAAkB,EAAQ,OAChCvW,OAAOqD,eAAe/C,EAAS,wBAAyB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAOyQ,EAAgBjH,qBAAuB,IAC7I,MAAMkH,EAAe,EAAQ,MAC7BxW,OAAOqD,eAAe/C,EAAS,qBAAsB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAO0Q,EAAatH,kBAAoB,IACpIlP,OAAOqD,eAAe/C,EAAS,oBAAqB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAO0Q,EAAa3D,iBAAmB,IAClI7S,OAAOqD,eAAe/C,EAAS,aAAc,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAO0Q,EAAavH,UAAY,IACpHjP,OAAOqD,eAAe/C,EAAS,0BAA2B,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAO0Q,EAAazJ,uBAAyB,IAC9I/M,OAAOqD,eAAe/C,EAAS,gBAAiB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAO0Q,EAAa5D,aAAe,IAC1H5S,OAAOqD,eAAe/C,EAAS,eAAgB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAO0Q,EAAa7D,YAAc,IACxH3S,OAAOqD,eAAe/C,EAAS,QAAS,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAO0Q,EAAaV,KAAO,IAC1G9V,OAAOqD,eAAe/C,EAAS,cAAe,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAO0Q,EAAaX,WAAa,IACtH7V,OAAOqD,eAAe/C,EAAS,cAAe,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAO0Q,EAAaZ,WAAa,IACtH5V,OAAOqD,eAAe/C,EAAS,uBAAwB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAO0Q,EAAab,oBAAsB,IACxI3V,OAAOqD,eAAe/C,EAAS,uBAAwB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAO0Q,EAAad,oBAAsB,IACxI1V,OAAOqD,eAAe/C,EAAS,mBAAoB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAO0Q,EAAaf,gBAAkB,IAChIzV,OAAOqD,eAAe/C,EAAS,kBAAmB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAO0Q,EAAahB,eAAiB,IAC9HxV,OAAOqD,eAAe/C,EAAS,+BAAgC,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAO0Q,EAAajB,4BAA8B,IACxJvV,OAAOqD,eAAe/C,EAAS,6BAA8B,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAO0Q,EAAalB,0BAA4B,IACpJtV,OAAOqD,eAAe/C,EAAS,uBAAwB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAO0Q,EAAanB,oBAAsB,IACxIrV,OAAOqD,eAAe/C,EAAS,kBAAmB,CAAEsM,YAAY,EAAM9G,IAAK,WAAc,OAAO0Q,EAAapB,eAAiB,IAC9H,MAAMqB,EAAQ,EAAQ,OACtBnW,EAAQ+P,IAAMoG,EAAMvJ,O,+BC3EpBlN,OAAOqD,eAAe/C,EAAS,aAAc,CAAEgF,OAAO,IACtDhF,EAAQ+S,wBAA0B/S,EAAQ8S,uBAAoB,EAC9D,MAAMqD,EAAQ,EAAQ,OAChBC,EAAK,EAAQ,OACbR,EAAW,EAAQ,KACzB,IAAI9C,GACJ,SAAWA,GACPA,EAAkBuD,KAAO3W,OAAOoR,OAAO,CACnCwF,yBAAyB,EACzBC,wBAAyBX,EAAS5C,MAAMqD,OAE5CvD,EAAkB0D,UAAY9W,OAAOoR,OAAO,CACxCwF,yBAAyB,EACzBC,wBAAyBX,EAAS5C,MAAMqD,OAQ5CvD,EAAkBjE,GANlB,SAAY7J,GACR,MAAMyR,EAAYzR,EAClB,OAAOyR,IAAcA,IAAc3D,EAAkBuD,MAC9CI,IAAc3D,EAAkB0D,WAC/BJ,EAAGM,QAAQD,EAAUH,4BAA8BG,EAAUF,wBACzE,CAEH,CAhBD,CAgBGzD,EAAoB9S,EAAQ8S,oBAAsB9S,EAAQ8S,kBAAoB,CAAC,IAClF,MAAM6D,EAAgBjX,OAAOoR,QAAO,SAAUnD,EAAUiJ,GACpD,MAAM9E,GAAS,EAAIqE,EAAMvJ,WAAW+E,MAAMC,WAAWjE,EAASkJ,KAAKD,GAAU,GAC7E,MAAO,CAAE,OAAA7E,GAAYD,EAAOC,SAAW,EAC3C,IACA,MAAM+E,EACF,WAAA5O,GACI9D,KAAK2S,cAAe,CACxB,CACA,MAAAC,GACS5S,KAAK2S,eACN3S,KAAK2S,cAAe,EAChB3S,KAAK6S,WACL7S,KAAK6S,SAAS3J,UAAKpL,GACnBkC,KAAK2N,WAGjB,CACA,2BAAIuE,GACA,OAAOlS,KAAK2S,YAChB,CACA,2BAAIR,GACA,OAAInS,KAAK2S,aACEJ,GAENvS,KAAK6S,WACN7S,KAAK6S,SAAW,IAAIrB,EAASzI,SAE1B/I,KAAK6S,SAAS5J,MACzB,CACA,OAAA0E,GACQ3N,KAAK6S,WACL7S,KAAK6S,SAASlF,UACd3N,KAAK6S,cAAW/U,EAExB,EAiCJlC,EAAQ+S,wBA/BR,MACI,SAAImE,GAMA,OALK9S,KAAK+S,SAGN/S,KAAK+S,OAAS,IAAIL,GAEf1S,KAAK+S,MAChB,CACA,MAAAH,GACS5S,KAAK+S,OAON/S,KAAK+S,OAAOH,SAHZ5S,KAAK+S,OAASrE,EAAkB0D,SAKxC,CACA,OAAAzE,GACS3N,KAAK+S,OAID/S,KAAK+S,kBAAkBL,GAE5B1S,KAAK+S,OAAOpF,UAJZ3N,KAAK+S,OAASrE,EAAkBuD,IAMxC,E,8BCxFJ3W,OAAOqD,eAAe/C,EAAS,aAAc,CAAEgF,OAAO,IACtDhF,EAAQyM,wBAA0BzM,EAAQuS,kBAAoBvS,EAAQ8U,gBAAkB9U,EAAQ+U,qBAAuB/U,EAAQgV,2BAA6BhV,EAAQiV,6BAA+BjV,EAAQoX,oCAAsCpX,EAAQqX,+BAAiCrX,EAAQ4O,mBAAqB5O,EAAQkV,gBAAkBlV,EAAQmV,iBAAmBnV,EAAQoV,qBAAuBpV,EAAQqV,qBAAuBrV,EAAQsV,YAActV,EAAQuV,YAAcvV,EAAQwV,MAAQxV,EAAQ2O,WAAa3O,EAAQqS,aAAerS,EAAQsS,mBAAgB,EAC1iB,MAAM6D,EAAQ,EAAQ,OAChBC,EAAK,EAAQ,OACbX,EAAa,EAAQ,OACrBC,EAAc,EAAQ,OACtBE,EAAW,EAAQ,KACnBC,EAAiB,EAAQ,OAC/B,IAAIyB,EAIAhF,EAOAiF,EASAC,EAaAhC,EA8DAF,EAoBAD,EAIAD,EAIAD,EAuBAvG,EAQAyI,EAQAD,EAQAnC,EAYAD,EAcAD,EAYAD,EAgBA2C,EAvLOlC,GAxCX,SAAW+B,GACPA,EAAmBlO,KAAO,IAAIqM,EAAW1B,iBAAiB,kBAC7D,CAFD,CAEGuD,IAAuBA,EAAqB,CAAC,IAEhD,SAAWhF,GAIPA,EAAczD,GAHd,SAAY7J,GACR,MAAwB,iBAAVA,GAAuC,iBAAVA,CAC/C,CAEH,CALD,CAKGsN,EAAgBtS,EAAQsS,gBAAkBtS,EAAQsS,cAAgB,CAAC,IAEtE,SAAWiF,GACPA,EAAqBnO,KAAO,IAAIqM,EAAW1B,iBAAiB,aAC/D,CAFD,CAEGwD,IAAyBA,EAAuB,CAAC,IAKpDvX,EAAQqS,aAJR,MACI,WAAAnK,GACA,GAIJ,SAAWsP,GAIPA,EAAmB3I,GAHnB,SAAY7J,GACR,OAAOoR,EAAG9W,KAAK0F,EACnB,CAEH,CALD,CAKGwS,IAAuBA,EAAqB,CAAC,IAChDxX,EAAQ2O,WAAajP,OAAOoR,OAAO,CAC/B3C,MAAO,OACPuJ,KAAM,OACNC,KAAM,OACNC,IAAK,SAGT,SAAWpC,GACPA,EAAMA,EAAW,IAAI,GAAK,MAC1BA,EAAMA,EAAgB,SAAI,GAAK,WAC/BA,EAAMA,EAAe,QAAI,GAAK,UAC9BA,EAAMA,EAAe,QAAI,GAAK,SACjC,CALD,CAKGA,EAAQxV,EAAQwV,QAAUxV,EAAQwV,MAAQ,CAAC,KAEnCD,EAiBMvV,EAAQuV,cAAgBvV,EAAQuV,YAAc,CAAC,IAbhDsC,IAAM,MAIlBtC,EAAYuC,SAAW,WAIvBvC,EAAYwC,QAAU,UAItBxC,EAAYyC,QAAU,UAE1B,SAAWxC,GAmBPA,EAAMnG,WAlBN,SAAoBrK,GAChB,IAAKoR,EAAGnN,OAAOjE,GACX,OAAOwQ,EAAMqC,IAGjB,OADA7S,EAAQA,EAAMiT,eAEV,IAAK,MAQL,QACI,OAAOzC,EAAMqC,IAPjB,IAAK,WACD,OAAOrC,EAAMsC,SACjB,IAAK,UACD,OAAOtC,EAAMuC,QACjB,IAAK,UACD,OAAOvC,EAAMwC,QAIzB,EAgBAxC,EAAMnU,SAdN,SAAkB2D,GACd,OAAQA,GACJ,KAAKwQ,EAAMqC,IACP,MAAO,MACX,KAAKrC,EAAMsC,SACP,MAAO,WACX,KAAKtC,EAAMuC,QACP,MAAO,UACX,KAAKvC,EAAMwC,QACP,MAAO,UACX,QACI,MAAO,MAEnB,CAEH,CAnCD,CAmCGxC,EAAQxV,EAAQwV,QAAUxV,EAAQwV,MAAQ,CAAC,IAE9C,SAAWF,GACPA,EAAkB,KAAI,OACtBA,EAAkB,KAAI,MACzB,CAHD,CAGiBtV,EAAQsV,cAAgBtV,EAAQsV,YAAc,CAAC,IAChE,SAAWA,GAaPA,EAAYjG,WAZZ,SAAoBrK,GAChB,OAAKoR,EAAGnN,OAAOjE,IAID,UADdA,EAAQA,EAAMiT,eAEH3C,EAAYlE,KAJZkE,EAAY4C,IAS3B,CAEH,CAdD,CAcG5C,EAActV,EAAQsV,cAAgBtV,EAAQsV,YAAc,CAAC,IAEhE,SAAWD,GACPA,EAAqBjM,KAAO,IAAIqM,EAAW1B,iBAAiB,aAC/D,CAFD,CAEGsB,EAAuBrV,EAAQqV,uBAAyBrV,EAAQqV,qBAAuB,CAAC,IAE3F,SAAWD,GACPA,EAAqBhM,KAAO,IAAIqM,EAAW1B,iBAAiB,aAC/D,CAFD,CAEGqB,EAAuBpV,EAAQoV,uBAAyBpV,EAAQoV,qBAAuB,CAAC,IAE3F,SAAWD,GAIPA,EAAiBA,EAAyB,OAAI,GAAK,SAInDA,EAAiBA,EAA2B,SAAI,GAAK,WAIrDA,EAAiBA,EAAmC,iBAAI,GAAK,kBAChE,CAbD,CAaGA,EAAmBnV,EAAQmV,mBAAqBnV,EAAQmV,iBAAmB,CAAC,IAC/E,MAAMD,UAAwBzE,MAC1B,WAAAvI,CAAYiQ,EAAMC,GACdnL,MAAMmL,GACNhU,KAAK+T,KAAOA,EACZzY,OAAO2Y,eAAejU,KAAM8Q,EAAgBlU,UAChD,EAEJhB,EAAQkV,gBAAkBA,EAE1B,SAAWtG,GAKPA,EAAmBC,GAJnB,SAAY7J,GACR,MAAMyR,EAAYzR,EAClB,OAAOyR,GAAaL,EAAG9W,KAAKmX,EAAU6B,mBAC1C,CAEH,CAND,CAMG1J,EAAqB5O,EAAQ4O,qBAAuB5O,EAAQ4O,mBAAqB,CAAC,IAErF,SAAWyI,GAKPA,EAA+BxI,GAJ/B,SAAY7J,GACR,MAAMyR,EAAYzR,EAClB,OAAOyR,SAAiCvU,IAAnBuU,EAAU8B,MAAyC,OAAnB9B,EAAU8B,OAAkBnC,EAAG9W,KAAKmX,EAAU+B,sCAAyDtW,IAAtBuU,EAAU1E,SAAyBqE,EAAG9W,KAAKmX,EAAU1E,SAC/L,CAEH,CAND,CAMGsF,EAAiCrX,EAAQqX,iCAAmCrX,EAAQqX,+BAAiC,CAAC,IAEzH,SAAWD,GAKPA,EAAoCvI,GAJpC,SAAY7J,GACR,MAAMyR,EAAYzR,EAClB,OAAOyR,GAAgC,YAAnBA,EAAU8B,MAAsBnC,EAAG9W,KAAKmX,EAAU+B,sCAAyDtW,IAAtBuU,EAAU1E,SAAyBqE,EAAG9W,KAAKmX,EAAU1E,SAClK,CAEH,CAND,CAMGqF,EAAsCpX,EAAQoX,sCAAwCpX,EAAQoX,oCAAsC,CAAC,IAExI,SAAWnC,GACPA,EAA6BJ,QAAUnV,OAAOoR,OAAO,CACjD0H,8BAA8BC,GACnB,IAAI5C,EAAe9C,0BAMlCkC,EAA6BpG,GAH7B,SAAY7J,GACR,OAAOqS,EAA+BxI,GAAG7J,IAAUoS,EAAoCvI,GAAG7J,EAC9F,CAEH,CAVD,CAUGiQ,EAA+BjV,EAAQiV,+BAAiCjV,EAAQiV,6BAA+B,CAAC,IAEnH,SAAWD,GACPA,EAA2BH,QAAUnV,OAAOoR,OAAO,CAC/C4H,iBAAgB,CAACC,EAAMC,IACZD,EAAKE,iBAAiBvB,EAAmBlO,KAAM,CAAEwP,OAE5D,OAAAE,CAAQL,GAAK,IAMjBzD,EAA2BnG,GAJ3B,SAAY7J,GACR,MAAMyR,EAAYzR,EAClB,OAAOyR,GAAaL,EAAG9W,KAAKmX,EAAUiC,mBAAqBtC,EAAG9W,KAAKmX,EAAUqC,QACjF,CAEH,CAZD,CAYG9D,EAA6BhV,EAAQgV,6BAA+BhV,EAAQgV,2BAA6B,CAAC,IAE7G,SAAWD,GACPA,EAAqBF,QAAUnV,OAAOoR,OAAO,CACzCiI,SAAU9D,EAA6BJ,QACvCmE,OAAQhE,EAA2BH,UAMvCE,EAAqBlG,GAJrB,SAAY7J,GACR,MAAMyR,EAAYzR,EAClB,OAAOyR,GAAaxB,EAA6BpG,GAAG4H,EAAUsC,WAAa/D,EAA2BnG,GAAG4H,EAAUuC,OACvH,CAEH,CAVD,CAUGjE,EAAuB/U,EAAQ+U,uBAAyB/U,EAAQ+U,qBAAuB,CAAC,IAE3F,SAAWD,GAKPA,EAAgBjG,GAJhB,SAAY7J,GACR,MAAMyR,EAAYzR,EAClB,OAAOyR,GAAaL,EAAG9W,KAAKmX,EAAUwC,cAC1C,CAEH,CAND,CAMGnE,EAAkB9U,EAAQ8U,kBAAoB9U,EAAQ8U,gBAAkB,CAAC,KAQrD9U,EAAQuS,oBAAsBvS,EAAQuS,kBAAoB,CAAC,IAD5D1D,GAJlB,SAAY7J,GACR,MAAMyR,EAAYzR,EAClB,OAAOyR,IAAc1B,EAAqBlG,GAAG4H,EAAUyC,uBAAyBtK,EAAmBC,GAAG4H,EAAU3H,qBAAuBgG,EAAgBjG,GAAG4H,EAAU0C,iBACxK,EAIJ,SAAW1B,GACPA,EAAgBA,EAAqB,IAAI,GAAK,MAC9CA,EAAgBA,EAA2B,UAAI,GAAK,YACpDA,EAAgBA,EAAwB,OAAI,GAAK,SACjDA,EAAgBA,EAA0B,SAAI,GAAK,UACtD,CALD,CAKGA,IAAoBA,EAAkB,CAAC,IAw8B1CzX,EAAQyM,wBAv8BR,SAAiC2M,EAAeC,EAAeC,EAAS5K,GACpE,MAAMD,OAAqBvM,IAAZoX,EAAwBA,EAAUtZ,EAAQ2O,WACzD,IAAI4K,EAAiB,EACjBC,EAA6B,EAC7BC,EAAgC,EACpC,MAAMC,EAAU,MAChB,IAAIC,EACJ,MAAMC,EAAkB,IAAInW,IAC5B,IAAIoW,EACJ,MAAMC,EAAuB,IAAIrW,IAC3BsW,EAAmB,IAAItW,IAC7B,IAAIkO,EAOAqI,EANAC,EAAe,IAAIvE,EAAYvC,UAC/B+G,EAAmB,IAAIzW,IACvB0W,EAAwB,IAAIC,IAC5BC,EAAgB,IAAI5W,IACpB6W,EAAQ9E,EAAMqC,IACd0C,EAAcjF,EAAY4C,KAE1BsC,EAAQ/C,EAAgBgD,IAC5B,MAAMC,EAAe,IAAI9E,EAASzI,QAC5BwN,EAAe,IAAI/E,EAASzI,QAC5ByN,EAA+B,IAAIhF,EAASzI,QAC5C0N,EAA2B,IAAIjF,EAASzI,QACxC2N,EAAiB,IAAIlF,EAASzI,QAC9B+L,EAAwBxK,GAAWA,EAAQwK,qBAAwBxK,EAAQwK,qBAAuBnE,EAAqBF,QAC7H,SAASkG,EAAsBnC,GAC3B,GAAW,OAAPA,EACA,MAAM,IAAInI,MAAM,4EAEpB,MAAO,OAASmI,EAAGvX,UACvB,CAuBA,SAASiX,EAAmB0C,GAE5B,CACA,SAASC,IACL,OAAOT,IAAU/C,EAAgByD,SACrC,CACA,SAASC,IACL,OAAOX,IAAU/C,EAAgB2D,MACrC,CACA,SAASC,KACL,OAAOb,IAAU/C,EAAgB6D,QACrC,CACA,SAASC,KACDf,IAAU/C,EAAgBgD,KAAOD,IAAU/C,EAAgByD,YAC3DV,EAAQ/C,EAAgB2D,OACxBT,EAAarN,UAAKpL,GAG1B,CAWA,SAASsZ,KACD7J,GAA+B,IAAtBsI,EAAapV,OAG1B8M,GAAQ,EAAIwE,EAAMvJ,WAAW+E,MAAMM,cAAa,KAC5CN,OAAQzP,EAkBhB,WACI,GAA0B,IAAtB+X,EAAapV,KACb,OAEJ,MAAMuT,EAAU6B,EAAawB,QAC7B,IACI,MAAMtC,EAAkBzK,GAASyK,gBAC7BrE,EAAgBjG,GAAGsK,GACnBA,EAAgBF,cAAcb,EAASa,IAGvCA,GAAcb,EAEtB,CACA,QACIoD,IACJ,CACJ,CAlCQE,EAAqB,IAE7B,CACA,SAASzC,GAAcb,GACf3C,EAAWZ,QAAQ8G,UAAUvD,GAsErC,SAAuBwD,GACnB,GAAIP,KAGA,OAEJ,SAASQ,EAAMC,EAAeC,EAAQC,GAClC,MAAM5D,EAAU,CACZ6D,QAASvC,EACTd,GAAIgD,EAAehD,IAEnBkD,aAAyBrG,EAAWxB,cACpCmE,EAAQjK,MAAQ2N,EAAcI,SAG9B9D,EAAQrU,YAA2B7B,IAAlB4Z,EAA8B,KAAOA,EAE1DK,GAAqB/D,EAAS2D,EAAQC,GACtC3C,EAAcvL,MAAMsK,GAASgE,OAAM,IAAM3N,EAAON,MAAM,6BAC1D,CACA,SAASkO,EAAWlO,EAAO4N,EAAQC,GAC/B,MAAM5D,EAAU,CACZ6D,QAASvC,EACTd,GAAIgD,EAAehD,GACnBzK,MAAOA,EAAM+N,UAEjBC,GAAqB/D,EAAS2D,EAAQC,GACtC3C,EAAcvL,MAAMsK,GAASgE,OAAM,IAAM3N,EAAON,MAAM,6BAC1D,EAyTJ,SAA8BiK,GAC1B,GAAIkC,IAAU9E,EAAMqC,KAAQmC,EAG5B,GAAIO,IAAgBjF,EAAY4C,KAAM,CAClC,IAAIvT,EACC2V,IAAU9E,EAAMwC,SAAWsC,IAAU9E,EAAMuC,UAAYK,EAAQkE,SAChE3X,EAAO,WAAW4X,GAAenE,EAAQkE,eAE7CtC,EAAOpC,IAAI,qBAAqBQ,EAAQ2D,aAAa3D,EAAQQ,QAASjU,EAC1E,MAEI6X,GAAc,kBAAmBpE,EAEzC,CAxTIqE,CAAqBb,GACrB,MAAMc,EAAU9C,EAAgBpU,IAAIoW,EAAeG,QACnD,IAAI3S,EACAuT,EACAD,IACAtT,EAAOsT,EAAQtT,KACfuT,EAAiBD,EAAQE,SAE7B,MAAMZ,EAAYzY,KAAKC,MACvB,GAAImZ,GAAkBhD,EAAoB,CACtC,MAAMkD,EAAWjB,EAAehD,IAAMhO,OAAOrH,KAAKC,OAC5CsZ,EAAqBzF,EAA+BxI,GAAGqK,EAAqBH,UAC5EG,EAAqBH,SAASP,8BAA8BqE,GAC5D3D,EAAqBH,SAASP,8BAA8BoD,GACxC,OAAtBA,EAAehD,IAAeuB,EAAsB5U,IAAIqW,EAAehD,KACvEkE,EAAmB9F,SAEG,OAAtB4E,EAAehD,IACfyB,EAAc9V,IAAIsY,EAAUC,GAEhC,IACI,IAAIC,EACJ,GAAIJ,EACA,QAA8Bza,IAA1B0Z,EAAeU,OAAsB,CACrC,QAAapa,IAATkH,GAA8C,IAAxBA,EAAK4T,eAE3B,YADAX,EAAW,IAAI5G,EAAWxB,cAAcwB,EAAWzB,WAAWiJ,cAAe,WAAWrB,EAAeG,kBAAkB3S,EAAK4T,4CAA6CpB,EAAeG,OAAQC,GAGtMe,EAAgBJ,EAAeG,EAAmB5F,MACtD,MACK,GAAInW,MAAM2G,QAAQkU,EAAeU,QAAS,CAC3C,QAAapa,IAATkH,GAAsBA,EAAK8T,sBAAwBzH,EAAWrC,oBAAoB+J,OAElF,YADAd,EAAW,IAAI5G,EAAWxB,cAAcwB,EAAWzB,WAAWiJ,cAAe,WAAWrB,EAAeG,yEAA0EH,EAAeG,OAAQC,GAG5Me,EAAgBJ,KAAkBf,EAAeU,OAAQQ,EAAmB5F,MAChF,KACK,CACD,QAAahV,IAATkH,GAAsBA,EAAK8T,sBAAwBzH,EAAWrC,oBAAoBgK,WAElF,YADAf,EAAW,IAAI5G,EAAWxB,cAAcwB,EAAWzB,WAAWiJ,cAAe,WAAWrB,EAAeG,yEAA0EH,EAAeG,OAAQC,GAG5Me,EAAgBJ,EAAef,EAAeU,OAAQQ,EAAmB5F,MAC7E,MAEKyC,IACLoD,EAAgBpD,EAAmBiC,EAAeG,OAAQH,EAAeU,OAAQQ,EAAmB5F,QAExG,MAAMmG,EAAUN,EACXA,EAIIM,EAAQvN,KACbuN,EAAQvN,MAAMgM,IACVzB,EAAciD,OAAOT,GACrBhB,EAAMC,EAAeF,EAAeG,OAAQC,EAAU,IACvD7N,IACCkM,EAAciD,OAAOT,GACjB1O,aAAiBsH,EAAWxB,cAC5BoI,EAAWlO,EAAOyN,EAAeG,OAAQC,GAEpC7N,GAASiI,EAAGnN,OAAOkF,EAAMiK,SAC9BiE,EAAW,IAAI5G,EAAWxB,cAAcwB,EAAWzB,WAAWuJ,cAAe,WAAW3B,EAAeG,+BAA+B5N,EAAMiK,WAAYwD,EAAeG,OAAQC,GAG/KK,EAAW,IAAI5G,EAAWxB,cAAcwB,EAAWzB,WAAWuJ,cAAe,WAAW3B,EAAeG,6DAA8DH,EAAeG,OAAQC,EAChM,KAIJ3B,EAAciD,OAAOT,GACrBhB,EAAMkB,EAAenB,EAAeG,OAAQC,KAtB5C3B,EAAciD,OAAOT,GAhEjC,SAAsB9Y,EAAQgY,EAAQC,QAGnB9Z,IAAX6B,IACAA,EAAS,MAEb,MAAMqU,EAAU,CACZ6D,QAASvC,EACTd,GAAIgD,EAAehD,GACnB7U,OAAQA,GAEZoY,GAAqB/D,EAAS2D,EAAQC,GACtC3C,EAAcvL,MAAMsK,GAASgE,OAAM,IAAM3N,EAAON,MAAM,6BAC1D,CAoDYqP,CAAaT,EAAenB,EAAeG,OAAQC,GAuB3D,CACA,MAAO7N,GACHkM,EAAciD,OAAOT,GACjB1O,aAAiBsH,EAAWxB,cAC5B4H,EAAM1N,EAAOyN,EAAeG,OAAQC,GAE/B7N,GAASiI,EAAGnN,OAAOkF,EAAMiK,SAC9BiE,EAAW,IAAI5G,EAAWxB,cAAcwB,EAAWzB,WAAWuJ,cAAe,WAAW3B,EAAeG,+BAA+B5N,EAAMiK,WAAYwD,EAAeG,OAAQC,GAG/KK,EAAW,IAAI5G,EAAWxB,cAAcwB,EAAWzB,WAAWuJ,cAAe,WAAW3B,EAAeG,6DAA8DH,EAAeG,OAAQC,EAEpM,CACJ,MAEIK,EAAW,IAAI5G,EAAWxB,cAAcwB,EAAWzB,WAAWyJ,eAAgB,oBAAoB7B,EAAeG,UAAWH,EAAeG,OAAQC,EAE3J,CA3MQ0B,CAActF,GAET3C,EAAWZ,QAAQ8I,eAAevF,GAoP/C,SAA4BA,GACxB,GAAIiD,KAEA,OAEJ,IAAIjS,EACAwU,EACJ,GAAIxF,EAAQ2D,SAAWzE,EAAmBlO,KAAK2S,OAAQ,CACnD,MAAM8B,EAAWzF,EAAQkE,OAAO1D,GAGhC,OAFAuB,EAAsBmD,OAAOO,QAC7BC,GAA0B1F,EAE9B,CACK,CACD,MAAMsE,EAAU5C,EAAqBtU,IAAI4S,EAAQ2D,QAC7CW,IACAkB,EAAsBlB,EAAQE,QAC9BxT,EAAOsT,EAAQtT,KAEvB,CACA,GAAIwU,GAAuB/D,EACvB,IAEI,GADAiE,GAA0B1F,GACtBwF,EACA,QAAuB1b,IAAnBkW,EAAQkE,YACKpa,IAATkH,GAC4B,IAAxBA,EAAK4T,gBAAwB5T,EAAK8T,sBAAwBzH,EAAWrC,oBAAoB+J,QACzF1O,EAAON,MAAM,gBAAgBiK,EAAQ2D,kBAAkB3S,EAAK4T,4CAGpEY,SAEC,GAAI7c,MAAM2G,QAAQ0Q,EAAQkE,QAAS,CAGpC,MAAMA,EAASlE,EAAQkE,OACnBlE,EAAQ2D,SAAWxE,EAAqBnO,KAAK2S,QAA4B,IAAlBO,EAAOnY,QAAgBmO,EAAczD,GAAGyN,EAAO,IACtGsB,EAAoB,CAAE1G,MAAOoF,EAAO,GAAItX,MAAOsX,EAAO,WAGzCpa,IAATkH,IACIA,EAAK8T,sBAAwBzH,EAAWrC,oBAAoB+J,QAC5D1O,EAAON,MAAM,gBAAgBiK,EAAQ2D,yEAErC3S,EAAK4T,iBAAmB5E,EAAQkE,OAAOnY,QACvCsK,EAAON,MAAM,gBAAgBiK,EAAQ2D,kBAAkB3S,EAAK4T,sCAAsCV,EAAOnY,qBAGjHyZ,KAAuBtB,GAE/B,WAEiBpa,IAATkH,GAAsBA,EAAK8T,sBAAwBzH,EAAWrC,oBAAoBgK,YAClF3O,EAAON,MAAM,gBAAgBiK,EAAQ2D,yEAEzC6B,EAAoBxF,EAAQkE,aAG3BzC,GACLA,EAAwBzB,EAAQ2D,OAAQ3D,EAAQkE,OAExD,CACA,MAAOnO,GACCA,EAAMiK,QACN3J,EAAON,MAAM,yBAAyBiK,EAAQ2D,gCAAgC5N,EAAMiK,WAGpF3J,EAAON,MAAM,yBAAyBiK,EAAQ2D,+BAEtD,MAGAnB,EAA6BtN,KAAK8K,EAE1C,CA7TQ2F,CAAmB3F,GAEd3C,EAAWZ,QAAQmJ,WAAW5F,GAuM3C,SAAwB6F,GACpB,IAAI5C,KAIJ,GAA2B,OAAvB4C,EAAgBrF,GACZqF,EAAgB9P,MAChBM,EAAON,MAAM,qDAAqDiD,KAAKC,UAAU4M,EAAgB9P,WAAOjM,EAAW,MAGnHuM,EAAON,MAAM,oFAGhB,CACD,MAAMpJ,EAAMkZ,EAAgBrF,GACtBsF,EAAkBhE,EAAiB1U,IAAIT,GAE7C,GAgOR,SAA+BqT,EAAS8F,GACpC,GAAI5D,IAAU9E,EAAMqC,KAAQmC,EAG5B,GAAIO,IAAgBjF,EAAY4C,KAAM,CAClC,IAAIvT,EAcJ,GAbI2V,IAAU9E,EAAMwC,SAAWsC,IAAU9E,EAAMuC,UACvCK,EAAQjK,OAASiK,EAAQjK,MAAMxJ,KAC/BA,EAAO,eAAe4X,GAAenE,EAAQjK,MAAMxJ,YAG/CyT,EAAQrU,OACRY,EAAO,WAAW4X,GAAenE,EAAQrU,mBAElB7B,IAAlBkW,EAAQjK,QACbxJ,EAAO,4BAIfuZ,EAAiB,CACjB,MAAM/P,EAAQiK,EAAQjK,MAAQ,oBAAoBiK,EAAQjK,MAAMiK,YAAYA,EAAQjK,MAAMgK,SAAW,GACrG6B,EAAOpC,IAAI,sBAAsBsG,EAAgBnC,aAAa3D,EAAQQ,WAAWrV,KAAKC,MAAQ0a,EAAgBC,gBAAgBhQ,IAASxJ,EAC3I,MAEIqV,EAAOpC,IAAI,qBAAqBQ,EAAQQ,sCAAuCjU,EAEvF,MAEI6X,GAAc,mBAAoBpE,EAE1C,CA/PQgG,CAAsBH,EAAiBC,QACfhc,IAApBgc,EAA+B,CAC/BhE,EAAiBoD,OAAOvY,GACxB,IACI,GAAIkZ,EAAgB9P,MAAO,CACvB,MAAMA,EAAQ8P,EAAgB9P,MAC9B+P,EAAgB7P,OAAO,IAAIoH,EAAWxB,cAAc9F,EAAMgK,KAAMhK,EAAMiK,QAASjK,EAAMxJ,MACzF,KACK,SAA+BzC,IAA3B+b,EAAgBla,OAIrB,MAAM,IAAI0M,MAAM,wBAHhByN,EAAgBhQ,QAAQ+P,EAAgBla,OAI5C,CACJ,CACA,MAAOoK,GACCA,EAAMiK,QACN3J,EAAON,MAAM,qBAAqB+P,EAAgBnC,gCAAgC5N,EAAMiK,WAGxF3J,EAAON,MAAM,qBAAqB+P,EAAgBnC,+BAE1D,CACJ,CACJ,CACJ,CA/OQsC,CAAejG,GA2TvB,SAA8BA,GAC1B,IAAKA,EAED,YADA3J,EAAON,MAAM,2BAGjBM,EAAON,MAAM,6EAA6EiD,KAAKC,UAAU+G,EAAS,KAAM,MAExH,MAAM6F,EAAkB7F,EACxB,GAAIhC,EAAGnN,OAAOgV,EAAgBrF,KAAOxC,EAAGkI,OAAOL,EAAgBrF,IAAK,CAChE,MAAM7T,EAAMkZ,EAAgBrF,GACtB2F,EAAkBrE,EAAiB1U,IAAIT,GACzCwZ,GACAA,EAAgBlQ,OAAO,IAAIoC,MAAM,qEAEzC,CACJ,CAvUQ+N,CAAqBpG,EAE7B,CA1BAgB,EAAcnJ,QAAQsL,IACtBnC,EAAc/I,SAPd,SAA0BlC,GACtBuM,EAAapN,KAAK,CAACa,OAAOjM,OAAWA,GACzC,IAMAmX,EAAcpJ,QAAQsL,IACtBlC,EAAchJ,SANd,SAA2B1L,GACvB+V,EAAapN,KAAK3I,EACtB,IA8CA,MAAMgJ,GAAYyK,IACd,IAGI,GAAI3C,EAAWZ,QAAQ8I,eAAevF,IAAYA,EAAQ2D,SAAWzE,EAAmBlO,KAAK2S,OAAQ,CACjG,MAAM8B,EAAWzF,EAAQkE,OAAO1D,GAC1B7T,EAAMgW,EAAsB8C,GAC5BY,EAAWxE,EAAazU,IAAIT,GAClC,GAAI0Q,EAAWZ,QAAQ8G,UAAU8C,GAAW,CACxC,MAAMC,EAAWhQ,GAASI,mBACpB6P,EAAYD,GAAYA,EAASpG,mBAAsBoG,EAASpG,mBAAmBmG,EAAUnG,QAAsBA,EACzH,GAAIqG,SAAgCzc,IAAnByc,EAASxQ,YAA2CjM,IAApByc,EAAS5a,QAMtD,OALAkW,EAAaqD,OAAOvY,GACpBsV,EAAciD,OAAOO,GACrBc,EAAS/F,GAAK6F,EAAS7F,GACvBuD,GAAqBwC,EAAUvG,EAAQ2D,OAAQxY,KAAKC,YACpD6V,EAAcvL,MAAM6Q,GAAUvC,OAAM,IAAM3N,EAAON,MAAM,kDAG/D,CACA,MAAMyQ,EAAoBvE,EAAc7U,IAAIqY,GAE5C,QAA0B3b,IAAtB0c,EAGA,OAFAA,EAAkB5H,cAClB8G,GAA0B1F,GAM1B+B,EAAsB0E,IAAIhB,EAElC,EAjHR,SAA2BiB,EAAO1G,GAXlC,IAAgCQ,EAYxBnD,EAAWZ,QAAQ8G,UAAUvD,GAC7B0G,EAAMva,IAAIwW,EAAsB3C,EAAQQ,IAAKR,GAExC3C,EAAWZ,QAAQmJ,WAAW5F,GACnC0G,EAAMva,IAfC,QADiBqU,EAgBSR,EAAQQ,IAdlC,kBAAoBa,GAA+BpY,WAGnD,OAASuX,EAAGvX,WAW2B+W,GAG9C0G,EAAMva,IAVH,UAAYiV,GAA4BnY,WAUH+W,EAEhD,CAwGQ2G,CAAkB9E,EAAc7B,EACpC,CACA,QACIoD,IACJ,GA8QJ,SAASe,GAAeD,GACpB,GAAIA,QAGJ,OAAQhC,GACJ,KAAK9E,EAAMwC,QACP,OAAO5G,KAAKC,UAAUiL,EAAQ,KAAM,GACxC,KAAK9G,EAAMuC,QACP,OAAO3G,KAAKC,UAAUiL,GAC1B,QACI,OAEZ,CAoCA,SAASH,GAAqB/D,EAAS2D,EAAQC,GAC3C,GAAI1B,IAAU9E,EAAMqC,KAAQmC,EAG5B,GAAIO,IAAgBjF,EAAY4C,KAAM,CAClC,IAAIvT,EACA2V,IAAU9E,EAAMwC,SAAWsC,IAAU9E,EAAMuC,UACvCK,EAAQjK,OAASiK,EAAQjK,MAAMxJ,KAC/BA,EAAO,eAAe4X,GAAenE,EAAQjK,MAAMxJ,YAG/CyT,EAAQrU,OACRY,EAAO,WAAW4X,GAAenE,EAAQrU,mBAElB7B,IAAlBkW,EAAQjK,QACbxJ,EAAO,4BAInBqV,EAAOpC,IAAI,qBAAqBmE,QAAa3D,EAAQQ,iCAAiCrV,KAAKC,MAAQwY,MAAerX,EACtH,MAEI6X,GAAc,gBAAiBpE,EAEvC,CAgBA,SAAS0F,GAA0B1F,GAC/B,GAAIkC,IAAU9E,EAAMqC,KAAQmC,GAAU5B,EAAQ2D,SAAW3G,EAAqBhM,KAAK2S,OAGnF,GAAIxB,IAAgBjF,EAAY4C,KAAM,CAClC,IAAIvT,EACA2V,IAAU9E,EAAMwC,SAAWsC,IAAU9E,EAAMuC,UAEvCpT,EADAyT,EAAQkE,OACD,WAAWC,GAAenE,EAAQkE,cAGlC,+BAGftC,EAAOpC,IAAI,0BAA0BQ,EAAQ2D,WAAYpX,EAC7D,MAEI6X,GAAc,uBAAwBpE,EAE9C,CAgCA,SAASoE,GAAcpT,EAAMgP,GACzB,IAAK4B,GAAUM,IAAU9E,EAAMqC,IAC3B,OAEJ,MAAMmH,EAAa,CACfC,cAAc,EACd7V,OACAgP,UACA8G,UAAW3b,KAAKC,OAEpBwW,EAAOpC,IAAIoH,EACf,CACA,SAASG,KACL,GAAIhE,IACA,MAAM,IAAIjG,EAAgBC,EAAiBiG,OAAQ,yBAEvD,GAAIC,KACA,MAAM,IAAInG,EAAgBC,EAAiBmG,SAAU,0BAE7D,CAWA,SAAS8D,GAAgBC,GACrB,YAAcnd,IAAVmd,EACO,KAGAA,CAEf,CACA,SAASC,GAAgBD,GACrB,OAAc,OAAVA,OACA,EAGOA,CAEf,CACA,SAASE,GAAaF,GAClB,OAAOA,UAA0Cte,MAAM2G,QAAQ2X,IAA2B,iBAAVA,CACpF,CACA,SAASG,GAAmBtC,EAAqBmC,GAC7C,OAAQnC,GACJ,KAAKzH,EAAWrC,oBAAoBqM,KAChC,OAAIF,GAAaF,GACNC,GAAgBD,GAGhB,CAACD,GAAgBC,IAEhC,KAAK5J,EAAWrC,oBAAoB+J,OAChC,IAAKoC,GAAaF,GACd,MAAM,IAAI5O,MAAM,mEAEpB,OAAO6O,GAAgBD,GAC3B,KAAK5J,EAAWrC,oBAAoBgK,WAChC,MAAO,CAACgC,GAAgBC,IAC5B,QACI,MAAM,IAAI5O,MAAM,+BAA+ByM,EAAoB7b,cAE/E,CACA,SAASqe,GAAqBtW,EAAMkT,GAChC,IAAIvY,EACJ,MAAMiZ,EAAiB5T,EAAK4T,eAC5B,OAAQA,GACJ,KAAK,EACDjZ,OAAS7B,EACT,MACJ,KAAK,EACD6B,EAASyb,GAAmBpW,EAAK8T,oBAAqBZ,EAAO,IAC7D,MACJ,QACIvY,EAAS,GACT,IAAK,IAAI4b,EAAI,EAAGA,EAAIrD,EAAOnY,QAAUwb,EAAI3C,EAAgB2C,IACrD5b,EAAO2B,KAAK0Z,GAAgB9C,EAAOqD,KAEvC,GAAIrD,EAAOnY,OAAS6Y,EAChB,IAAK,IAAI2C,EAAIrD,EAAOnY,OAAQwb,EAAI3C,EAAgB2C,IAC5C5b,EAAO2B,KAAK,MAK5B,OAAO3B,CACX,CACA,MAAM6b,GAAa,CACf/G,iBAAkB,CAACzP,KAASgC,KAExB,IAAI2Q,EACA8D,EACJ,GAHAV,KAGI/I,EAAGnN,OAAOG,GAAO,CACjB2S,EAAS3S,EACT,MAAM0W,EAAQ1U,EAAK,GACnB,IAAI2U,EAAa,EACb7C,EAAsBzH,EAAWrC,oBAAoBqM,KACrDhK,EAAWrC,oBAAoBvE,GAAGiR,KAClCC,EAAa,EACb7C,EAAsB4C,GAE1B,IAAIE,EAAW5U,EAAKjH,OACpB,MAAM6Y,EAAiBgD,EAAWD,EAClC,OAAQ/C,GACJ,KAAK,EACD6C,OAAgB3d,EAChB,MACJ,KAAK,EACD2d,EAAgBL,GAAmBtC,EAAqB9R,EAAK2U,IAC7D,MACJ,QACI,GAAI7C,IAAwBzH,EAAWrC,oBAAoB+J,OACvD,MAAM,IAAI1M,MAAM,YAAYuM,gEAEhC6C,EAAgBzU,EAAKpD,MAAM+X,EAAYC,GAAU7W,KAAInE,GAASoa,GAAgBpa,KAG1F,KACK,CACD,MAAMsX,EAASlR,EACf2Q,EAAS3S,EAAK2S,OACd8D,EAAgBH,GAAqBtW,EAAMkT,EAC/C,CACA,MAAM2D,EAAsB,CACxBhE,QAASvC,EACTqC,OAAQA,EACRO,OAAQuD,GAGZ,OAtPR,SAAkCzH,GAC9B,GAAIkC,IAAU9E,EAAMqC,KAAQmC,EAG5B,GAAIO,IAAgBjF,EAAY4C,KAAM,CAClC,IAAIvT,EACA2V,IAAU9E,EAAMwC,SAAWsC,IAAU9E,EAAMuC,UAEvCpT,EADAyT,EAAQkE,OACD,WAAWC,GAAenE,EAAQkE,cAGlC,+BAGftC,EAAOpC,IAAI,yBAAyBQ,EAAQ2D,WAAYpX,EAC5D,MAEI6X,GAAc,oBAAqBpE,EAE3C,CAkOQ8H,CAAyBD,GAClB5G,EAAcvL,MAAMmS,GAAqB7D,OAAOjO,IAEnD,MADAM,EAAON,MAAM,gCACPA,CAAK,GACb,EAENgS,eAAgB,CAAC/W,EAAMwT,KAEnB,IAAIb,EAcJ,OAfAoD,KAEI/I,EAAG9W,KAAK8J,GACRyQ,EAA0BzQ,EAErBwT,IACDxG,EAAGnN,OAAOG,IACV2S,EAAS3S,EACT0Q,EAAqBvV,IAAI6E,EAAM,CAAEA,UAAMlH,EAAW0a,cAGlDb,EAAS3S,EAAK2S,OACdjC,EAAqBvV,IAAI6E,EAAK2S,OAAQ,CAAE3S,OAAMwT,cAG/C,CACH7K,QAAS,UACU7P,IAAX6Z,EACAjC,EAAqBwD,OAAOvB,GAG5BlC,OAA0B3X,CAC9B,EAEP,EAELke,WAAY,CAACC,EAAOnJ,EAAO0F,KACvB,GAAI7C,EAAiBxU,IAAI2R,GACrB,MAAM,IAAIzG,MAAM,8BAA8ByG,wBAGlD,OADA6C,EAAiBxV,IAAI2S,EAAO0F,GACrB,CACH7K,QAAS,KACLgI,EAAiBuD,OAAOpG,EAAM,EAErC,EAELoJ,aAAc,CAACD,EAAOnJ,EAAOlS,IAGlB4a,GAAW/G,iBAAiBtB,EAAqBnO,KAAM,CAAE8N,QAAOlS,UAE3Eub,oBAAqB1F,EAAyBxN,MAC9CmT,YAAa,CAACpX,KAASgC,KAGnB,IAAI2Q,EACA8D,EACA3I,EACJ,GALAiI,KAhKR,WACI,IAAKlE,IACD,MAAM,IAAIxK,MAAM,uBAExB,CA6JQgQ,GAIIrK,EAAGnN,OAAOG,GAAO,CACjB2S,EAAS3S,EACT,MAAM0W,EAAQ1U,EAAK,GACbsV,EAAOtV,EAAKA,EAAKjH,OAAS,GAChC,IAAI4b,EAAa,EACb7C,EAAsBzH,EAAWrC,oBAAoBqM,KACrDhK,EAAWrC,oBAAoBvE,GAAGiR,KAClCC,EAAa,EACb7C,EAAsB4C,GAE1B,IAAIE,EAAW5U,EAAKjH,OAChB0R,EAAe/C,kBAAkBjE,GAAG6R,KACpCV,GAAsB,EACtB9I,EAAQwJ,GAEZ,MAAM1D,EAAiBgD,EAAWD,EAClC,OAAQ/C,GACJ,KAAK,EACD6C,OAAgB3d,EAChB,MACJ,KAAK,EACD2d,EAAgBL,GAAmBtC,EAAqB9R,EAAK2U,IAC7D,MACJ,QACI,GAAI7C,IAAwBzH,EAAWrC,oBAAoB+J,OACvD,MAAM,IAAI1M,MAAM,YAAYuM,2DAEhC6C,EAAgBzU,EAAKpD,MAAM+X,EAAYC,GAAU7W,KAAInE,GAASoa,GAAgBpa,KAG1F,KACK,CACD,MAAMsX,EAASlR,EACf2Q,EAAS3S,EAAK2S,OACd8D,EAAgBH,GAAqBtW,EAAMkT,GAC3C,MAAMU,EAAiB5T,EAAK4T,eAC5B9F,EAAQrB,EAAe/C,kBAAkBjE,GAAGyN,EAAOU,IAAmBV,EAAOU,QAAkB9a,CACnG,CACA,MAAM0W,EAAKW,IACX,IAAIoH,EACAzJ,IACAyJ,EAAazJ,EAAMX,yBAAwB,KACvC,MAAM/J,EAAI0M,EAAqBF,OAAON,iBAAiBkH,GAAYhH,GACnE,YAAU1W,IAANsK,GACAiC,EAAOmJ,IAAI,qEAAqEgB,KACzE3K,QAAQC,WAGR1B,EAAE4P,OAAM,KACX3N,EAAOmJ,IAAI,wCAAwCgB,WAAY,GAEvE,KAGR,MAAMgD,EAAiB,CACnBK,QAASvC,EACTd,GAAIA,EACJmD,OAAQA,EACRO,OAAQuD,GAMZ,OA5XR,SAA6BzH,GACzB,GAAIkC,IAAU9E,EAAMqC,KAAQmC,EAG5B,GAAIO,IAAgBjF,EAAY4C,KAAM,CAClC,IAAIvT,EACC2V,IAAU9E,EAAMwC,SAAWsC,IAAU9E,EAAMuC,UAAYK,EAAQkE,SAChE3X,EAAO,WAAW4X,GAAenE,EAAQkE,eAE7CtC,EAAOpC,IAAI,oBAAoBQ,EAAQ2D,aAAa3D,EAAQQ,QAASjU,EACzE,MAEI6X,GAAc,eAAgBpE,EAEtC,CA0WQwI,CAAoBhF,GAC0C,mBAAnD1C,EAAqBF,OAAO6H,oBACnC3H,EAAqBF,OAAO6H,mBAAmBjF,GAE5C,IAAI3N,SAAQ6S,MAAO5S,EAASG,KAC/B,MAUM6P,EAAkB,CAAEnC,OAAQA,EAAQoC,WAAY5a,KAAKC,MAAO0K,QAVtC6S,IACxB7S,EAAQ6S,GACR7H,EAAqBF,OAAOF,QAAQF,GACpC+H,GAAY5O,SAAS,EAOsE1D,OALpE0S,IACvB1S,EAAO0S,GACP7H,EAAqBF,OAAOF,QAAQF,GACpC+H,GAAY5O,SAAS,GAGzB,UACUsH,EAAcvL,MAAM8N,GAC1B1B,EAAiB3V,IAAIqU,EAAIsF,EAC7B,CACA,MAAO/P,GAIH,MAHAM,EAAON,MAAM,2BAEb+P,EAAgB7P,OAAO,IAAIoH,EAAWxB,cAAcwB,EAAWzB,WAAWgN,kBAAmB7S,EAAMiK,QAAUjK,EAAMiK,QAAU,mBACvHjK,CACV,IACF,EAEN8S,UAAW,CAAC7X,EAAMwT,KACduC,KACA,IAAIpD,EAAS,KAkBb,OAjBIvE,EAAmB3I,GAAGzF,IACtB2S,OAAS7Z,EACTyX,EAAqBvQ,GAEhBgN,EAAGnN,OAAOG,IACf2S,EAAS,UACO7Z,IAAZ0a,IACAb,EAAS3S,EACTwQ,EAAgBrV,IAAI6E,EAAM,CAAEwT,QAASA,EAASxT,UAAMlH,WAIxCA,IAAZ0a,IACAb,EAAS3S,EAAK2S,OACdnC,EAAgBrV,IAAI6E,EAAK2S,OAAQ,CAAE3S,OAAMwT,aAG1C,CACH7K,QAAS,KACU,OAAXgK,SAGW7Z,IAAX6Z,EACAnC,EAAgB0D,OAAOvB,GAGvBpC,OAAqBzX,EACzB,EAEP,EAELgf,mBAAoB,IACThH,EAAiBrV,KAAO,EAEnCyV,MAAOwG,MAAOK,EAAQC,EAASC,KAC3B,IAAIC,GAAoB,EACpBC,EAAejM,EAAY4C,UACQhW,IAAnCmf,IACIjL,EAAGM,QAAQ2K,GACXC,EAAoBD,GAGpBC,EAAoBD,EAA+BxI,mBAAoB,EACvE0I,EAAeF,EAA+B9G,aAAejF,EAAY4C,OAGjFoC,EAAQ6G,EACR5G,EAAcgH,EAEVvH,EADAM,IAAU9E,EAAMqC,SACP3V,EAGAkf,GAETE,GAAsBnG,KAAeE,YAC/BuE,GAAW/G,iBAAiBxD,EAAqBjM,KAAM,CAAEpE,MAAOwQ,EAAMnU,SAAS8f,IACzF,EAEJ9Q,QAASqK,EAAarN,MACtB4C,QAAS0K,EAAatN,MACtBmU,wBAAyB5G,EAA6BvN,MACtDoU,UAAW3G,EAAezN,MAC1BiB,IAAK,KACD+K,EAAc/K,KAAK,EAEvByD,QAAS,KACL,GAAIsJ,KACA,OAEJb,EAAQ/C,EAAgB6D,SACxBR,EAAexN,UAAKpL,GACpB,MAAMiM,EAAQ,IAAIsH,EAAWxB,cAAcwB,EAAWzB,WAAW0N,wBAAyB,2DAC1F,IAAK,MAAMrE,KAAWnD,EAAiByH,SACnCtE,EAAQhP,OAAOF,GAEnB+L,EAAmB,IAAIzW,IACvB4W,EAAgB,IAAI5W,IACpB0W,EAAwB,IAAIC,IAC5BH,EAAe,IAAIvE,EAAYvC,UAE3BiD,EAAG9W,KAAK+Z,EAActH,UACtBsH,EAActH,UAEdqE,EAAG9W,KAAK8Z,EAAcrH,UACtBqH,EAAcrH,SAClB,EAEJrE,OAAQ,KACJyR,KA7VR,WACI,GAAIlE,IACA,MAAM,IAAI/F,EAAgBC,EAAiByM,iBAAkB,kCAErE,CA0VQC,GACArH,EAAQ/C,EAAgByD,UACxB9B,EAAc1L,OAAOC,GAAS,EAElCmU,QAAS,MAEL,EAAI3L,EAAMvJ,WAAWoD,QAAQ4H,IAAI,UAAU,GAmBnD,OAhBAgI,GAAWO,eAAe/K,EAAqBhM,MAAOkT,IAClD,GAAIhC,IAAU9E,EAAMqC,MAAQmC,EACxB,OAEJ,MAAM+H,EAAUzH,IAAU9E,EAAMwC,SAAWsC,IAAU9E,EAAMuC,QAC3DiC,EAAOpC,IAAI0E,EAAOlE,QAAS2J,EAAUzF,EAAOyF,aAAU7f,EAAU,IAEpE0d,GAAWO,eAAe5I,EAAqBnO,MAAOkT,IAClD,MAAMM,EAAU7C,EAAiBvU,IAAI8W,EAAOpF,OACxC0F,EACAA,EAAQN,EAAOtX,OAGf6V,EAAyBvN,KAAKgP,EAClC,IAEGsD,EACX,C,6BCrrCAlgB,OAAOqD,eAAe/C,EAAS,aAAc,CAAEgF,OAAO,IACtDhF,EAAQmQ,gBAAa,GASLnQ,EAAQmQ,aAAenQ,EAAQmQ,WAAa,CAAC,IAD9CzN,OALX,SAAgBpD,GACZ,MAAO,CACHyS,QAASzS,EAEjB,C,6BCRJI,OAAOqD,eAAe/C,EAAS,aAAc,CAAEgF,OAAO,IACtDhF,EAAQmN,QAAUnN,EAAQgT,WAAQ,EAClC,MAAMmD,EAAQ,EAAQ,QAEtB,SAAWnD,GACP,MAAMgP,EAAc,CAAE,OAAAjQ,GAAY,GAClCiB,EAAMqD,KAAO,WAAc,OAAO2L,CAAa,CAClD,CAHD,CAGWhiB,EAAQgT,QAAUhT,EAAQgT,MAAQ,CAAC,IAC9C,MAAMiP,EACF,GAAApD,CAAIlR,EAAUiJ,EAAU,KAAMsL,GACrB9d,KAAK+d,aACN/d,KAAK+d,WAAa,GAClB/d,KAAKge,UAAY,IAErBhe,KAAK+d,WAAWzc,KAAKiI,GACrBvJ,KAAKge,UAAU1c,KAAKkR,GAChB7V,MAAM2G,QAAQwa,IACdA,EAAOxc,KAAK,CAAEqM,QAAS,IAAM3N,KAAKie,OAAO1U,EAAUiJ,IAE3D,CACA,MAAAyL,CAAO1U,EAAUiJ,EAAU,MACvB,IAAKxS,KAAK+d,WACN,OAEJ,IAAIG,GAAoC,EACxC,IAAK,IAAI3C,EAAI,EAAG4C,EAAMne,KAAK+d,WAAWhe,OAAQwb,EAAI4C,EAAK5C,IACnD,GAAIvb,KAAK+d,WAAWxC,KAAOhS,EAAU,CACjC,GAAIvJ,KAAKge,UAAUzC,KAAO/I,EAItB,OAFAxS,KAAK+d,WAAWvf,OAAO+c,EAAG,QAC1Bvb,KAAKge,UAAUxf,OAAO+c,EAAG,GAIzB2C,GAAoC,CAE5C,CAEJ,GAAIA,EACA,MAAM,IAAI7R,MAAM,oFAExB,CACA,MAAA+R,IAAUpX,GACN,IAAKhH,KAAK+d,WACN,MAAO,GAEX,MAAMM,EAAM,GAAIC,EAAYte,KAAK+d,WAAWna,MAAM,GAAI2a,EAAWve,KAAKge,UAAUpa,MAAM,GACtF,IAAK,IAAI2X,EAAI,EAAG4C,EAAMG,EAAUve,OAAQwb,EAAI4C,EAAK5C,IAC7C,IACI8C,EAAI/c,KAAKgd,EAAU/C,GAAG1V,MAAM0Y,EAAShD,GAAIvU,GAC7C,CACA,MAAOzK,IAEH,EAAIwV,EAAMvJ,WAAWoD,QAAQ7B,MAAMxN,EACvC,CAEJ,OAAO8hB,CACX,CACA,OAAAG,GACI,OAAQxe,KAAK+d,YAAyC,IAA3B/d,KAAK+d,WAAWhe,MAC/C,CACA,OAAA4N,GACI3N,KAAK+d,gBAAajgB,EAClBkC,KAAKge,eAAYlgB,CACrB,EAEJ,MAAMiL,EACF,WAAAjF,CAAY2a,GACRze,KAAKye,SAAWA,CACpB,CAKA,SAAIxV,GA6BA,OA5BKjJ,KAAK0e,SACN1e,KAAK0e,OAAS,CAAC5S,EAAU6S,EAAUC,KAC1B5e,KAAK+d,aACN/d,KAAK+d,WAAa,IAAIF,GAEtB7d,KAAKye,UAAYze,KAAKye,SAASI,oBAAsB7e,KAAK+d,WAAWS,WACrExe,KAAKye,SAASI,mBAAmB7e,MAErCA,KAAK+d,WAAWtD,IAAI3O,EAAU6S,GAC9B,MAAMhf,EAAS,CACXgO,QAAS,KACA3N,KAAK+d,aAIV/d,KAAK+d,WAAWE,OAAOnS,EAAU6S,GACjChf,EAAOgO,QAAU5E,EAAQ+V,MACrB9e,KAAKye,UAAYze,KAAKye,SAASM,sBAAwB/e,KAAK+d,WAAWS,WACvExe,KAAKye,SAASM,qBAAqB/e,MACvC,GAMR,OAHIrD,MAAM2G,QAAQsb,IACdA,EAAYtd,KAAK3B,GAEdA,CAAM,GAGdK,KAAK0e,MAChB,CAKA,IAAAxV,CAAKD,GACGjJ,KAAK+d,YACL/d,KAAK+d,WAAWK,OAAO3gB,KAAKuC,KAAK+d,WAAY9U,EAErD,CACA,OAAA0E,GACQ3N,KAAK+d,aACL/d,KAAK+d,WAAWpQ,UAChB3N,KAAK+d,gBAAajgB,EAE1B,EAEJlC,EAAQmN,QAAUA,EAClBA,EAAQ+V,MAAQ,WAAc,C,6BCpH9B,SAASja,EAAOjE,GACZ,MAAwB,iBAAVA,GAAsBA,aAAiB4F,MACzD,CAcA,SAAStF,EAAMN,GACX,OAAOjE,MAAM2G,QAAQ1C,EACzB,CAxBAtF,OAAOqD,eAAe/C,EAAS,aAAc,CAAEgF,OAAO,IACtDhF,EAAQojB,YAAcpjB,EAAQsF,MAAQtF,EAAQV,KAAOU,EAAQmO,MAAQnO,EAAQse,OAASte,EAAQiJ,OAASjJ,EAAQ0W,aAAU,EAIzH1W,EAAQ0W,QAHR,SAAiB1R,GACb,OAAiB,IAAVA,IAA4B,IAAVA,CAC7B,EAKAhF,EAAQiJ,OAASA,EAIjBjJ,EAAQse,OAHR,SAAgBtZ,GACZ,MAAwB,iBAAVA,GAAsBA,aAAiBqe,MACzD,EAKArjB,EAAQmO,MAHR,SAAenJ,GACX,OAAOA,aAAiByL,KAC5B,EAKAzQ,EAAQV,KAHR,SAAc0F,GACV,MAAwB,mBAAVA,CAClB,EAKAhF,EAAQsF,MAAQA,EAIhBtF,EAAQojB,YAHR,SAAqBpe,GACjB,OAAOM,EAAMN,IAAUA,EAAMse,OAAMC,GAAQta,EAAOsa,IACtD,C,6BC5BA,IAAIC,EAGAtQ,EAFJxT,OAAOqD,eAAe/C,EAAS,aAAc,CAAEgF,OAAO,IACtDhF,EAAQiT,SAAWjT,EAAQmT,UAAYnT,EAAQkT,WAAQ,EAEvD,SAAWA,GACPA,EAAMmD,KAAO,EACbnD,EAAMuQ,MAAQ,EACdvQ,EAAMwQ,MAAQxQ,EAAMuQ,MACpBvQ,EAAMyQ,KAAO,EACbzQ,EAAM0Q,MAAQ1Q,EAAMyQ,IACvB,CAND,CAMGzQ,EAAQlT,EAAQkT,QAAUlT,EAAQkT,MAAQ,CAAC,IAC9C,MAAMC,EACF,WAAAjL,GACI9D,KAAKof,GAAM,YACXpf,KAAKyf,KAAO,IAAIpgB,IAChBW,KAAK0f,WAAQ5hB,EACbkC,KAAK2f,WAAQ7hB,EACbkC,KAAK4f,MAAQ,EACb5f,KAAK6f,OAAS,CAClB,CACA,KAAA5f,GACID,KAAKyf,KAAKxf,QACVD,KAAK0f,WAAQ5hB,EACbkC,KAAK2f,WAAQ7hB,EACbkC,KAAK4f,MAAQ,EACb5f,KAAK6f,QACT,CACA,OAAArB,GACI,OAAQxe,KAAK0f,QAAU1f,KAAK2f,KAChC,CACA,QAAIlf,GACA,OAAOT,KAAK4f,KAChB,CACA,SAAIlE,GACA,OAAO1b,KAAK0f,OAAO9e,KACvB,CACA,QAAI0b,GACA,OAAOtc,KAAK2f,OAAO/e,KACvB,CACA,GAAAO,CAAIR,GACA,OAAOX,KAAKyf,KAAKte,IAAIR,EACzB,CACA,GAAAS,CAAIT,EAAKmf,EAAQhR,EAAMmD,MACnB,MAAM8N,EAAO/f,KAAKyf,KAAKre,IAAIT,GAC3B,GAAKof,EAML,OAHID,IAAUhR,EAAMmD,MAChBjS,KAAK8f,MAAMC,EAAMD,GAEdC,EAAKnf,KAChB,CACA,GAAAT,CAAIQ,EAAKC,EAAOkf,EAAQhR,EAAMmD,MAC1B,IAAI8N,EAAO/f,KAAKyf,KAAKre,IAAIT,GACzB,GAAIof,EACAA,EAAKnf,MAAQA,EACTkf,IAAUhR,EAAMmD,MAChBjS,KAAK8f,MAAMC,EAAMD,OAGpB,CAED,OADAC,EAAO,CAAEpf,MAAKC,QAAOof,UAAMliB,EAAWmiB,cAAUniB,GACxCgiB,GACJ,KAAKhR,EAAMmD,KACPjS,KAAKkgB,YAAYH,GACjB,MACJ,KAAKjR,EAAMuQ,MACPrf,KAAKmgB,aAAaJ,GAClB,MACJ,KAAKjR,EAAMyQ,KAGX,QACIvf,KAAKkgB,YAAYH,GAGzB/f,KAAKyf,KAAKtf,IAAIQ,EAAKof,GACnB/f,KAAK4f,OACT,CACA,OAAO5f,IACX,CACA,OAAOW,GACH,QAASX,KAAKie,OAAOtd,EACzB,CACA,MAAAsd,CAAOtd,GACH,MAAMof,EAAO/f,KAAKyf,KAAKre,IAAIT,GAC3B,GAAKof,EAML,OAHA/f,KAAKyf,KAAKvG,OAAOvY,GACjBX,KAAKogB,WAAWL,GAChB/f,KAAK4f,QACEG,EAAKnf,KAChB,CACA,KAAAyW,GACI,IAAKrX,KAAK0f,QAAU1f,KAAK2f,MACrB,OAEJ,IAAK3f,KAAK0f,QAAU1f,KAAK2f,MACrB,MAAM,IAAItT,MAAM,gBAEpB,MAAM0T,EAAO/f,KAAK0f,MAIlB,OAHA1f,KAAKyf,KAAKvG,OAAO6G,EAAKpf,KACtBX,KAAKogB,WAAWL,GAChB/f,KAAK4f,QACEG,EAAKnf,KAChB,CACA,OAAAyf,CAAQC,EAAYpZ,GAChB,MAAMkP,EAAQpW,KAAK6f,OACnB,IAAIU,EAAUvgB,KAAK0f,MACnB,KAAOa,GAAS,CAOZ,GANIrZ,EACAoZ,EAAW7N,KAAKvL,EAAhBoZ,CAAyBC,EAAQ3f,MAAO2f,EAAQ5f,IAAKX,MAGrDsgB,EAAWC,EAAQ3f,MAAO2f,EAAQ5f,IAAKX,MAEvCA,KAAK6f,SAAWzJ,EAChB,MAAM,IAAI/J,MAAM,4CAEpBkU,EAAUA,EAAQP,IACtB,CACJ,CACA,IAAA3iB,GACI,MAAM+Y,EAAQpW,KAAK6f,OACnB,IAAIU,EAAUvgB,KAAK0f,MACnB,MAAMc,EAAW,CACb,CAACziB,OAAOyiB,UAAW,IACRA,EAEXR,KAAM,KACF,GAAIhgB,KAAK6f,SAAWzJ,EAChB,MAAM,IAAI/J,MAAM,4CAEpB,GAAIkU,EAAS,CACT,MAAM5gB,EAAS,CAAEiB,MAAO2f,EAAQ5f,IAAK8f,MAAM,GAE3C,OADAF,EAAUA,EAAQP,KACXrgB,CACX,CAEI,MAAO,CAAEiB,WAAO9C,EAAW2iB,MAAM,EACrC,GAGR,OAAOD,CACX,CACA,MAAAjD,GACI,MAAMnH,EAAQpW,KAAK6f,OACnB,IAAIU,EAAUvgB,KAAK0f,MACnB,MAAMc,EAAW,CACb,CAACziB,OAAOyiB,UAAW,IACRA,EAEXR,KAAM,KACF,GAAIhgB,KAAK6f,SAAWzJ,EAChB,MAAM,IAAI/J,MAAM,4CAEpB,GAAIkU,EAAS,CACT,MAAM5gB,EAAS,CAAEiB,MAAO2f,EAAQ3f,MAAO6f,MAAM,GAE7C,OADAF,EAAUA,EAAQP,KACXrgB,CACX,CAEI,MAAO,CAAEiB,WAAO9C,EAAW2iB,MAAM,EACrC,GAGR,OAAOD,CACX,CACA,OAAA3gB,GACI,MAAMuW,EAAQpW,KAAK6f,OACnB,IAAIU,EAAUvgB,KAAK0f,MACnB,MAAMc,EAAW,CACb,CAACziB,OAAOyiB,UAAW,IACRA,EAEXR,KAAM,KACF,GAAIhgB,KAAK6f,SAAWzJ,EAChB,MAAM,IAAI/J,MAAM,4CAEpB,GAAIkU,EAAS,CACT,MAAM5gB,EAAS,CAAEiB,MAAO,CAAC2f,EAAQ5f,IAAK4f,EAAQ3f,OAAQ6f,MAAM,GAE5D,OADAF,EAAUA,EAAQP,KACXrgB,CACX,CAEI,MAAO,CAAEiB,WAAO9C,EAAW2iB,MAAM,EACrC,GAGR,OAAOD,CACX,CACA,EAAEpB,EAAKrhB,OAAOW,YAAaX,OAAOyiB,aAC9B,OAAOxgB,KAAKH,SAChB,CACA,OAAA6gB,CAAQC,GACJ,GAAIA,GAAW3gB,KAAKS,KAChB,OAEJ,GAAgB,IAAZkgB,EAEA,YADA3gB,KAAKC,QAGT,IAAIsgB,EAAUvgB,KAAK0f,MACfkB,EAAc5gB,KAAKS,KACvB,KAAO8f,GAAWK,EAAcD,GAC5B3gB,KAAKyf,KAAKvG,OAAOqH,EAAQ5f,KACzB4f,EAAUA,EAAQP,KAClBY,IAEJ5gB,KAAK0f,MAAQa,EACbvgB,KAAK4f,MAAQgB,EACTL,IACAA,EAAQN,cAAWniB,GAEvBkC,KAAK6f,QACT,CACA,YAAAM,CAAaJ,GAET,GAAK/f,KAAK0f,OAAU1f,KAAK2f,MAGpB,KAAK3f,KAAK0f,MACX,MAAM,IAAIrT,MAAM,gBAGhB0T,EAAKC,KAAOhgB,KAAK0f,MACjB1f,KAAK0f,MAAMO,SAAWF,CAC1B,MARI/f,KAAK2f,MAAQI,EASjB/f,KAAK0f,MAAQK,EACb/f,KAAK6f,QACT,CACA,WAAAK,CAAYH,GAER,GAAK/f,KAAK0f,OAAU1f,KAAK2f,MAGpB,KAAK3f,KAAK2f,MACX,MAAM,IAAItT,MAAM,gBAGhB0T,EAAKE,SAAWjgB,KAAK2f,MACrB3f,KAAK2f,MAAMK,KAAOD,CACtB,MARI/f,KAAK0f,MAAQK,EASjB/f,KAAK2f,MAAQI,EACb/f,KAAK6f,QACT,CACA,UAAAO,CAAWL,GACP,GAAIA,IAAS/f,KAAK0f,OAASK,IAAS/f,KAAK2f,MACrC3f,KAAK0f,WAAQ5hB,EACbkC,KAAK2f,WAAQ7hB,OAEZ,GAAIiiB,IAAS/f,KAAK0f,MAAO,CAG1B,IAAKK,EAAKC,KACN,MAAM,IAAI3T,MAAM,gBAEpB0T,EAAKC,KAAKC,cAAWniB,EACrBkC,KAAK0f,MAAQK,EAAKC,IACtB,MACK,GAAID,IAAS/f,KAAK2f,MAAO,CAG1B,IAAKI,EAAKE,SACN,MAAM,IAAI5T,MAAM,gBAEpB0T,EAAKE,SAASD,UAAOliB,EACrBkC,KAAK2f,MAAQI,EAAKE,QACtB,KACK,CACD,MAAMD,EAAOD,EAAKC,KACZC,EAAWF,EAAKE,SACtB,IAAKD,IAASC,EACV,MAAM,IAAI5T,MAAM,gBAEpB2T,EAAKC,SAAWA,EAChBA,EAASD,KAAOA,CACpB,CACAD,EAAKC,UAAOliB,EACZiiB,EAAKE,cAAWniB,EAChBkC,KAAK6f,QACT,CACA,KAAAC,CAAMC,EAAMD,GACR,IAAK9f,KAAK0f,QAAU1f,KAAK2f,MACrB,MAAM,IAAItT,MAAM,gBAEpB,GAAKyT,IAAUhR,EAAMuQ,OAASS,IAAUhR,EAAMyQ,KAG9C,GAAIO,IAAUhR,EAAMuQ,MAAO,CACvB,GAAIU,IAAS/f,KAAK0f,MACd,OAEJ,MAAMM,EAAOD,EAAKC,KACZC,EAAWF,EAAKE,SAElBF,IAAS/f,KAAK2f,OAGdM,EAASD,UAAOliB,EAChBkC,KAAK2f,MAAQM,IAIbD,EAAKC,SAAWA,EAChBA,EAASD,KAAOA,GAGpBD,EAAKE,cAAWniB,EAChBiiB,EAAKC,KAAOhgB,KAAK0f,MACjB1f,KAAK0f,MAAMO,SAAWF,EACtB/f,KAAK0f,MAAQK,EACb/f,KAAK6f,QACT,MACK,GAAIC,IAAUhR,EAAMyQ,KAAM,CAC3B,GAAIQ,IAAS/f,KAAK2f,MACd,OAEJ,MAAMK,EAAOD,EAAKC,KACZC,EAAWF,EAAKE,SAElBF,IAAS/f,KAAK0f,OAGdM,EAAKC,cAAWniB,EAChBkC,KAAK0f,MAAQM,IAIbA,EAAKC,SAAWA,EAChBA,EAASD,KAAOA,GAEpBD,EAAKC,UAAOliB,EACZiiB,EAAKE,SAAWjgB,KAAK2f,MACrB3f,KAAK2f,MAAMK,KAAOD,EAClB/f,KAAK2f,MAAQI,EACb/f,KAAK6f,QACT,CACJ,CACA,MAAAgB,GACI,MAAMtgB,EAAO,GAIb,OAHAP,KAAKqgB,SAAQ,CAACzf,EAAOD,KACjBJ,EAAKe,KAAK,CAACX,EAAKC,GAAO,IAEpBL,CACX,CACA,QAAAugB,CAASvgB,GACLP,KAAKC,QACL,IAAK,MAAOU,EAAKC,KAAUL,EACvBP,KAAKG,IAAIQ,EAAKC,EAEtB,EAEJhF,EAAQmT,UAAYA,EAsCpBnT,EAAQiT,SArCR,cAAuBE,EACnB,WAAAjL,CAAYid,EAAOC,EAAQ,GACvBnY,QACA7I,KAAKihB,OAASF,EACd/gB,KAAKkhB,OAASliB,KAAKmiB,IAAIniB,KAAKC,IAAI,EAAG+hB,GAAQ,EAC/C,CACA,SAAID,GACA,OAAO/gB,KAAKihB,MAChB,CACA,SAAIF,CAAMA,GACN/gB,KAAKihB,OAASF,EACd/gB,KAAKohB,WACT,CACA,SAAIJ,GACA,OAAOhhB,KAAKkhB,MAChB,CACA,SAAIF,CAAMA,GACNhhB,KAAKkhB,OAASliB,KAAKmiB,IAAIniB,KAAKC,IAAI,EAAG+hB,GAAQ,GAC3ChhB,KAAKohB,WACT,CACA,GAAAhgB,CAAIT,EAAKmf,EAAQhR,EAAM0Q,OACnB,OAAO3W,MAAMzH,IAAIT,EAAKmf,EAC1B,CACA,IAAAuB,CAAK1gB,GACD,OAAOkI,MAAMzH,IAAIT,EAAKmO,EAAMmD,KAChC,CACA,GAAA9R,CAAIQ,EAAKC,GAGL,OAFAiI,MAAM1I,IAAIQ,EAAKC,EAAOkO,EAAMyQ,MAC5Bvf,KAAKohB,YACEphB,IACX,CACA,SAAAohB,GACQphB,KAAKS,KAAOT,KAAKihB,QACjBjhB,KAAK0gB,QAAQ1hB,KAAKsiB,MAAMthB,KAAKihB,OAASjhB,KAAKkhB,QAEnD,E,6BCtYJ5lB,OAAOqD,eAAe/C,EAAS,aAAc,CAAEgF,OAAO,IACtDhF,EAAQgP,2BAAwB,EAiJhChP,EAAQgP,sBA7IR,MACI,WAAA9G,CAAY+G,EAAW,SACnB7K,KAAKkL,UAAYL,EACjB7K,KAAKuhB,QAAU,GACfvhB,KAAKwhB,aAAe,CACxB,CACA,YAAI3W,GACA,OAAO7K,KAAKkL,SAChB,CACA,MAAAuW,CAAOC,GACH,MAAMC,EAA4B,iBAAVD,EAAqB1hB,KAAKiL,WAAWyW,EAAO1hB,KAAKkL,WAAawW,EACtF1hB,KAAKuhB,QAAQjgB,KAAKqgB,GAClB3hB,KAAKwhB,cAAgBG,EAAS5d,UAClC,CACA,cAAA6d,CAAeC,GAAgB,GAC3B,GAA4B,IAAxB7hB,KAAKuhB,QAAQxhB,OACb,OAEJ,IAAIqW,EAAQ,EACR0L,EAAa,EACbC,EAAS,EACTC,EAAiB,EACrBC,EAAK,KAAOH,EAAa9hB,KAAKuhB,QAAQxhB,QAAQ,CAC1C,MAAM2hB,EAAQ1hB,KAAKuhB,QAAQO,GAEnB,IADRC,EAAS,EACMA,EAASL,EAAM3hB,QAAQ,CAElC,OADc2hB,EAAMK,IAEhB,KA/BT,GAgCa,OAAQ3L,GACJ,KAAK,EACDA,EAAQ,EACR,MACJ,KAAK,EACDA,EAAQ,EACR,MACJ,QACIA,EAAQ,EAEhB,MACJ,KA1CT,GA2Ca,OAAQA,GACJ,KAAK,EACDA,EAAQ,EACR,MACJ,KAAK,EACDA,EAAQ,EACR2L,IACA,MAAME,EACV,QACI7L,EAAQ,EAEhB,MACJ,QACIA,EAAQ,EAEhB2L,GACJ,CACAC,GAAkBN,EAAM3d,WACxB+d,GACJ,CACA,GAAc,IAAV1L,EACA,OAIJ,MAAMnT,EAASjD,KAAKkiB,MAAMF,EAAiBD,GACrCpiB,EAAS,IAAIN,IACb8iB,EAAUniB,KAAK/C,SAASgG,EAAQ,SAASmf,MArE1C,QAsEL,GAAID,EAAQpiB,OAAS,EACjB,OAAOJ,EAEX,IAAK,IAAI4b,EAAI,EAAGA,EAAI4G,EAAQpiB,OAAS,EAAGwb,IAAK,CACzC,MAAM8G,EAASF,EAAQ5G,GACjBzb,EAAQuiB,EAAOC,QAAQ,KAC7B,IAAe,IAAXxiB,EACA,MAAM,IAAIuM,MAAM,sDAEpB,MAAM1L,EAAM0hB,EAAOE,OAAO,EAAGziB,GACvBc,EAAQyhB,EAAOE,OAAOziB,EAAQ,GAAG0iB,OACvC7iB,EAAOQ,IAAI0hB,EAAgBlhB,EAAIkT,cAAgBlT,EAAKC,EACxD,CACA,OAAOjB,CACX,CACA,WAAA8iB,CAAY1iB,GACR,KAAIC,KAAKwhB,aAAezhB,GAGxB,OAAOC,KAAKkiB,MAAMniB,EACtB,CACA,iBAAI2iB,GACA,OAAO1iB,KAAKwhB,YAChB,CACA,KAAAU,CAAMS,GACF,GAAkB,IAAdA,EACA,OAAO3iB,KAAKgL,cAEhB,GAAI2X,EAAY3iB,KAAKwhB,aACjB,MAAM,IAAInV,MAAM,8BAEpB,GAAIrM,KAAKuhB,QAAQ,GAAGxd,aAAe4e,EAAW,CAE1C,MAAMjB,EAAQ1hB,KAAKuhB,QAAQ,GAG3B,OAFAvhB,KAAKuhB,QAAQlK,QACbrX,KAAKwhB,cAAgBmB,EACd3iB,KAAKsL,SAASoW,EACzB,CACA,GAAI1hB,KAAKuhB,QAAQ,GAAGxd,WAAa4e,EAAW,CAExC,MAAMjB,EAAQ1hB,KAAKuhB,QAAQ,GACrB5hB,EAASK,KAAKsL,SAASoW,EAAOiB,GAGpC,OAFA3iB,KAAKuhB,QAAQ,GAAKG,EAAM9d,MAAM+e,GAC9B3iB,KAAKwhB,cAAgBmB,EACdhjB,CACX,CACA,MAAMA,EAASK,KAAKuL,YAAYoX,GAChC,IAAIC,EAAe,EAEnB,KAAOD,EAAY,GAAG,CAClB,MAAMjB,EAAQ1hB,KAAKuhB,QAFN,GAGb,GAAIG,EAAM3d,WAAa4e,EAAW,CAE9B,MAAME,EAAYnB,EAAM9d,MAAM,EAAG+e,GACjChjB,EAAOQ,IAAI0iB,EAAWD,GACtBA,GAAgBD,EAChB3iB,KAAKuhB,QARI,GAQkBG,EAAM9d,MAAM+e,GACvC3iB,KAAKwhB,cAAgBmB,EACrBA,GAAaA,CACjB,MAGIhjB,EAAOQ,IAAIuhB,EAAOkB,GAClBA,GAAgBlB,EAAM3d,WACtB/D,KAAKuhB,QAAQlK,QACbrX,KAAKwhB,cAAgBE,EAAM3d,WAC3B4e,GAAajB,EAAM3d,UAE3B,CACA,OAAOpE,CACX,E,+BChJJrE,OAAOqD,eAAe/C,EAAS,aAAc,CAAEgF,OAAO,IACtDhF,EAAQ0S,4BAA8B1S,EAAQ+M,sBAAwB/M,EAAQ2S,mBAAgB,EAC9F,MAAMwD,EAAQ,EAAQ,OAChBC,EAAK,EAAQ,OACbR,EAAW,EAAQ,KACnBsR,EAAc,EAAQ,OAC5B,IA+CIC,GAvCennB,EAAQ2S,gBAAkB3S,EAAQ2S,cAAgB,CAAC,IADpD9D,GALd,SAAY7J,GACR,IAAIyR,EAAYzR,EAChB,OAAOyR,GAAaL,EAAG9W,KAAKmX,EAAU/I,SAAW0I,EAAG9W,KAAKmX,EAAU1E,UAC/DqE,EAAG9W,KAAKmX,EAAUpG,UAAY+F,EAAG9W,KAAKmX,EAAUxG,UAAYmG,EAAG9W,KAAKmX,EAAU2Q,iBACtF,EAGJ,MAAMra,EACF,WAAA7E,GACI9D,KAAKsW,aAAe,IAAI9E,EAASzI,QACjC/I,KAAKuW,aAAe,IAAI/E,EAASzI,QACjC/I,KAAKijB,sBAAwB,IAAIzR,EAASzI,OAC9C,CACA,OAAA4E,GACI3N,KAAKsW,aAAa3I,UAClB3N,KAAKuW,aAAa5I,SACtB,CACA,WAAI1B,GACA,OAAOjM,KAAKsW,aAAarN,KAC7B,CACA,SAAAG,CAAUW,GACN/J,KAAKsW,aAAapN,KAAKlJ,KAAKkjB,QAAQnZ,GACxC,CACA,WAAI8B,GACA,OAAO7L,KAAKuW,aAAatN,KAC7B,CACA,SAAAka,GACInjB,KAAKuW,aAAarN,UAAKpL,EAC3B,CACA,oBAAIklB,GACA,OAAOhjB,KAAKijB,sBAAsBha,KACtC,CACA,kBAAAma,CAAmB7P,GACfvT,KAAKijB,sBAAsB/Z,KAAKqK,EACpC,CACA,OAAA2P,CAAQnZ,GACJ,OAAIA,aAAiBsC,MACVtC,EAGA,IAAIsC,MAAM,kCAAkC2F,EAAGnN,OAAOkF,EAAMiK,SAAWjK,EAAMiK,QAAU,YAEtG,EAEJpY,EAAQ+M,sBAAwBA,EAEhC,SAAWoa,GAsCPA,EAA6BM,YArC7B,SAAqB/Y,GACjB,IAAIyC,EAEAuW,EACJ,MAAMC,EAAkB,IAAIlkB,IAC5B,IAAImkB,EACJ,MAAMC,EAAsB,IAAIpkB,IAChC,QAAgBvB,IAAZwM,GAA4C,iBAAZA,EAChCyC,EAAUzC,GAAW,YAEpB,CAMD,GALAyC,EAAUzC,EAAQyC,SAAW,aACEjP,IAA3BwM,EAAQgZ,iBACRA,EAAiBhZ,EAAQgZ,eACzBC,EAAgBpjB,IAAImjB,EAAexW,KAAMwW,SAEbxlB,IAA5BwM,EAAQiZ,gBACR,IAAK,MAAMrW,KAAW5C,EAAQiZ,gBAC1BA,EAAgBpjB,IAAI+M,EAAQJ,KAAMI,GAO1C,QAJmCpP,IAA/BwM,EAAQkZ,qBACRA,EAAqBlZ,EAAQkZ,mBAC7BC,EAAoBtjB,IAAIqjB,EAAmB1W,KAAM0W,SAEjB1lB,IAAhCwM,EAAQmZ,oBACR,IAAK,MAAMvW,KAAW5C,EAAQmZ,oBAC1BA,EAAoBtjB,IAAI+M,EAAQJ,KAAMI,EAGlD,CAKA,YAJ2BpP,IAAvB0lB,IACAA,GAAqB,EAAIzR,EAAMvJ,WAAWoE,gBAAgBM,QAC1DuW,EAAoBtjB,IAAIqjB,EAAmB1W,KAAM0W,IAE9C,CAAEzW,UAASuW,iBAAgBC,kBAAiBC,qBAAoBC,sBAC3E,CAEH,CAvCD,CAuCGV,IAAiCA,EAA+B,CAAC,IA6FpEnnB,EAAQ0S,4BA5FR,cAA0C3F,EACtC,WAAA7E,CAAY4f,EAAUpZ,GAClBzB,QACA7I,KAAK0jB,SAAWA,EAChB1jB,KAAKsK,QAAUyY,EAA6BM,YAAY/Y,GACxDtK,KAAKiD,QAAS,EAAI8O,EAAMvJ,WAAWmE,cAAcrO,OAAO0B,KAAKsK,QAAQyC,SACrE/M,KAAK2jB,uBAAyB,IAC9B3jB,KAAK4jB,mBAAqB,EAC1B5jB,KAAK6jB,aAAe,EACpB7jB,KAAK8jB,cAAgB,IAAIhB,EAAYiB,UAAU,EACnD,CACA,yBAAIC,CAAsBC,GACtBjkB,KAAK2jB,uBAAyBM,CAClC,CACA,yBAAID,GACA,OAAOhkB,KAAK2jB,sBAChB,CACA,MAAAra,CAAOC,GACHvJ,KAAK4jB,mBAAqB,EAC1B5jB,KAAK6jB,aAAe,EACpB7jB,KAAKkkB,yBAAsBpmB,EAC3BkC,KAAKuJ,SAAWA,EAChB,MAAM5J,EAASK,KAAK0jB,SAASvX,QAAQ5L,IACjCP,KAAKmM,OAAO5L,EAAK,IAIrB,OAFAP,KAAK0jB,SAASzX,SAASlC,GAAU/J,KAAKoJ,UAAUW,KAChD/J,KAAK0jB,SAAS7X,SAAQ,IAAM7L,KAAKmjB,cAC1BxjB,CACX,CACA,MAAAwM,CAAO5L,GAEH,IADAP,KAAKiD,OAAOwe,OAAOlhB,KACN,CACT,IAAgC,IAA5BP,KAAK4jB,kBAA0B,CAC/B,MAAMzB,EAAUniB,KAAKiD,OAAO2e,gBAAe,GAC3C,IAAKO,EACD,OAEJ,MAAMgC,EAAgBhC,EAAQ/gB,IAAI,kBAClC,IAAK+iB,EAED,YADAnkB,KAAKoJ,UAAU,IAAIiD,MAAM,mDAG7B,MAAMtM,EAASqkB,SAASD,GACxB,GAAIE,MAAMtkB,GAEN,YADAC,KAAKoJ,UAAU,IAAIiD,MAAM,2CAG7BrM,KAAK4jB,kBAAoB7jB,CAC7B,CACA,MAAMukB,EAAOtkB,KAAKiD,OAAOwf,YAAYziB,KAAK4jB,mBAC1C,QAAa9lB,IAATwmB,EAGA,YADAtkB,KAAKukB,yBAGTvkB,KAAKwkB,2BACLxkB,KAAK4jB,mBAAqB,EAK1B5jB,KAAK8jB,cAAcW,MAAK/H,UACpB,MAAMgI,OAAwC5mB,IAAhCkC,KAAKsK,QAAQgZ,qBACftjB,KAAKsK,QAAQgZ,eAAejY,OAAOiZ,GACzCA,EACAtQ,QAAgBhU,KAAKsK,QAAQkZ,mBAAmBnY,OAAOqZ,EAAO1kB,KAAKsK,SACzEtK,KAAKuJ,SAASyK,EAAQ,IACvBgE,OAAOjO,IACN/J,KAAKoJ,UAAUW,EAAM,GAE7B,CACJ,CACA,wBAAAya,GACQxkB,KAAKkkB,sBACLlkB,KAAKkkB,oBAAoBvW,UACzB3N,KAAKkkB,yBAAsBpmB,EAEnC,CACA,sBAAAymB,GACIvkB,KAAKwkB,2BACDxkB,KAAK2jB,wBAA0B,IAGnC3jB,KAAKkkB,qBAAsB,EAAInS,EAAMvJ,WAAW+E,MAAMC,YAAW,CAACsF,EAAOmR,KACrEjkB,KAAKkkB,yBAAsBpmB,EACvBgV,IAAU9S,KAAK6jB,eACf7jB,KAAKojB,mBAAmB,CAAES,aAAc/Q,EAAO6R,YAAaV,IAC5DjkB,KAAKukB,yBACT,GACDvkB,KAAK2jB,uBAAwB3jB,KAAK6jB,aAAc7jB,KAAK2jB,wBAC5D,E,+BCxLJroB,OAAOqD,eAAe/C,EAAS,aAAc,CAAEgF,OAAO,IACtDhF,EAAQwS,6BAA+BxS,EAAQ4N,sBAAwB5N,EAAQyS,mBAAgB,EAC/F,MAAM0D,EAAQ,EAAQ,OAChBC,EAAK,EAAQ,OACb8Q,EAAc,EAAQ,OACtBtR,EAAW,EAAQ,KAGzB,IAwCIoT,GAhCehpB,EAAQyS,gBAAkBzS,EAAQyS,cAAgB,CAAC,IADpD5D,GALd,SAAY7J,GACR,IAAIyR,EAAYzR,EAChB,OAAOyR,GAAaL,EAAG9W,KAAKmX,EAAU1E,UAAYqE,EAAG9W,KAAKmX,EAAUxG,UAChEmG,EAAG9W,KAAKmX,EAAUpG,UAAY+F,EAAG9W,KAAKmX,EAAU3I,MACxD,EAGJ,MAAMF,EACF,WAAA1F,GACI9D,KAAKsW,aAAe,IAAI9E,EAASzI,QACjC/I,KAAKuW,aAAe,IAAI/E,EAASzI,OACrC,CACA,OAAA4E,GACI3N,KAAKsW,aAAa3I,UAClB3N,KAAKuW,aAAa5I,SACtB,CACA,WAAI1B,GACA,OAAOjM,KAAKsW,aAAarN,KAC7B,CACA,SAAAG,CAAUW,EAAOiK,EAASxO,GACtBxF,KAAKsW,aAAapN,KAAK,CAAClJ,KAAKkjB,QAAQnZ,GAAQiK,EAASxO,GAC1D,CACA,WAAIqG,GACA,OAAO7L,KAAKuW,aAAatN,KAC7B,CACA,SAAAka,GACInjB,KAAKuW,aAAarN,UAAKpL,EAC3B,CACA,OAAAolB,CAAQnZ,GACJ,OAAIA,aAAiBsC,MACVtC,EAGA,IAAIsC,MAAM,kCAAkC2F,EAAGnN,OAAOkF,EAAMiK,SAAWjK,EAAMiK,QAAU,YAEtG,EAEJpY,EAAQ4N,sBAAwBA,EAEhC,SAAWob,GASPA,EAA6BvB,YAR7B,SAAqB/Y,GACjB,YAAgBxM,IAAZwM,GAA4C,iBAAZA,EACzB,CAAEyC,QAASzC,GAAW,QAASua,oBAAoB,EAAI9S,EAAMvJ,WAAWoE,gBAAgBC,SAGxF,CAAEE,QAASzC,EAAQyC,SAAW,QAAS+X,eAAgBxa,EAAQwa,eAAgBD,mBAAoBva,EAAQua,qBAAsB,EAAI9S,EAAMvJ,WAAWoE,gBAAgBC,QAErL,CAEH,CAVD,CAUG+X,IAAiCA,EAA+B,CAAC,IAkDpEhpB,EAAQwS,6BAjDR,cAA2C5E,EACvC,WAAA1F,CAAYkE,EAAUsC,GAClBzB,QACA7I,KAAKgI,SAAWA,EAChBhI,KAAKsK,QAAUsa,EAA6BvB,YAAY/Y,GACxDtK,KAAKyJ,WAAa,EAClBzJ,KAAK+kB,eAAiB,IAAIjC,EAAYiB,UAAU,GAChD/jB,KAAKgI,SAASiE,SAASlC,GAAU/J,KAAKoJ,UAAUW,KAChD/J,KAAKgI,SAAS6D,SAAQ,IAAM7L,KAAKmjB,aACrC,CACA,WAAMzZ,CAAMC,GACR,OAAO3J,KAAK+kB,eAAeN,MAAK/H,SACZ1c,KAAKsK,QAAQua,mBAAmBzZ,OAAOzB,EAAK3J,KAAKsK,SAASoB,MAAMzI,QACxCnF,IAAhCkC,KAAKsK,QAAQwa,eACN9kB,KAAKsK,QAAQwa,eAAe1Z,OAAOnI,GAGnCA,IAGAyI,MAAMzI,IACjB,MAAMkf,EAAU,GAGhB,OAFAA,EAAQ7gB,KA5EF,mBA4EsB2B,EAAOc,WAAW9G,WA3EjD,QA4EGklB,EAAQ7gB,KA5EX,QA6EUtB,KAAKglB,QAAQrb,EAAKwY,EAASlf,EAAO,IACzC8G,IAEA,MADA/J,KAAKoJ,UAAUW,GACTA,CAAK,KAGvB,CACA,aAAMib,CAAQrb,EAAKwY,EAAS5hB,GACxB,IAEI,aADMP,KAAKgI,SAAS0B,MAAMyY,EAAQ8C,KAAK,IAAK,SACrCjlB,KAAKgI,SAAS0B,MAAMnJ,EAC/B,CACA,MAAOwJ,GAEH,OADA/J,KAAKgK,YAAYD,EAAOJ,GACjBE,QAAQI,OAAOF,EAC1B,CACJ,CACA,WAAAC,CAAYD,EAAOJ,GACf3J,KAAKyJ,aACLzJ,KAAKoJ,UAAUW,EAAOJ,EAAK3J,KAAKyJ,WACpC,CACA,GAAAS,GACIlK,KAAKgI,SAASkC,KAClB,E,+BC3GJ5O,OAAOqD,eAAe/C,EAAS,aAAc,CAAEgF,OAAO,IACtDhF,EAAQ6U,QAAU7U,EAAQqT,kBAAoBrT,EAAQsT,kBAAoBtT,EAAQuT,kBAAoBvT,EAAQwT,kBAAoBxT,EAAQyT,kBAAoBzT,EAAQ0T,kBAAoB1T,EAAQ2T,kBAAoB3T,EAAQ4T,kBAAoB5T,EAAQ6T,kBAAoB7T,EAAQ8T,kBAAoB9T,EAAQ+T,iBAAmB/T,EAAQkU,aAAelU,EAAQmU,aAAenU,EAAQoU,aAAepU,EAAQqU,aAAerU,EAAQsU,aAAetU,EAAQuU,aAAevU,EAAQwU,aAAexU,EAAQyU,aAAezU,EAAQ0U,aAAe1U,EAAQ4U,YAAc5U,EAAQ2U,aAAe3U,EAAQspB,yBAA2BtpB,EAAQoT,oBAAsBpT,EAAQiU,cAAgBjU,EAAQgU,gBAAa,EAC/qB,MAAMnF,EAAK,EAAQ,OAInB,IAAImF,EA6QOa,GA5QX,SAAWb,GAEPA,EAAWuV,YAAc,MACzBvV,EAAWwV,gBAAkB,MAC7BxV,EAAWyJ,gBAAkB,MAC7BzJ,EAAWiJ,eAAiB,MAC5BjJ,EAAWuJ,eAAiB,MAU5BvJ,EAAWyV,gCAAkC,MAE7CzV,EAAW0V,kBAAoB,MAI/B1V,EAAWgN,mBAAqB,MAIhChN,EAAW2V,kBAAoB,MAK/B3V,EAAW0N,yBAA2B,MAItC1N,EAAW4V,oBAAsB,MAKjC5V,EAAW6V,sBAAwB,MACnC7V,EAAW8V,kBAAoB,MAO/B9V,EAAW+V,8BAAgC,KAE3C/V,EAAWgW,gBAAkB,IAChC,CAnDD,CAmDGhW,EAAahU,EAAQgU,aAAehU,EAAQgU,WAAa,CAAC,IAK7D,MAAMC,UAAsBxD,MACxB,WAAAvI,CAAYiQ,EAAMC,EAASzT,GACvBsI,MAAMmL,GACNhU,KAAK+T,KAAOtJ,EAAGyP,OAAOnG,GAAQA,EAAOnE,EAAW8V,iBAChD1lB,KAAKO,KAAOA,EACZjF,OAAO2Y,eAAejU,KAAM6P,EAAcjT,UAC9C,CACA,MAAAkb,GACI,MAAMnY,EAAS,CACXoU,KAAM/T,KAAK+T,KACXC,QAAShU,KAAKgU,SAKlB,YAHkBlW,IAAdkC,KAAKO,OACLZ,EAAOY,KAAOP,KAAKO,MAEhBZ,CACX,EAEJ/D,EAAQiU,cAAgBA,EACxB,MAAMb,EACF,WAAAlL,CAAYqQ,GACRnU,KAAKmU,KAAOA,CAChB,CACA,SAAO1J,CAAG7J,GACN,OAAOA,IAAUoO,EAAoBqM,MAAQza,IAAUoO,EAAoB+J,QAAUnY,IAAUoO,EAAoBgK,UACvH,CACA,QAAA/b,GACI,OAAO+C,KAAKmU,IAChB,EAEJvY,EAAQoT,oBAAsBA,EAK9BA,EAAoBqM,KAAO,IAAIrM,EAAoB,QAKnDA,EAAoBgK,WAAa,IAAIhK,EAAoB,cAMzDA,EAAoB+J,OAAS,IAAI/J,EAAoB,UAIrD,MAAMkW,EACF,WAAAphB,CAAY6T,EAAQiB,GAChB5Y,KAAK2X,OAASA,EACd3X,KAAK4Y,eAAiBA,CAC1B,CACA,uBAAIE,GACA,OAAO9J,EAAoBqM,IAC/B,EAEJzf,EAAQspB,yBAA2BA,EASnCtpB,EAAQ2U,aALR,cAA2B2U,EACvB,WAAAphB,CAAY6T,GACR9O,MAAM8O,EAAQ,EAClB,GAYJ/b,EAAQ4U,YATR,cAA0B0U,EACtB,WAAAphB,CAAY6T,EAAQkO,EAAuB7W,EAAoBqM,MAC3DxS,MAAM8O,EAAQ,GACd3X,KAAK6lB,qBAAuBA,CAChC,CACA,uBAAI/M,GACA,OAAO9Y,KAAK6lB,oBAChB,GAYJjqB,EAAQ0U,aATR,cAA2B4U,EACvB,WAAAphB,CAAY6T,EAAQkO,EAAuB7W,EAAoBqM,MAC3DxS,MAAM8O,EAAQ,GACd3X,KAAK6lB,qBAAuBA,CAChC,CACA,uBAAI/M,GACA,OAAO9Y,KAAK6lB,oBAChB,GAQJjqB,EAAQyU,aALR,cAA2B6U,EACvB,WAAAphB,CAAY6T,GACR9O,MAAM8O,EAAQ,EAClB,GAQJ/b,EAAQwU,aALR,cAA2B8U,EACvB,WAAAphB,CAAY6T,GACR9O,MAAM8O,EAAQ,EAClB,GAQJ/b,EAAQuU,aALR,cAA2B+U,EACvB,WAAAphB,CAAY6T,GACR9O,MAAM8O,EAAQ,EAClB,GAQJ/b,EAAQsU,aALR,cAA2BgV,EACvB,WAAAphB,CAAY6T,GACR9O,MAAM8O,EAAQ,EAClB,GAQJ/b,EAAQqU,aALR,cAA2BiV,EACvB,WAAAphB,CAAY6T,GACR9O,MAAM8O,EAAQ,EAClB,GAQJ/b,EAAQoU,aALR,cAA2BkV,EACvB,WAAAphB,CAAY6T,GACR9O,MAAM8O,EAAQ,EAClB,GAQJ/b,EAAQmU,aALR,cAA2BmV,EACvB,WAAAphB,CAAY6T,GACR9O,MAAM8O,EAAQ,EAClB,GAQJ/b,EAAQkU,aALR,cAA2BoV,EACvB,WAAAphB,CAAY6T,GACR9O,MAAM8O,EAAQ,EAClB,GAYJ/b,EAAQ+T,iBATR,cAA+BuV,EAC3B,WAAAphB,CAAY6T,EAAQkO,EAAuB7W,EAAoBqM,MAC3DxS,MAAM8O,EAAQ,GACd3X,KAAK6lB,qBAAuBA,CAChC,CACA,uBAAI/M,GACA,OAAO9Y,KAAK6lB,oBAChB,GAQJjqB,EAAQ8T,kBALR,cAAgCwV,EAC5B,WAAAphB,CAAY6T,GACR9O,MAAM8O,EAAQ,EAClB,GAYJ/b,EAAQ6T,kBATR,cAAgCyV,EAC5B,WAAAphB,CAAY6T,EAAQkO,EAAuB7W,EAAoBqM,MAC3DxS,MAAM8O,EAAQ,GACd3X,KAAK6lB,qBAAuBA,CAChC,CACA,uBAAI/M,GACA,OAAO9Y,KAAK6lB,oBAChB,GAQJjqB,EAAQ4T,kBALR,cAAgC0V,EAC5B,WAAAphB,CAAY6T,GACR9O,MAAM8O,EAAQ,EAClB,GAQJ/b,EAAQ2T,kBALR,cAAgC2V,EAC5B,WAAAphB,CAAY6T,GACR9O,MAAM8O,EAAQ,EAClB,GAQJ/b,EAAQ0T,kBALR,cAAgC4V,EAC5B,WAAAphB,CAAY6T,GACR9O,MAAM8O,EAAQ,EAClB,GAQJ/b,EAAQyT,kBALR,cAAgC6V,EAC5B,WAAAphB,CAAY6T,GACR9O,MAAM8O,EAAQ,EAClB,GAQJ/b,EAAQwT,kBALR,cAAgC8V,EAC5B,WAAAphB,CAAY6T,GACR9O,MAAM8O,EAAQ,EAClB,GAQJ/b,EAAQuT,kBALR,cAAgC+V,EAC5B,WAAAphB,CAAY6T,GACR9O,MAAM8O,EAAQ,EAClB,GAQJ/b,EAAQsT,kBALR,cAAgCgW,EAC5B,WAAAphB,CAAY6T,GACR9O,MAAM8O,EAAQ,EAClB,GAQJ/b,EAAQqT,kBALR,cAAgCiW,EAC5B,WAAAphB,CAAY6T,GACR9O,MAAM8O,EAAQ,EAClB,IAIOlH,EAyBE7U,EAAQ6U,UAAY7U,EAAQ6U,QAAU,CAAC,IAjBxC8G,UAJR,SAAmBvD,GACf,MAAM3B,EAAY2B,EAClB,OAAO3B,GAAa5H,EAAG5F,OAAOwN,EAAUsF,UAAYlN,EAAG5F,OAAOwN,EAAUmC,KAAO/J,EAAGyP,OAAO7H,EAAUmC,IACvG,EASA/D,EAAQ8I,eAJR,SAAwBvF,GACpB,MAAM3B,EAAY2B,EAClB,OAAO3B,GAAa5H,EAAG5F,OAAOwN,EAAUsF,cAA0B,IAAf3D,EAAQQ,EAC/D,EASA/D,EAAQmJ,WAJR,SAAoB5F,GAChB,MAAM3B,EAAY2B,EAClB,OAAO3B,SAAmC,IAArBA,EAAU1S,UAAuB0S,EAAUtI,SAAWU,EAAG5F,OAAOwN,EAAUmC,KAAO/J,EAAGyP,OAAO7H,EAAUmC,KAAwB,OAAjBnC,EAAUmC,GAC/I,C,6BCzSJ,IAAIsR,EACJ,SAASna,IACL,QAAa7N,IAATgoB,EACA,MAAM,IAAIzZ,MAAM,0CAEpB,OAAOyZ,CACX,CAPAxqB,OAAOqD,eAAe/C,EAAS,aAAc,CAAEgF,OAAO,IAQtD,SAAW+K,GAOPA,EAAIlD,QANJ,SAAiBsd,GACb,QAAYjoB,IAARioB,EACA,MAAM,IAAI1Z,MAAM,yCAEpByZ,EAAOC,CACX,CAEH,CARD,CAQGpa,IAAQA,EAAM,CAAC,IAClB/P,EAAA,QAAkB+P,C,+BCjBlBrQ,OAAOqD,eAAe/C,EAAS,aAAc,CAAEgF,OAAO,IACtDhF,EAAQmoB,eAAY,EACpB,MAAMhS,EAAQ,EAAQ,OA4DtBnW,EAAQmoB,UA3DR,MACI,WAAAjgB,CAAYkiB,EAAW,GACnB,GAAIA,GAAY,EACZ,MAAM,IAAI3Z,MAAM,mCAEpBrM,KAAKimB,UAAYD,EACjBhmB,KAAKkmB,QAAU,EACflmB,KAAKmmB,SAAW,EACpB,CACA,IAAA1B,CAAK2B,GACD,OAAO,IAAIvc,SAAQ,CAACC,EAASG,KACzBjK,KAAKmmB,SAAS7kB,KAAK,CAAE8kB,QAAOtc,UAASG,WACrCjK,KAAKqmB,SAAS,GAEtB,CACA,UAAIC,GACA,OAAOtmB,KAAKkmB,OAChB,CACA,OAAAG,GACiC,IAAzBrmB,KAAKmmB,SAASpmB,QAAgBC,KAAKkmB,UAAYlmB,KAAKimB,YAGxD,EAAIlU,EAAMvJ,WAAW+E,MAAMM,cAAa,IAAM7N,KAAKumB,aACvD,CACA,SAAAA,GACI,GAA6B,IAAzBvmB,KAAKmmB,SAASpmB,QAAgBC,KAAKkmB,UAAYlmB,KAAKimB,UACpD,OAEJ,MAAMjG,EAAOhgB,KAAKmmB,SAAS9O,QAE3B,GADArX,KAAKkmB,UACDlmB,KAAKkmB,QAAUlmB,KAAKimB,UACpB,MAAM,IAAI5Z,MAAM,yBAEpB,IACI,MAAM1M,EAASqgB,EAAKoG,QAChBzmB,aAAkBkK,QAClBlK,EAAO+L,MAAM9K,IACTZ,KAAKkmB,UACLlG,EAAKlW,QAAQlJ,GACbZ,KAAKqmB,SAAS,IACdG,IACAxmB,KAAKkmB,UACLlG,EAAK/V,OAAOuc,GACZxmB,KAAKqmB,SAAS,KAIlBrmB,KAAKkmB,UACLlG,EAAKlW,QAAQnK,GACbK,KAAKqmB,UAEb,CACA,MAAOG,GACHxmB,KAAKkmB,UACLlG,EAAK/V,OAAOuc,GACZxmB,KAAKqmB,SACT,CACJ,E,+BC5DJ/qB,OAAOqD,eAAe/C,EAAS,aAAc,CAAEgF,OAAO,IACtDhF,EAAQ4S,4BAA8B5S,EAAQ6S,+BAA4B,EAC1E,MAAMgD,EAAiB,EAAQ,OAC/B,IAAIgV,GACJ,SAAWA,GACPA,EAAkBC,SAAW,EAC7BD,EAAkBrU,UAAY,CACjC,CAHD,CAGGqU,IAAsBA,EAAoB,CAAC,IA8B9C7qB,EAAQ6S,0BA7BR,MACI,WAAA3K,GACI9D,KAAK2mB,QAAU,IAAItnB,GACvB,CACA,kBAAAod,CAAmBmK,GACf,GAAmB,OAAfA,EAAQpS,GACR,OAEJ,MAAMvR,EAAS,IAAI4jB,kBAAkB,GACxB,IAAIC,WAAW7jB,EAAQ,EAAG,GAClC,GAAKwjB,EAAkBC,SAC5B1mB,KAAK2mB,QAAQxmB,IAAIymB,EAAQpS,GAAIvR,GAC7B2jB,EAAQG,kBAAoB9jB,CAChC,CACA,sBAAMqR,CAAiB0S,EAAOxS,GAC1B,MAAMvR,EAASjD,KAAK2mB,QAAQvlB,IAAIoT,GAChC,QAAe1W,IAAXmF,EACA,OAEJ,MAAM1C,EAAO,IAAIumB,WAAW7jB,EAAQ,EAAG,GACvCgkB,QAAQC,MAAM3mB,EAAM,EAAGkmB,EAAkBrU,UAC7C,CACA,OAAAsC,CAAQF,GACJxU,KAAK2mB,QAAQzN,OAAO1E,EACxB,CACA,OAAA7G,GACI3N,KAAK2mB,QAAQ1mB,OACjB,GAGJ,MAAMknB,EACF,WAAArjB,CAAYb,GACRjD,KAAKO,KAAO,IAAIumB,WAAW7jB,EAAQ,EAAG,EAC1C,CACA,2BAAIiP,GACA,OAAO+U,QAAQG,KAAKpnB,KAAKO,KAAM,KAAOkmB,EAAkBrU,SAC5D,CACA,2BAAID,GACA,MAAM,IAAI9F,MAAM,0EACpB,EAEJ,MAAMgb,EACF,WAAAvjB,CAAYb,GACRjD,KAAK8S,MAAQ,IAAIqU,EAAmClkB,EACxD,CACA,MAAA2P,GACA,CACA,OAAAjF,GACA,EAcJ/R,EAAQ4S,4BAZR,MACI,WAAA1K,GACI9D,KAAKmU,KAAO,SAChB,CACA,6BAAAC,CAA8BwS,GAC1B,MAAM3jB,EAAS2jB,EAAQG,kBACvB,YAAejpB,IAAXmF,EACO,IAAIwO,EAAe9C,wBAEvB,IAAI0Y,EAAyCpkB,EACxD,E,gHCpEG,MAAMqkB,UAA+B,EAAA3e,sBACxC,WAAA7E,CAAY2H,GACR5C,QACA7I,KAAKyL,OAASA,EACdzL,KAAKoW,MAAQ,UACbpW,KAAKunB,OAAS,GACdvnB,KAAKyL,OAAO+b,WAAUxT,GAAWhU,KAAKynB,YAAYzT,KAClDhU,KAAKyL,OAAOQ,SAAQlC,GAAS/J,KAAKoJ,UAAUW,KAC5C/J,KAAKyL,OAAOI,SAAQ,CAACkI,EAAM2T,KACvB,GAAa,MAAT3T,EAAe,CACf,MAAMhK,EAAQ,CACV+C,KAAM,GAAKiH,EACXC,QAAS,yCAAyCD,eAAkB2T,KAExE1nB,KAAKoJ,UAAUW,EACnB,CACA/J,KAAKmjB,WAAW,GAExB,CACA,MAAA7Z,CAAOC,GACH,GAAmB,YAAfvJ,KAAKoW,MAGL,IAFApW,KAAKoW,MAAQ,YACbpW,KAAKuJ,SAAWA,EACc,IAAvBvJ,KAAKunB,OAAOxnB,QAAc,CAC7B,MAAMkJ,EAAQjJ,KAAKunB,OAAOlmB,MACtB4H,EAAM+K,QACNhU,KAAKynB,YAAYxe,EAAM+K,SAElB/K,EAAMc,MACX/J,KAAKoJ,UAAUH,EAAMc,OAGrB/J,KAAKmjB,WAEb,CAEJ,MAAO,CACHxV,QAAS,KACD3N,KAAKuJ,WAAaA,IAClBvJ,KAAKuJ,cAAWzL,EACpB,EAGZ,CACA,WAAA2pB,CAAYzT,GACR,GAAmB,YAAfhU,KAAKoW,MACLpW,KAAKunB,OAAO/oB,OAAO,EAAG,EAAG,CAAEwV,iBAE1B,GAAmB,cAAfhU,KAAKoW,MAAuB,CACjC,MAAM7V,EAAOyM,KAAKG,MAAM6G,GACxBhU,KAAKuJ,SAAShJ,EAClB,CACJ,CACA,SAAA6I,CAAUW,GACa,YAAf/J,KAAKoW,MACLpW,KAAKunB,OAAO/oB,OAAO,EAAG,EAAG,CAAEuL,UAEP,cAAf/J,KAAKoW,OACVvN,MAAMO,UAAUW,EAExB,CACA,SAAAoZ,GACuB,YAAfnjB,KAAKoW,MACLpW,KAAKunB,OAAO/oB,OAAO,EAAG,EAAG,CAAC,GAEN,cAAfwB,KAAKoW,OACVvN,MAAMsa,YAEVnjB,KAAKoW,MAAQ,QACjB,E,eCrEG,MAAMuR,UAA+B,EAAAne,sBACxC,WAAA1F,CAAY2H,GACR5C,QACA7I,KAAKyL,OAASA,EACdzL,KAAKyJ,WAAa,CACtB,CACA,GAAAS,GACA,CACA,WAAMR,CAAMC,GACR,IACI,MAAMie,EAAU5a,KAAKC,UAAUtD,GAC/B3J,KAAKyL,OAAOa,KAAKsb,EACrB,CACA,MAAOrrB,GACHyD,KAAKyJ,aACLzJ,KAAKoJ,UAAU7M,EAAGoN,EAAK3J,KAAKyJ,WAChC,CACJ,ECtBG,MAAMoe,EACT,KAAA9d,CAAMiK,GACFpI,QAAQ7B,MAAMiK,EAClB,CACA,IAAAV,CAAKU,GACDpI,QAAQ0H,KAAKU,EACjB,CACA,IAAAT,CAAKS,GACDpI,QAAQ2H,KAAKS,EACjB,CACA,GAAAR,CAAIQ,GACApI,QAAQ4H,IAAIQ,EAChB,CACA,KAAA8T,CAAM9T,GACFpI,QAAQkc,MAAM9T,EAClB,ECLG,SAAS1K,EAAOgB,GACnB,MAAM,UAAEyd,EAAS,aAAEC,GAAiB1d,EAC9BD,EAASC,EAAQD,QAAU,IAAIwd,EACrCE,EAAUE,OAAS,KACf,MAAMxc,EAKP,SAAkBsc,GACrB,MAAO,CACHzb,KAAMsb,GAAWG,EAAUzb,KAAKsb,GAChCJ,UAAWU,IACPH,EAAU1e,UAAYJ,GAASif,EAAGjf,EAAM1I,KAAK,EAEjD0L,QAASic,IACLH,EAAUI,QAAUlf,IACZ,YAAaA,GACbif,EAAGjf,EAAM+K,QACb,CACH,EAELnI,QAASqc,IACLH,EAAUK,QAAUnf,GAASif,EAAGjf,EAAM8K,KAAM9K,EAAMye,OAAO,EAE7D/Z,QAAS,IAAMoa,EAAUxb,QAEjC,CAvBuB8b,CAASN,GAClBvM,ECRP,SAAmC/P,EAAQpB,GAC9C,MAAM2K,EAAgB,IAAIsS,EAAuB7b,GAC3CwJ,EAAgB,IAAI0S,EAAuBlc,GAC3C+P,GAAa,IAAAnT,yBAAwB2M,EAAeC,EAAe5K,GAEzE,OADAmR,EAAW3P,SAAQ,IAAM2P,EAAW7N,YAC7B6N,CACX,CDE2B8M,CAA0B7c,EAAQpB,GACrD2d,EAAaxM,EAAW,CAEhC,C","sources":["webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/lodash.mergewith/index.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/vscode-jsonrpc/lib/browser/main.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/vscode-jsonrpc/lib/browser/ril.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/vscode-jsonrpc/lib/common/api.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/vscode-jsonrpc/lib/common/cancellation.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/vscode-jsonrpc/lib/common/connection.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/vscode-jsonrpc/lib/common/disposable.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/vscode-jsonrpc/lib/common/events.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/vscode-jsonrpc/lib/common/is.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/vscode-jsonrpc/lib/common/linkedMap.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/vscode-jsonrpc/lib/common/messageBuffer.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/vscode-jsonrpc/lib/common/messageReader.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/vscode-jsonrpc/lib/common/messageWriter.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/vscode-jsonrpc/lib/common/messages.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/vscode-jsonrpc/lib/common/ral.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/vscode-jsonrpc/lib/common/semaphore.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/vscode-jsonrpc/lib/common/sharedArrayCancellation.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/vscode-ws-jsonrpc/lib/socket/reader.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/vscode-ws-jsonrpc/lib/socket/writer.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/vscode-ws-jsonrpc/lib/logger.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/vscode-ws-jsonrpc/lib/connection.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/vscode-ws-jsonrpc/lib/socket/connection.js"],"sourcesContent":["/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeMax = Math.max,\n    nativeNow = Date.now;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\n/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\n/**\n * This method is like `_.merge` except that it accepts `customizer` which\n * is invoked to produce the merged values of the destination and source\n * properties. If `customizer` returns `undefined`, merging is handled by the\n * method instead. The `customizer` is invoked with six arguments:\n * (objValue, srcValue, key, object, source, stack).\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} sources The source objects.\n * @param {Function} customizer The function to customize assigned values.\n * @returns {Object} Returns `object`.\n * @example\n *\n * function customizer(objValue, srcValue) {\n *   if (_.isArray(objValue)) {\n *     return objValue.concat(srcValue);\n *   }\n * }\n *\n * var object = { 'a': [1], 'b': [2] };\n * var other = { 'a': [3], 'b': [4] };\n *\n * _.mergeWith(object, other, customizer);\n * // => { 'a': [1, 3], 'b': [2, 4] }\n */\nvar mergeWith = createAssigner(function(object, source, srcIndex, customizer) {\n  baseMerge(object, source, srcIndex, customizer);\n});\n\n/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\n/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = mergeWith;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createMessageConnection = exports.BrowserMessageWriter = exports.BrowserMessageReader = void 0;\nconst ril_1 = require(\"./ril\");\n// Install the browser runtime abstract.\nril_1.default.install();\nconst api_1 = require(\"../common/api\");\n__exportStar(require(\"../common/api\"), exports);\nclass BrowserMessageReader extends api_1.AbstractMessageReader {\n    constructor(port) {\n        super();\n        this._onData = new api_1.Emitter();\n        this._messageListener = (event) => {\n            this._onData.fire(event.data);\n        };\n        port.addEventListener('error', (event) => this.fireError(event));\n        port.onmessage = this._messageListener;\n    }\n    listen(callback) {\n        return this._onData.event(callback);\n    }\n}\nexports.BrowserMessageReader = BrowserMessageReader;\nclass BrowserMessageWriter extends api_1.AbstractMessageWriter {\n    constructor(port) {\n        super();\n        this.port = port;\n        this.errorCount = 0;\n        port.addEventListener('error', (event) => this.fireError(event));\n    }\n    write(msg) {\n        try {\n            this.port.postMessage(msg);\n            return Promise.resolve();\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n    end() {\n    }\n}\nexports.BrowserMessageWriter = BrowserMessageWriter;\nfunction createMessageConnection(reader, writer, logger, options) {\n    if (logger === undefined) {\n        logger = api_1.NullLogger;\n    }\n    if (api_1.ConnectionStrategy.is(options)) {\n        options = { connectionStrategy: options };\n    }\n    return (0, api_1.createMessageConnection)(reader, writer, logger, options);\n}\nexports.createMessageConnection = createMessageConnection;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst api_1 = require(\"../common/api\");\nclass MessageBuffer extends api_1.AbstractMessageBuffer {\n    constructor(encoding = 'utf-8') {\n        super(encoding);\n        this.asciiDecoder = new TextDecoder('ascii');\n    }\n    emptyBuffer() {\n        return MessageBuffer.emptyBuffer;\n    }\n    fromString(value, _encoding) {\n        return (new TextEncoder()).encode(value);\n    }\n    toString(value, encoding) {\n        if (encoding === 'ascii') {\n            return this.asciiDecoder.decode(value);\n        }\n        else {\n            return (new TextDecoder(encoding)).decode(value);\n        }\n    }\n    asNative(buffer, length) {\n        if (length === undefined) {\n            return buffer;\n        }\n        else {\n            return buffer.slice(0, length);\n        }\n    }\n    allocNative(length) {\n        return new Uint8Array(length);\n    }\n}\nMessageBuffer.emptyBuffer = new Uint8Array(0);\nclass ReadableStreamWrapper {\n    constructor(socket) {\n        this.socket = socket;\n        this._onData = new api_1.Emitter();\n        this._messageListener = (event) => {\n            const blob = event.data;\n            blob.arrayBuffer().then((buffer) => {\n                this._onData.fire(new Uint8Array(buffer));\n            }, () => {\n                (0, api_1.RAL)().console.error(`Converting blob to array buffer failed.`);\n            });\n        };\n        this.socket.addEventListener('message', this._messageListener);\n    }\n    onClose(listener) {\n        this.socket.addEventListener('close', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('close', listener));\n    }\n    onError(listener) {\n        this.socket.addEventListener('error', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('error', listener));\n    }\n    onEnd(listener) {\n        this.socket.addEventListener('end', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('end', listener));\n    }\n    onData(listener) {\n        return this._onData.event(listener);\n    }\n}\nclass WritableStreamWrapper {\n    constructor(socket) {\n        this.socket = socket;\n    }\n    onClose(listener) {\n        this.socket.addEventListener('close', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('close', listener));\n    }\n    onError(listener) {\n        this.socket.addEventListener('error', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('error', listener));\n    }\n    onEnd(listener) {\n        this.socket.addEventListener('end', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('end', listener));\n    }\n    write(data, encoding) {\n        if (typeof data === 'string') {\n            if (encoding !== undefined && encoding !== 'utf-8') {\n                throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${encoding}`);\n            }\n            this.socket.send(data);\n        }\n        else {\n            this.socket.send(data);\n        }\n        return Promise.resolve();\n    }\n    end() {\n        this.socket.close();\n    }\n}\nconst _textEncoder = new TextEncoder();\nconst _ril = Object.freeze({\n    messageBuffer: Object.freeze({\n        create: (encoding) => new MessageBuffer(encoding)\n    }),\n    applicationJson: Object.freeze({\n        encoder: Object.freeze({\n            name: 'application/json',\n            encode: (msg, options) => {\n                if (options.charset !== 'utf-8') {\n                    throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${options.charset}`);\n                }\n                return Promise.resolve(_textEncoder.encode(JSON.stringify(msg, undefined, 0)));\n            }\n        }),\n        decoder: Object.freeze({\n            name: 'application/json',\n            decode: (buffer, options) => {\n                if (!(buffer instanceof Uint8Array)) {\n                    throw new Error(`In a Browser environments only Uint8Arrays are supported.`);\n                }\n                return Promise.resolve(JSON.parse(new TextDecoder(options.charset).decode(buffer)));\n            }\n        })\n    }),\n    stream: Object.freeze({\n        asReadableStream: (socket) => new ReadableStreamWrapper(socket),\n        asWritableStream: (socket) => new WritableStreamWrapper(socket)\n    }),\n    console: console,\n    timer: Object.freeze({\n        setTimeout(callback, ms, ...args) {\n            const handle = setTimeout(callback, ms, ...args);\n            return { dispose: () => clearTimeout(handle) };\n        },\n        setImmediate(callback, ...args) {\n            const handle = setTimeout(callback, 0, ...args);\n            return { dispose: () => clearTimeout(handle) };\n        },\n        setInterval(callback, ms, ...args) {\n            const handle = setInterval(callback, ms, ...args);\n            return { dispose: () => clearInterval(handle) };\n        },\n    })\n});\nfunction RIL() {\n    return _ril;\n}\n(function (RIL) {\n    function install() {\n        api_1.RAL.install(_ril);\n    }\n    RIL.install = install;\n})(RIL || (RIL = {}));\nexports.default = RIL;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n/// <reference path=\"../../typings/thenable.d.ts\" />\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProgressType = exports.ProgressToken = exports.createMessageConnection = exports.NullLogger = exports.ConnectionOptions = exports.ConnectionStrategy = exports.AbstractMessageBuffer = exports.WriteableStreamMessageWriter = exports.AbstractMessageWriter = exports.MessageWriter = exports.ReadableStreamMessageReader = exports.AbstractMessageReader = exports.MessageReader = exports.SharedArrayReceiverStrategy = exports.SharedArraySenderStrategy = exports.CancellationToken = exports.CancellationTokenSource = exports.Emitter = exports.Event = exports.Disposable = exports.LRUCache = exports.Touch = exports.LinkedMap = exports.ParameterStructures = exports.NotificationType9 = exports.NotificationType8 = exports.NotificationType7 = exports.NotificationType6 = exports.NotificationType5 = exports.NotificationType4 = exports.NotificationType3 = exports.NotificationType2 = exports.NotificationType1 = exports.NotificationType0 = exports.NotificationType = exports.ErrorCodes = exports.ResponseError = exports.RequestType9 = exports.RequestType8 = exports.RequestType7 = exports.RequestType6 = exports.RequestType5 = exports.RequestType4 = exports.RequestType3 = exports.RequestType2 = exports.RequestType1 = exports.RequestType0 = exports.RequestType = exports.Message = exports.RAL = void 0;\nexports.MessageStrategy = exports.CancellationStrategy = exports.CancellationSenderStrategy = exports.CancellationReceiverStrategy = exports.ConnectionError = exports.ConnectionErrors = exports.LogTraceNotification = exports.SetTraceNotification = exports.TraceFormat = exports.TraceValues = exports.Trace = void 0;\nconst messages_1 = require(\"./messages\");\nObject.defineProperty(exports, \"Message\", { enumerable: true, get: function () { return messages_1.Message; } });\nObject.defineProperty(exports, \"RequestType\", { enumerable: true, get: function () { return messages_1.RequestType; } });\nObject.defineProperty(exports, \"RequestType0\", { enumerable: true, get: function () { return messages_1.RequestType0; } });\nObject.defineProperty(exports, \"RequestType1\", { enumerable: true, get: function () { return messages_1.RequestType1; } });\nObject.defineProperty(exports, \"RequestType2\", { enumerable: true, get: function () { return messages_1.RequestType2; } });\nObject.defineProperty(exports, \"RequestType3\", { enumerable: true, get: function () { return messages_1.RequestType3; } });\nObject.defineProperty(exports, \"RequestType4\", { enumerable: true, get: function () { return messages_1.RequestType4; } });\nObject.defineProperty(exports, \"RequestType5\", { enumerable: true, get: function () { return messages_1.RequestType5; } });\nObject.defineProperty(exports, \"RequestType6\", { enumerable: true, get: function () { return messages_1.RequestType6; } });\nObject.defineProperty(exports, \"RequestType7\", { enumerable: true, get: function () { return messages_1.RequestType7; } });\nObject.defineProperty(exports, \"RequestType8\", { enumerable: true, get: function () { return messages_1.RequestType8; } });\nObject.defineProperty(exports, \"RequestType9\", { enumerable: true, get: function () { return messages_1.RequestType9; } });\nObject.defineProperty(exports, \"ResponseError\", { enumerable: true, get: function () { return messages_1.ResponseError; } });\nObject.defineProperty(exports, \"ErrorCodes\", { enumerable: true, get: function () { return messages_1.ErrorCodes; } });\nObject.defineProperty(exports, \"NotificationType\", { enumerable: true, get: function () { return messages_1.NotificationType; } });\nObject.defineProperty(exports, \"NotificationType0\", { enumerable: true, get: function () { return messages_1.NotificationType0; } });\nObject.defineProperty(exports, \"NotificationType1\", { enumerable: true, get: function () { return messages_1.NotificationType1; } });\nObject.defineProperty(exports, \"NotificationType2\", { enumerable: true, get: function () { return messages_1.NotificationType2; } });\nObject.defineProperty(exports, \"NotificationType3\", { enumerable: true, get: function () { return messages_1.NotificationType3; } });\nObject.defineProperty(exports, \"NotificationType4\", { enumerable: true, get: function () { return messages_1.NotificationType4; } });\nObject.defineProperty(exports, \"NotificationType5\", { enumerable: true, get: function () { return messages_1.NotificationType5; } });\nObject.defineProperty(exports, \"NotificationType6\", { enumerable: true, get: function () { return messages_1.NotificationType6; } });\nObject.defineProperty(exports, \"NotificationType7\", { enumerable: true, get: function () { return messages_1.NotificationType7; } });\nObject.defineProperty(exports, \"NotificationType8\", { enumerable: true, get: function () { return messages_1.NotificationType8; } });\nObject.defineProperty(exports, \"NotificationType9\", { enumerable: true, get: function () { return messages_1.NotificationType9; } });\nObject.defineProperty(exports, \"ParameterStructures\", { enumerable: true, get: function () { return messages_1.ParameterStructures; } });\nconst linkedMap_1 = require(\"./linkedMap\");\nObject.defineProperty(exports, \"LinkedMap\", { enumerable: true, get: function () { return linkedMap_1.LinkedMap; } });\nObject.defineProperty(exports, \"LRUCache\", { enumerable: true, get: function () { return linkedMap_1.LRUCache; } });\nObject.defineProperty(exports, \"Touch\", { enumerable: true, get: function () { return linkedMap_1.Touch; } });\nconst disposable_1 = require(\"./disposable\");\nObject.defineProperty(exports, \"Disposable\", { enumerable: true, get: function () { return disposable_1.Disposable; } });\nconst events_1 = require(\"./events\");\nObject.defineProperty(exports, \"Event\", { enumerable: true, get: function () { return events_1.Event; } });\nObject.defineProperty(exports, \"Emitter\", { enumerable: true, get: function () { return events_1.Emitter; } });\nconst cancellation_1 = require(\"./cancellation\");\nObject.defineProperty(exports, \"CancellationTokenSource\", { enumerable: true, get: function () { return cancellation_1.CancellationTokenSource; } });\nObject.defineProperty(exports, \"CancellationToken\", { enumerable: true, get: function () { return cancellation_1.CancellationToken; } });\nconst sharedArrayCancellation_1 = require(\"./sharedArrayCancellation\");\nObject.defineProperty(exports, \"SharedArraySenderStrategy\", { enumerable: true, get: function () { return sharedArrayCancellation_1.SharedArraySenderStrategy; } });\nObject.defineProperty(exports, \"SharedArrayReceiverStrategy\", { enumerable: true, get: function () { return sharedArrayCancellation_1.SharedArrayReceiverStrategy; } });\nconst messageReader_1 = require(\"./messageReader\");\nObject.defineProperty(exports, \"MessageReader\", { enumerable: true, get: function () { return messageReader_1.MessageReader; } });\nObject.defineProperty(exports, \"AbstractMessageReader\", { enumerable: true, get: function () { return messageReader_1.AbstractMessageReader; } });\nObject.defineProperty(exports, \"ReadableStreamMessageReader\", { enumerable: true, get: function () { return messageReader_1.ReadableStreamMessageReader; } });\nconst messageWriter_1 = require(\"./messageWriter\");\nObject.defineProperty(exports, \"MessageWriter\", { enumerable: true, get: function () { return messageWriter_1.MessageWriter; } });\nObject.defineProperty(exports, \"AbstractMessageWriter\", { enumerable: true, get: function () { return messageWriter_1.AbstractMessageWriter; } });\nObject.defineProperty(exports, \"WriteableStreamMessageWriter\", { enumerable: true, get: function () { return messageWriter_1.WriteableStreamMessageWriter; } });\nconst messageBuffer_1 = require(\"./messageBuffer\");\nObject.defineProperty(exports, \"AbstractMessageBuffer\", { enumerable: true, get: function () { return messageBuffer_1.AbstractMessageBuffer; } });\nconst connection_1 = require(\"./connection\");\nObject.defineProperty(exports, \"ConnectionStrategy\", { enumerable: true, get: function () { return connection_1.ConnectionStrategy; } });\nObject.defineProperty(exports, \"ConnectionOptions\", { enumerable: true, get: function () { return connection_1.ConnectionOptions; } });\nObject.defineProperty(exports, \"NullLogger\", { enumerable: true, get: function () { return connection_1.NullLogger; } });\nObject.defineProperty(exports, \"createMessageConnection\", { enumerable: true, get: function () { return connection_1.createMessageConnection; } });\nObject.defineProperty(exports, \"ProgressToken\", { enumerable: true, get: function () { return connection_1.ProgressToken; } });\nObject.defineProperty(exports, \"ProgressType\", { enumerable: true, get: function () { return connection_1.ProgressType; } });\nObject.defineProperty(exports, \"Trace\", { enumerable: true, get: function () { return connection_1.Trace; } });\nObject.defineProperty(exports, \"TraceValues\", { enumerable: true, get: function () { return connection_1.TraceValues; } });\nObject.defineProperty(exports, \"TraceFormat\", { enumerable: true, get: function () { return connection_1.TraceFormat; } });\nObject.defineProperty(exports, \"SetTraceNotification\", { enumerable: true, get: function () { return connection_1.SetTraceNotification; } });\nObject.defineProperty(exports, \"LogTraceNotification\", { enumerable: true, get: function () { return connection_1.LogTraceNotification; } });\nObject.defineProperty(exports, \"ConnectionErrors\", { enumerable: true, get: function () { return connection_1.ConnectionErrors; } });\nObject.defineProperty(exports, \"ConnectionError\", { enumerable: true, get: function () { return connection_1.ConnectionError; } });\nObject.defineProperty(exports, \"CancellationReceiverStrategy\", { enumerable: true, get: function () { return connection_1.CancellationReceiverStrategy; } });\nObject.defineProperty(exports, \"CancellationSenderStrategy\", { enumerable: true, get: function () { return connection_1.CancellationSenderStrategy; } });\nObject.defineProperty(exports, \"CancellationStrategy\", { enumerable: true, get: function () { return connection_1.CancellationStrategy; } });\nObject.defineProperty(exports, \"MessageStrategy\", { enumerable: true, get: function () { return connection_1.MessageStrategy; } });\nconst ral_1 = require(\"./ral\");\nexports.RAL = ral_1.default;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CancellationTokenSource = exports.CancellationToken = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst events_1 = require(\"./events\");\nvar CancellationToken;\n(function (CancellationToken) {\n    CancellationToken.None = Object.freeze({\n        isCancellationRequested: false,\n        onCancellationRequested: events_1.Event.None\n    });\n    CancellationToken.Cancelled = Object.freeze({\n        isCancellationRequested: true,\n        onCancellationRequested: events_1.Event.None\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate === CancellationToken.None\n            || candidate === CancellationToken.Cancelled\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\n    }\n    CancellationToken.is = is;\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\nconst shortcutEvent = Object.freeze(function (callback, context) {\n    const handle = (0, ral_1.default)().timer.setTimeout(callback.bind(context), 0);\n    return { dispose() { handle.dispose(); } };\n});\nclass MutableToken {\n    constructor() {\n        this._isCancelled = false;\n    }\n    cancel() {\n        if (!this._isCancelled) {\n            this._isCancelled = true;\n            if (this._emitter) {\n                this._emitter.fire(undefined);\n                this.dispose();\n            }\n        }\n    }\n    get isCancellationRequested() {\n        return this._isCancelled;\n    }\n    get onCancellationRequested() {\n        if (this._isCancelled) {\n            return shortcutEvent;\n        }\n        if (!this._emitter) {\n            this._emitter = new events_1.Emitter();\n        }\n        return this._emitter.event;\n    }\n    dispose() {\n        if (this._emitter) {\n            this._emitter.dispose();\n            this._emitter = undefined;\n        }\n    }\n}\nclass CancellationTokenSource {\n    get token() {\n        if (!this._token) {\n            // be lazy and create the token only when\n            // actually needed\n            this._token = new MutableToken();\n        }\n        return this._token;\n    }\n    cancel() {\n        if (!this._token) {\n            // save an object by returning the default\n            // cancelled token when cancellation happens\n            // before someone asks for the token\n            this._token = CancellationToken.Cancelled;\n        }\n        else {\n            this._token.cancel();\n        }\n    }\n    dispose() {\n        if (!this._token) {\n            // ensure to initialize with an empty token if we had none\n            this._token = CancellationToken.None;\n        }\n        else if (this._token instanceof MutableToken) {\n            // actually dispose\n            this._token.dispose();\n        }\n    }\n}\nexports.CancellationTokenSource = CancellationTokenSource;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createMessageConnection = exports.ConnectionOptions = exports.MessageStrategy = exports.CancellationStrategy = exports.CancellationSenderStrategy = exports.CancellationReceiverStrategy = exports.RequestCancellationReceiverStrategy = exports.IdCancellationReceiverStrategy = exports.ConnectionStrategy = exports.ConnectionError = exports.ConnectionErrors = exports.LogTraceNotification = exports.SetTraceNotification = exports.TraceFormat = exports.TraceValues = exports.Trace = exports.NullLogger = exports.ProgressType = exports.ProgressToken = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst messages_1 = require(\"./messages\");\nconst linkedMap_1 = require(\"./linkedMap\");\nconst events_1 = require(\"./events\");\nconst cancellation_1 = require(\"./cancellation\");\nvar CancelNotification;\n(function (CancelNotification) {\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\n})(CancelNotification || (CancelNotification = {}));\nvar ProgressToken;\n(function (ProgressToken) {\n    function is(value) {\n        return typeof value === 'string' || typeof value === 'number';\n    }\n    ProgressToken.is = is;\n})(ProgressToken = exports.ProgressToken || (exports.ProgressToken = {}));\nvar ProgressNotification;\n(function (ProgressNotification) {\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\n})(ProgressNotification || (ProgressNotification = {}));\nclass ProgressType {\n    constructor() {\n    }\n}\nexports.ProgressType = ProgressType;\nvar StarRequestHandler;\n(function (StarRequestHandler) {\n    function is(value) {\n        return Is.func(value);\n    }\n    StarRequestHandler.is = is;\n})(StarRequestHandler || (StarRequestHandler = {}));\nexports.NullLogger = Object.freeze({\n    error: () => { },\n    warn: () => { },\n    info: () => { },\n    log: () => { }\n});\nvar Trace;\n(function (Trace) {\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\n    Trace[Trace[\"Compact\"] = 2] = \"Compact\";\n    Trace[Trace[\"Verbose\"] = 3] = \"Verbose\";\n})(Trace = exports.Trace || (exports.Trace = {}));\nvar TraceValues;\n(function (TraceValues) {\n    /**\n     * Turn tracing off.\n     */\n    TraceValues.Off = 'off';\n    /**\n     * Trace messages only.\n     */\n    TraceValues.Messages = 'messages';\n    /**\n     * Compact message tracing.\n     */\n    TraceValues.Compact = 'compact';\n    /**\n     * Verbose message tracing.\n     */\n    TraceValues.Verbose = 'verbose';\n})(TraceValues = exports.TraceValues || (exports.TraceValues = {}));\n(function (Trace) {\n    function fromString(value) {\n        if (!Is.string(value)) {\n            return Trace.Off;\n        }\n        value = value.toLowerCase();\n        switch (value) {\n            case 'off':\n                return Trace.Off;\n            case 'messages':\n                return Trace.Messages;\n            case 'compact':\n                return Trace.Compact;\n            case 'verbose':\n                return Trace.Verbose;\n            default:\n                return Trace.Off;\n        }\n    }\n    Trace.fromString = fromString;\n    function toString(value) {\n        switch (value) {\n            case Trace.Off:\n                return 'off';\n            case Trace.Messages:\n                return 'messages';\n            case Trace.Compact:\n                return 'compact';\n            case Trace.Verbose:\n                return 'verbose';\n            default:\n                return 'off';\n        }\n    }\n    Trace.toString = toString;\n})(Trace = exports.Trace || (exports.Trace = {}));\nvar TraceFormat;\n(function (TraceFormat) {\n    TraceFormat[\"Text\"] = \"text\";\n    TraceFormat[\"JSON\"] = \"json\";\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\n(function (TraceFormat) {\n    function fromString(value) {\n        if (!Is.string(value)) {\n            return TraceFormat.Text;\n        }\n        value = value.toLowerCase();\n        if (value === 'json') {\n            return TraceFormat.JSON;\n        }\n        else {\n            return TraceFormat.Text;\n        }\n    }\n    TraceFormat.fromString = fromString;\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\nvar SetTraceNotification;\n(function (SetTraceNotification) {\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTrace');\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\nvar LogTraceNotification;\n(function (LogTraceNotification) {\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTrace');\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\nvar ConnectionErrors;\n(function (ConnectionErrors) {\n    /**\n     * The connection is closed.\n     */\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\n    /**\n     * The connection got disposed.\n     */\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\n    /**\n     * The connection is already in listening mode.\n     */\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\nclass ConnectionError extends Error {\n    constructor(code, message) {\n        super(message);\n        this.code = code;\n        Object.setPrototypeOf(this, ConnectionError.prototype);\n    }\n}\nexports.ConnectionError = ConnectionError;\nvar ConnectionStrategy;\n(function (ConnectionStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.cancelUndispatched);\n    }\n    ConnectionStrategy.is = is;\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\nvar IdCancellationReceiverStrategy;\n(function (IdCancellationReceiverStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate.kind === undefined || candidate.kind === 'id') && Is.func(candidate.createCancellationTokenSource) && (candidate.dispose === undefined || Is.func(candidate.dispose));\n    }\n    IdCancellationReceiverStrategy.is = is;\n})(IdCancellationReceiverStrategy = exports.IdCancellationReceiverStrategy || (exports.IdCancellationReceiverStrategy = {}));\nvar RequestCancellationReceiverStrategy;\n(function (RequestCancellationReceiverStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && candidate.kind === 'request' && Is.func(candidate.createCancellationTokenSource) && (candidate.dispose === undefined || Is.func(candidate.dispose));\n    }\n    RequestCancellationReceiverStrategy.is = is;\n})(RequestCancellationReceiverStrategy = exports.RequestCancellationReceiverStrategy || (exports.RequestCancellationReceiverStrategy = {}));\nvar CancellationReceiverStrategy;\n(function (CancellationReceiverStrategy) {\n    CancellationReceiverStrategy.Message = Object.freeze({\n        createCancellationTokenSource(_) {\n            return new cancellation_1.CancellationTokenSource();\n        }\n    });\n    function is(value) {\n        return IdCancellationReceiverStrategy.is(value) || RequestCancellationReceiverStrategy.is(value);\n    }\n    CancellationReceiverStrategy.is = is;\n})(CancellationReceiverStrategy = exports.CancellationReceiverStrategy || (exports.CancellationReceiverStrategy = {}));\nvar CancellationSenderStrategy;\n(function (CancellationSenderStrategy) {\n    CancellationSenderStrategy.Message = Object.freeze({\n        sendCancellation(conn, id) {\n            return conn.sendNotification(CancelNotification.type, { id });\n        },\n        cleanup(_) { }\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.sendCancellation) && Is.func(candidate.cleanup);\n    }\n    CancellationSenderStrategy.is = is;\n})(CancellationSenderStrategy = exports.CancellationSenderStrategy || (exports.CancellationSenderStrategy = {}));\nvar CancellationStrategy;\n(function (CancellationStrategy) {\n    CancellationStrategy.Message = Object.freeze({\n        receiver: CancellationReceiverStrategy.Message,\n        sender: CancellationSenderStrategy.Message\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && CancellationReceiverStrategy.is(candidate.receiver) && CancellationSenderStrategy.is(candidate.sender);\n    }\n    CancellationStrategy.is = is;\n})(CancellationStrategy = exports.CancellationStrategy || (exports.CancellationStrategy = {}));\nvar MessageStrategy;\n(function (MessageStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.handleMessage);\n    }\n    MessageStrategy.is = is;\n})(MessageStrategy = exports.MessageStrategy || (exports.MessageStrategy = {}));\nvar ConnectionOptions;\n(function (ConnectionOptions) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (CancellationStrategy.is(candidate.cancellationStrategy) || ConnectionStrategy.is(candidate.connectionStrategy) || MessageStrategy.is(candidate.messageStrategy));\n    }\n    ConnectionOptions.is = is;\n})(ConnectionOptions = exports.ConnectionOptions || (exports.ConnectionOptions = {}));\nvar ConnectionState;\n(function (ConnectionState) {\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\n})(ConnectionState || (ConnectionState = {}));\nfunction createMessageConnection(messageReader, messageWriter, _logger, options) {\n    const logger = _logger !== undefined ? _logger : exports.NullLogger;\n    let sequenceNumber = 0;\n    let notificationSequenceNumber = 0;\n    let unknownResponseSequenceNumber = 0;\n    const version = '2.0';\n    let starRequestHandler = undefined;\n    const requestHandlers = new Map();\n    let starNotificationHandler = undefined;\n    const notificationHandlers = new Map();\n    const progressHandlers = new Map();\n    let timer;\n    let messageQueue = new linkedMap_1.LinkedMap();\n    let responsePromises = new Map();\n    let knownCanceledRequests = new Set();\n    let requestTokens = new Map();\n    let trace = Trace.Off;\n    let traceFormat = TraceFormat.Text;\n    let tracer;\n    let state = ConnectionState.New;\n    const errorEmitter = new events_1.Emitter();\n    const closeEmitter = new events_1.Emitter();\n    const unhandledNotificationEmitter = new events_1.Emitter();\n    const unhandledProgressEmitter = new events_1.Emitter();\n    const disposeEmitter = new events_1.Emitter();\n    const cancellationStrategy = (options && options.cancellationStrategy) ? options.cancellationStrategy : CancellationStrategy.Message;\n    function createRequestQueueKey(id) {\n        if (id === null) {\n            throw new Error(`Can't send requests with id null since the response can't be correlated.`);\n        }\n        return 'req-' + id.toString();\n    }\n    function createResponseQueueKey(id) {\n        if (id === null) {\n            return 'res-unknown-' + (++unknownResponseSequenceNumber).toString();\n        }\n        else {\n            return 'res-' + id.toString();\n        }\n    }\n    function createNotificationQueueKey() {\n        return 'not-' + (++notificationSequenceNumber).toString();\n    }\n    function addMessageToQueue(queue, message) {\n        if (messages_1.Message.isRequest(message)) {\n            queue.set(createRequestQueueKey(message.id), message);\n        }\n        else if (messages_1.Message.isResponse(message)) {\n            queue.set(createResponseQueueKey(message.id), message);\n        }\n        else {\n            queue.set(createNotificationQueueKey(), message);\n        }\n    }\n    function cancelUndispatched(_message) {\n        return undefined;\n    }\n    function isListening() {\n        return state === ConnectionState.Listening;\n    }\n    function isClosed() {\n        return state === ConnectionState.Closed;\n    }\n    function isDisposed() {\n        return state === ConnectionState.Disposed;\n    }\n    function closeHandler() {\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\n            state = ConnectionState.Closed;\n            closeEmitter.fire(undefined);\n        }\n        // If the connection is disposed don't sent close events.\n    }\n    function readErrorHandler(error) {\n        errorEmitter.fire([error, undefined, undefined]);\n    }\n    function writeErrorHandler(data) {\n        errorEmitter.fire(data);\n    }\n    messageReader.onClose(closeHandler);\n    messageReader.onError(readErrorHandler);\n    messageWriter.onClose(closeHandler);\n    messageWriter.onError(writeErrorHandler);\n    function triggerMessageQueue() {\n        if (timer || messageQueue.size === 0) {\n            return;\n        }\n        timer = (0, ral_1.default)().timer.setImmediate(() => {\n            timer = undefined;\n            processMessageQueue();\n        });\n    }\n    function handleMessage(message) {\n        if (messages_1.Message.isRequest(message)) {\n            handleRequest(message);\n        }\n        else if (messages_1.Message.isNotification(message)) {\n            handleNotification(message);\n        }\n        else if (messages_1.Message.isResponse(message)) {\n            handleResponse(message);\n        }\n        else {\n            handleInvalidMessage(message);\n        }\n    }\n    function processMessageQueue() {\n        if (messageQueue.size === 0) {\n            return;\n        }\n        const message = messageQueue.shift();\n        try {\n            const messageStrategy = options?.messageStrategy;\n            if (MessageStrategy.is(messageStrategy)) {\n                messageStrategy.handleMessage(message, handleMessage);\n            }\n            else {\n                handleMessage(message);\n            }\n        }\n        finally {\n            triggerMessageQueue();\n        }\n    }\n    const callback = (message) => {\n        try {\n            // We have received a cancellation message. Check if the message is still in the queue\n            // and cancel it if allowed to do so.\n            if (messages_1.Message.isNotification(message) && message.method === CancelNotification.type.method) {\n                const cancelId = message.params.id;\n                const key = createRequestQueueKey(cancelId);\n                const toCancel = messageQueue.get(key);\n                if (messages_1.Message.isRequest(toCancel)) {\n                    const strategy = options?.connectionStrategy;\n                    const response = (strategy && strategy.cancelUndispatched) ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\n                    if (response && (response.error !== undefined || response.result !== undefined)) {\n                        messageQueue.delete(key);\n                        requestTokens.delete(cancelId);\n                        response.id = toCancel.id;\n                        traceSendingResponse(response, message.method, Date.now());\n                        messageWriter.write(response).catch(() => logger.error(`Sending response for canceled message failed.`));\n                        return;\n                    }\n                }\n                const cancellationToken = requestTokens.get(cancelId);\n                // The request is already running. Cancel the token\n                if (cancellationToken !== undefined) {\n                    cancellationToken.cancel();\n                    traceReceivedNotification(message);\n                    return;\n                }\n                else {\n                    // Remember the cancel but still queue the message to\n                    // clean up state in process message.\n                    knownCanceledRequests.add(cancelId);\n                }\n            }\n            addMessageToQueue(messageQueue, message);\n        }\n        finally {\n            triggerMessageQueue();\n        }\n    };\n    function handleRequest(requestMessage) {\n        if (isDisposed()) {\n            // we return here silently since we fired an event when the\n            // connection got disposed.\n            return;\n        }\n        function reply(resultOrError, method, startTime) {\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id\n            };\n            if (resultOrError instanceof messages_1.ResponseError) {\n                message.error = resultOrError.toJson();\n            }\n            else {\n                message.result = resultOrError === undefined ? null : resultOrError;\n            }\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message).catch(() => logger.error(`Sending response failed.`));\n        }\n        function replyError(error, method, startTime) {\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id,\n                error: error.toJson()\n            };\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message).catch(() => logger.error(`Sending response failed.`));\n        }\n        function replySuccess(result, method, startTime) {\n            // The JSON RPC defines that a response must either have a result or an error\n            // So we can't treat undefined as a valid response result.\n            if (result === undefined) {\n                result = null;\n            }\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id,\n                result: result\n            };\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message).catch(() => logger.error(`Sending response failed.`));\n        }\n        traceReceivedRequest(requestMessage);\n        const element = requestHandlers.get(requestMessage.method);\n        let type;\n        let requestHandler;\n        if (element) {\n            type = element.type;\n            requestHandler = element.handler;\n        }\n        const startTime = Date.now();\n        if (requestHandler || starRequestHandler) {\n            const tokenKey = requestMessage.id ?? String(Date.now()); //\n            const cancellationSource = IdCancellationReceiverStrategy.is(cancellationStrategy.receiver)\n                ? cancellationStrategy.receiver.createCancellationTokenSource(tokenKey)\n                : cancellationStrategy.receiver.createCancellationTokenSource(requestMessage);\n            if (requestMessage.id !== null && knownCanceledRequests.has(requestMessage.id)) {\n                cancellationSource.cancel();\n            }\n            if (requestMessage.id !== null) {\n                requestTokens.set(tokenKey, cancellationSource);\n            }\n            try {\n                let handlerResult;\n                if (requestHandler) {\n                    if (requestMessage.params === undefined) {\n                        if (type !== undefined && type.numberOfParams !== 0) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines ${type.numberOfParams} params but received none.`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(cancellationSource.token);\n                    }\n                    else if (Array.isArray(requestMessage.params)) {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byName) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines parameters by name but received parameters by position`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(...requestMessage.params, cancellationSource.token);\n                    }\n                    else {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byPosition) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines parameters by position but received parameters by name`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(requestMessage.params, cancellationSource.token);\n                    }\n                }\n                else if (starRequestHandler) {\n                    handlerResult = starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\n                }\n                const promise = handlerResult;\n                if (!handlerResult) {\n                    requestTokens.delete(tokenKey);\n                    replySuccess(handlerResult, requestMessage.method, startTime);\n                }\n                else if (promise.then) {\n                    promise.then((resultOrError) => {\n                        requestTokens.delete(tokenKey);\n                        reply(resultOrError, requestMessage.method, startTime);\n                    }, error => {\n                        requestTokens.delete(tokenKey);\n                        if (error instanceof messages_1.ResponseError) {\n                            replyError(error, requestMessage.method, startTime);\n                        }\n                        else if (error && Is.string(error.message)) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\n                        }\n                        else {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\n                        }\n                    });\n                }\n                else {\n                    requestTokens.delete(tokenKey);\n                    reply(handlerResult, requestMessage.method, startTime);\n                }\n            }\n            catch (error) {\n                requestTokens.delete(tokenKey);\n                if (error instanceof messages_1.ResponseError) {\n                    reply(error, requestMessage.method, startTime);\n                }\n                else if (error && Is.string(error.message)) {\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\n                }\n                else {\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\n                }\n            }\n        }\n        else {\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\n        }\n    }\n    function handleResponse(responseMessage) {\n        if (isDisposed()) {\n            // See handle request.\n            return;\n        }\n        if (responseMessage.id === null) {\n            if (responseMessage.error) {\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\n            }\n            else {\n                logger.error(`Received response message without id. No further error information provided.`);\n            }\n        }\n        else {\n            const key = responseMessage.id;\n            const responsePromise = responsePromises.get(key);\n            traceReceivedResponse(responseMessage, responsePromise);\n            if (responsePromise !== undefined) {\n                responsePromises.delete(key);\n                try {\n                    if (responseMessage.error) {\n                        const error = responseMessage.error;\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\n                    }\n                    else if (responseMessage.result !== undefined) {\n                        responsePromise.resolve(responseMessage.result);\n                    }\n                    else {\n                        throw new Error('Should never happen.');\n                    }\n                }\n                catch (error) {\n                    if (error.message) {\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\n                    }\n                    else {\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\n                    }\n                }\n            }\n        }\n    }\n    function handleNotification(message) {\n        if (isDisposed()) {\n            // See handle request.\n            return;\n        }\n        let type = undefined;\n        let notificationHandler;\n        if (message.method === CancelNotification.type.method) {\n            const cancelId = message.params.id;\n            knownCanceledRequests.delete(cancelId);\n            traceReceivedNotification(message);\n            return;\n        }\n        else {\n            const element = notificationHandlers.get(message.method);\n            if (element) {\n                notificationHandler = element.handler;\n                type = element.type;\n            }\n        }\n        if (notificationHandler || starNotificationHandler) {\n            try {\n                traceReceivedNotification(message);\n                if (notificationHandler) {\n                    if (message.params === undefined) {\n                        if (type !== undefined) {\n                            if (type.numberOfParams !== 0 && type.parameterStructures !== messages_1.ParameterStructures.byName) {\n                                logger.error(`Notification ${message.method} defines ${type.numberOfParams} params but received none.`);\n                            }\n                        }\n                        notificationHandler();\n                    }\n                    else if (Array.isArray(message.params)) {\n                        // There are JSON-RPC libraries that send progress message as positional params although\n                        // specified as named. So convert them if this is the case.\n                        const params = message.params;\n                        if (message.method === ProgressNotification.type.method && params.length === 2 && ProgressToken.is(params[0])) {\n                            notificationHandler({ token: params[0], value: params[1] });\n                        }\n                        else {\n                            if (type !== undefined) {\n                                if (type.parameterStructures === messages_1.ParameterStructures.byName) {\n                                    logger.error(`Notification ${message.method} defines parameters by name but received parameters by position`);\n                                }\n                                if (type.numberOfParams !== message.params.length) {\n                                    logger.error(`Notification ${message.method} defines ${type.numberOfParams} params but received ${params.length} arguments`);\n                                }\n                            }\n                            notificationHandler(...params);\n                        }\n                    }\n                    else {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byPosition) {\n                            logger.error(`Notification ${message.method} defines parameters by position but received parameters by name`);\n                        }\n                        notificationHandler(message.params);\n                    }\n                }\n                else if (starNotificationHandler) {\n                    starNotificationHandler(message.method, message.params);\n                }\n            }\n            catch (error) {\n                if (error.message) {\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\n                }\n                else {\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\n                }\n            }\n        }\n        else {\n            unhandledNotificationEmitter.fire(message);\n        }\n    }\n    function handleInvalidMessage(message) {\n        if (!message) {\n            logger.error('Received empty message.');\n            return;\n        }\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\n        // Test whether we find an id to reject the promise\n        const responseMessage = message;\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\n            const key = responseMessage.id;\n            const responseHandler = responsePromises.get(key);\n            if (responseHandler) {\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\n            }\n        }\n    }\n    function stringifyTrace(params) {\n        if (params === undefined || params === null) {\n            return undefined;\n        }\n        switch (trace) {\n            case Trace.Verbose:\n                return JSON.stringify(params, null, 4);\n            case Trace.Compact:\n                return JSON.stringify(params);\n            default:\n                return undefined;\n        }\n    }\n    function traceSendingRequest(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if ((trace === Trace.Verbose || trace === Trace.Compact) && message.params) {\n                data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n            }\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\n        }\n        else {\n            logLSPMessage('send-request', message);\n        }\n    }\n    function traceSendingNotification(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.params) {\n                    data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n                }\n                else {\n                    data = 'No parameters provided.\\n\\n';\n                }\n            }\n            tracer.log(`Sending notification '${message.method}'.`, data);\n        }\n        else {\n            logLSPMessage('send-notification', message);\n        }\n    }\n    function traceSendingResponse(message, method, startTime) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.error && message.error.data) {\n                    data = `Error data: ${stringifyTrace(message.error.data)}\\n\\n`;\n                }\n                else {\n                    if (message.result) {\n                        data = `Result: ${stringifyTrace(message.result)}\\n\\n`;\n                    }\n                    else if (message.error === undefined) {\n                        data = 'No result returned.\\n\\n';\n                    }\n                }\n            }\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\n        }\n        else {\n            logLSPMessage('send-response', message);\n        }\n    }\n    function traceReceivedRequest(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if ((trace === Trace.Verbose || trace === Trace.Compact) && message.params) {\n                data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n            }\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\n        }\n        else {\n            logLSPMessage('receive-request', message);\n        }\n    }\n    function traceReceivedNotification(message) {\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.params) {\n                    data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n                }\n                else {\n                    data = 'No parameters provided.\\n\\n';\n                }\n            }\n            tracer.log(`Received notification '${message.method}'.`, data);\n        }\n        else {\n            logLSPMessage('receive-notification', message);\n        }\n    }\n    function traceReceivedResponse(message, responsePromise) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.error && message.error.data) {\n                    data = `Error data: ${stringifyTrace(message.error.data)}\\n\\n`;\n                }\n                else {\n                    if (message.result) {\n                        data = `Result: ${stringifyTrace(message.result)}\\n\\n`;\n                    }\n                    else if (message.error === undefined) {\n                        data = 'No result returned.\\n\\n';\n                    }\n                }\n            }\n            if (responsePromise) {\n                const error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\n            }\n            else {\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\n            }\n        }\n        else {\n            logLSPMessage('receive-response', message);\n        }\n    }\n    function logLSPMessage(type, message) {\n        if (!tracer || trace === Trace.Off) {\n            return;\n        }\n        const lspMessage = {\n            isLSPMessage: true,\n            type,\n            message,\n            timestamp: Date.now()\n        };\n        tracer.log(lspMessage);\n    }\n    function throwIfClosedOrDisposed() {\n        if (isClosed()) {\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\n        }\n        if (isDisposed()) {\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\n        }\n    }\n    function throwIfListening() {\n        if (isListening()) {\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\n        }\n    }\n    function throwIfNotListening() {\n        if (!isListening()) {\n            throw new Error('Call listen() first.');\n        }\n    }\n    function undefinedToNull(param) {\n        if (param === undefined) {\n            return null;\n        }\n        else {\n            return param;\n        }\n    }\n    function nullToUndefined(param) {\n        if (param === null) {\n            return undefined;\n        }\n        else {\n            return param;\n        }\n    }\n    function isNamedParam(param) {\n        return param !== undefined && param !== null && !Array.isArray(param) && typeof param === 'object';\n    }\n    function computeSingleParam(parameterStructures, param) {\n        switch (parameterStructures) {\n            case messages_1.ParameterStructures.auto:\n                if (isNamedParam(param)) {\n                    return nullToUndefined(param);\n                }\n                else {\n                    return [undefinedToNull(param)];\n                }\n            case messages_1.ParameterStructures.byName:\n                if (!isNamedParam(param)) {\n                    throw new Error(`Received parameters by name but param is not an object literal.`);\n                }\n                return nullToUndefined(param);\n            case messages_1.ParameterStructures.byPosition:\n                return [undefinedToNull(param)];\n            default:\n                throw new Error(`Unknown parameter structure ${parameterStructures.toString()}`);\n        }\n    }\n    function computeMessageParams(type, params) {\n        let result;\n        const numberOfParams = type.numberOfParams;\n        switch (numberOfParams) {\n            case 0:\n                result = undefined;\n                break;\n            case 1:\n                result = computeSingleParam(type.parameterStructures, params[0]);\n                break;\n            default:\n                result = [];\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\n                    result.push(undefinedToNull(params[i]));\n                }\n                if (params.length < numberOfParams) {\n                    for (let i = params.length; i < numberOfParams; i++) {\n                        result.push(null);\n                    }\n                }\n                break;\n        }\n        return result;\n    }\n    const connection = {\n        sendNotification: (type, ...args) => {\n            throwIfClosedOrDisposed();\n            let method;\n            let messageParams;\n            if (Is.string(type)) {\n                method = type;\n                const first = args[0];\n                let paramStart = 0;\n                let parameterStructures = messages_1.ParameterStructures.auto;\n                if (messages_1.ParameterStructures.is(first)) {\n                    paramStart = 1;\n                    parameterStructures = first;\n                }\n                let paramEnd = args.length;\n                const numberOfParams = paramEnd - paramStart;\n                switch (numberOfParams) {\n                    case 0:\n                        messageParams = undefined;\n                        break;\n                    case 1:\n                        messageParams = computeSingleParam(parameterStructures, args[paramStart]);\n                        break;\n                    default:\n                        if (parameterStructures === messages_1.ParameterStructures.byName) {\n                            throw new Error(`Received ${numberOfParams} parameters for 'by Name' notification parameter structure.`);\n                        }\n                        messageParams = args.slice(paramStart, paramEnd).map(value => undefinedToNull(value));\n                        break;\n                }\n            }\n            else {\n                const params = args;\n                method = type.method;\n                messageParams = computeMessageParams(type, params);\n            }\n            const notificationMessage = {\n                jsonrpc: version,\n                method: method,\n                params: messageParams\n            };\n            traceSendingNotification(notificationMessage);\n            return messageWriter.write(notificationMessage).catch((error) => {\n                logger.error(`Sending notification failed.`);\n                throw error;\n            });\n        },\n        onNotification: (type, handler) => {\n            throwIfClosedOrDisposed();\n            let method;\n            if (Is.func(type)) {\n                starNotificationHandler = type;\n            }\n            else if (handler) {\n                if (Is.string(type)) {\n                    method = type;\n                    notificationHandlers.set(type, { type: undefined, handler });\n                }\n                else {\n                    method = type.method;\n                    notificationHandlers.set(type.method, { type, handler });\n                }\n            }\n            return {\n                dispose: () => {\n                    if (method !== undefined) {\n                        notificationHandlers.delete(method);\n                    }\n                    else {\n                        starNotificationHandler = undefined;\n                    }\n                }\n            };\n        },\n        onProgress: (_type, token, handler) => {\n            if (progressHandlers.has(token)) {\n                throw new Error(`Progress handler for token ${token} already registered`);\n            }\n            progressHandlers.set(token, handler);\n            return {\n                dispose: () => {\n                    progressHandlers.delete(token);\n                }\n            };\n        },\n        sendProgress: (_type, token, value) => {\n            // This should not await but simple return to ensure that we don't have another\n            // async scheduling. Otherwise one send could overtake another send.\n            return connection.sendNotification(ProgressNotification.type, { token, value });\n        },\n        onUnhandledProgress: unhandledProgressEmitter.event,\n        sendRequest: (type, ...args) => {\n            throwIfClosedOrDisposed();\n            throwIfNotListening();\n            let method;\n            let messageParams;\n            let token = undefined;\n            if (Is.string(type)) {\n                method = type;\n                const first = args[0];\n                const last = args[args.length - 1];\n                let paramStart = 0;\n                let parameterStructures = messages_1.ParameterStructures.auto;\n                if (messages_1.ParameterStructures.is(first)) {\n                    paramStart = 1;\n                    parameterStructures = first;\n                }\n                let paramEnd = args.length;\n                if (cancellation_1.CancellationToken.is(last)) {\n                    paramEnd = paramEnd - 1;\n                    token = last;\n                }\n                const numberOfParams = paramEnd - paramStart;\n                switch (numberOfParams) {\n                    case 0:\n                        messageParams = undefined;\n                        break;\n                    case 1:\n                        messageParams = computeSingleParam(parameterStructures, args[paramStart]);\n                        break;\n                    default:\n                        if (parameterStructures === messages_1.ParameterStructures.byName) {\n                            throw new Error(`Received ${numberOfParams} parameters for 'by Name' request parameter structure.`);\n                        }\n                        messageParams = args.slice(paramStart, paramEnd).map(value => undefinedToNull(value));\n                        break;\n                }\n            }\n            else {\n                const params = args;\n                method = type.method;\n                messageParams = computeMessageParams(type, params);\n                const numberOfParams = type.numberOfParams;\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\n            }\n            const id = sequenceNumber++;\n            let disposable;\n            if (token) {\n                disposable = token.onCancellationRequested(() => {\n                    const p = cancellationStrategy.sender.sendCancellation(connection, id);\n                    if (p === undefined) {\n                        logger.log(`Received no promise from cancellation strategy when cancelling id ${id}`);\n                        return Promise.resolve();\n                    }\n                    else {\n                        return p.catch(() => {\n                            logger.log(`Sending cancellation messages for id ${id} failed`);\n                        });\n                    }\n                });\n            }\n            const requestMessage = {\n                jsonrpc: version,\n                id: id,\n                method: method,\n                params: messageParams\n            };\n            traceSendingRequest(requestMessage);\n            if (typeof cancellationStrategy.sender.enableCancellation === 'function') {\n                cancellationStrategy.sender.enableCancellation(requestMessage);\n            }\n            return new Promise(async (resolve, reject) => {\n                const resolveWithCleanup = (r) => {\n                    resolve(r);\n                    cancellationStrategy.sender.cleanup(id);\n                    disposable?.dispose();\n                };\n                const rejectWithCleanup = (r) => {\n                    reject(r);\n                    cancellationStrategy.sender.cleanup(id);\n                    disposable?.dispose();\n                };\n                const responsePromise = { method: method, timerStart: Date.now(), resolve: resolveWithCleanup, reject: rejectWithCleanup };\n                try {\n                    await messageWriter.write(requestMessage);\n                    responsePromises.set(id, responsePromise);\n                }\n                catch (error) {\n                    logger.error(`Sending request failed.`);\n                    // Writing the message failed. So we need to reject the promise.\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, error.message ? error.message : 'Unknown reason'));\n                    throw error;\n                }\n            });\n        },\n        onRequest: (type, handler) => {\n            throwIfClosedOrDisposed();\n            let method = null;\n            if (StarRequestHandler.is(type)) {\n                method = undefined;\n                starRequestHandler = type;\n            }\n            else if (Is.string(type)) {\n                method = null;\n                if (handler !== undefined) {\n                    method = type;\n                    requestHandlers.set(type, { handler: handler, type: undefined });\n                }\n            }\n            else {\n                if (handler !== undefined) {\n                    method = type.method;\n                    requestHandlers.set(type.method, { type, handler });\n                }\n            }\n            return {\n                dispose: () => {\n                    if (method === null) {\n                        return;\n                    }\n                    if (method !== undefined) {\n                        requestHandlers.delete(method);\n                    }\n                    else {\n                        starRequestHandler = undefined;\n                    }\n                }\n            };\n        },\n        hasPendingResponse: () => {\n            return responsePromises.size > 0;\n        },\n        trace: async (_value, _tracer, sendNotificationOrTraceOptions) => {\n            let _sendNotification = false;\n            let _traceFormat = TraceFormat.Text;\n            if (sendNotificationOrTraceOptions !== undefined) {\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\n                    _sendNotification = sendNotificationOrTraceOptions;\n                }\n                else {\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\n                }\n            }\n            trace = _value;\n            traceFormat = _traceFormat;\n            if (trace === Trace.Off) {\n                tracer = undefined;\n            }\n            else {\n                tracer = _tracer;\n            }\n            if (_sendNotification && !isClosed() && !isDisposed()) {\n                await connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\n            }\n        },\n        onError: errorEmitter.event,\n        onClose: closeEmitter.event,\n        onUnhandledNotification: unhandledNotificationEmitter.event,\n        onDispose: disposeEmitter.event,\n        end: () => {\n            messageWriter.end();\n        },\n        dispose: () => {\n            if (isDisposed()) {\n                return;\n            }\n            state = ConnectionState.Disposed;\n            disposeEmitter.fire(undefined);\n            const error = new messages_1.ResponseError(messages_1.ErrorCodes.PendingResponseRejected, 'Pending response rejected since connection got disposed');\n            for (const promise of responsePromises.values()) {\n                promise.reject(error);\n            }\n            responsePromises = new Map();\n            requestTokens = new Map();\n            knownCanceledRequests = new Set();\n            messageQueue = new linkedMap_1.LinkedMap();\n            // Test for backwards compatibility\n            if (Is.func(messageWriter.dispose)) {\n                messageWriter.dispose();\n            }\n            if (Is.func(messageReader.dispose)) {\n                messageReader.dispose();\n            }\n        },\n        listen: () => {\n            throwIfClosedOrDisposed();\n            throwIfListening();\n            state = ConnectionState.Listening;\n            messageReader.listen(callback);\n        },\n        inspect: () => {\n            // eslint-disable-next-line no-console\n            (0, ral_1.default)().console.log('inspect');\n        }\n    };\n    connection.onNotification(LogTraceNotification.type, (params) => {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        const verbose = trace === Trace.Verbose || trace === Trace.Compact;\n        tracer.log(params.message, verbose ? params.verbose : undefined);\n    });\n    connection.onNotification(ProgressNotification.type, (params) => {\n        const handler = progressHandlers.get(params.token);\n        if (handler) {\n            handler(params.value);\n        }\n        else {\n            unhandledProgressEmitter.fire(params);\n        }\n    });\n    return connection;\n}\nexports.createMessageConnection = createMessageConnection;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Disposable = void 0;\nvar Disposable;\n(function (Disposable) {\n    function create(func) {\n        return {\n            dispose: func\n        };\n    }\n    Disposable.create = create;\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Emitter = exports.Event = void 0;\nconst ral_1 = require(\"./ral\");\nvar Event;\n(function (Event) {\n    const _disposable = { dispose() { } };\n    Event.None = function () { return _disposable; };\n})(Event = exports.Event || (exports.Event = {}));\nclass CallbackList {\n    add(callback, context = null, bucket) {\n        if (!this._callbacks) {\n            this._callbacks = [];\n            this._contexts = [];\n        }\n        this._callbacks.push(callback);\n        this._contexts.push(context);\n        if (Array.isArray(bucket)) {\n            bucket.push({ dispose: () => this.remove(callback, context) });\n        }\n    }\n    remove(callback, context = null) {\n        if (!this._callbacks) {\n            return;\n        }\n        let foundCallbackWithDifferentContext = false;\n        for (let i = 0, len = this._callbacks.length; i < len; i++) {\n            if (this._callbacks[i] === callback) {\n                if (this._contexts[i] === context) {\n                    // callback & context match => remove it\n                    this._callbacks.splice(i, 1);\n                    this._contexts.splice(i, 1);\n                    return;\n                }\n                else {\n                    foundCallbackWithDifferentContext = true;\n                }\n            }\n        }\n        if (foundCallbackWithDifferentContext) {\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\n        }\n    }\n    invoke(...args) {\n        if (!this._callbacks) {\n            return [];\n        }\n        const ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\n        for (let i = 0, len = callbacks.length; i < len; i++) {\n            try {\n                ret.push(callbacks[i].apply(contexts[i], args));\n            }\n            catch (e) {\n                // eslint-disable-next-line no-console\n                (0, ral_1.default)().console.error(e);\n            }\n        }\n        return ret;\n    }\n    isEmpty() {\n        return !this._callbacks || this._callbacks.length === 0;\n    }\n    dispose() {\n        this._callbacks = undefined;\n        this._contexts = undefined;\n    }\n}\nclass Emitter {\n    constructor(_options) {\n        this._options = _options;\n    }\n    /**\n     * For the public to allow to subscribe\n     * to events from this Emitter\n     */\n    get event() {\n        if (!this._event) {\n            this._event = (listener, thisArgs, disposables) => {\n                if (!this._callbacks) {\n                    this._callbacks = new CallbackList();\n                }\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\n                    this._options.onFirstListenerAdd(this);\n                }\n                this._callbacks.add(listener, thisArgs);\n                const result = {\n                    dispose: () => {\n                        if (!this._callbacks) {\n                            // disposable is disposed after emitter is disposed.\n                            return;\n                        }\n                        this._callbacks.remove(listener, thisArgs);\n                        result.dispose = Emitter._noop;\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\n                            this._options.onLastListenerRemove(this);\n                        }\n                    }\n                };\n                if (Array.isArray(disposables)) {\n                    disposables.push(result);\n                }\n                return result;\n            };\n        }\n        return this._event;\n    }\n    /**\n     * To be kept private to fire an event to\n     * subscribers\n     */\n    fire(event) {\n        if (this._callbacks) {\n            this._callbacks.invoke.call(this._callbacks, event);\n        }\n    }\n    dispose() {\n        if (this._callbacks) {\n            this._callbacks.dispose();\n            this._callbacks = undefined;\n        }\n    }\n}\nexports.Emitter = Emitter;\nEmitter._noop = function () { };\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.stringArray = exports.array = exports.func = exports.error = exports.number = exports.string = exports.boolean = void 0;\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LRUCache = exports.LinkedMap = exports.Touch = void 0;\nvar Touch;\n(function (Touch) {\n    Touch.None = 0;\n    Touch.First = 1;\n    Touch.AsOld = Touch.First;\n    Touch.Last = 2;\n    Touch.AsNew = Touch.Last;\n})(Touch = exports.Touch || (exports.Touch = {}));\nclass LinkedMap {\n    constructor() {\n        this[_a] = 'LinkedMap';\n        this._map = new Map();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state = 0;\n    }\n    clear() {\n        this._map.clear();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state++;\n    }\n    isEmpty() {\n        return !this._head && !this._tail;\n    }\n    get size() {\n        return this._size;\n    }\n    get first() {\n        return this._head?.value;\n    }\n    get last() {\n        return this._tail?.value;\n    }\n    has(key) {\n        return this._map.has(key);\n    }\n    get(key, touch = Touch.None) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        if (touch !== Touch.None) {\n            this.touch(item, touch);\n        }\n        return item.value;\n    }\n    set(key, value, touch = Touch.None) {\n        let item = this._map.get(key);\n        if (item) {\n            item.value = value;\n            if (touch !== Touch.None) {\n                this.touch(item, touch);\n            }\n        }\n        else {\n            item = { key, value, next: undefined, previous: undefined };\n            switch (touch) {\n                case Touch.None:\n                    this.addItemLast(item);\n                    break;\n                case Touch.First:\n                    this.addItemFirst(item);\n                    break;\n                case Touch.Last:\n                    this.addItemLast(item);\n                    break;\n                default:\n                    this.addItemLast(item);\n                    break;\n            }\n            this._map.set(key, item);\n            this._size++;\n        }\n        return this;\n    }\n    delete(key) {\n        return !!this.remove(key);\n    }\n    remove(key) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        this._map.delete(key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    shift() {\n        if (!this._head && !this._tail) {\n            return undefined;\n        }\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        const item = this._head;\n        this._map.delete(item.key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    forEach(callbackfn, thisArg) {\n        const state = this._state;\n        let current = this._head;\n        while (current) {\n            if (thisArg) {\n                callbackfn.bind(thisArg)(current.value, current.key, this);\n            }\n            else {\n                callbackfn(current.value, current.key, this);\n            }\n            if (this._state !== state) {\n                throw new Error(`LinkedMap got modified during iteration.`);\n            }\n            current = current.next;\n        }\n    }\n    keys() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.key, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    values() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.value, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    entries() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: [current.key, current.value], done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    [(_a = Symbol.toStringTag, Symbol.iterator)]() {\n        return this.entries();\n    }\n    trimOld(newSize) {\n        if (newSize >= this.size) {\n            return;\n        }\n        if (newSize === 0) {\n            this.clear();\n            return;\n        }\n        let current = this._head;\n        let currentSize = this.size;\n        while (current && currentSize > newSize) {\n            this._map.delete(current.key);\n            current = current.next;\n            currentSize--;\n        }\n        this._head = current;\n        this._size = currentSize;\n        if (current) {\n            current.previous = undefined;\n        }\n        this._state++;\n    }\n    addItemFirst(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._tail = item;\n        }\n        else if (!this._head) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.next = this._head;\n            this._head.previous = item;\n        }\n        this._head = item;\n        this._state++;\n    }\n    addItemLast(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._head = item;\n        }\n        else if (!this._tail) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.previous = this._tail;\n            this._tail.next = item;\n        }\n        this._tail = item;\n        this._state++;\n    }\n    removeItem(item) {\n        if (item === this._head && item === this._tail) {\n            this._head = undefined;\n            this._tail = undefined;\n        }\n        else if (item === this._head) {\n            // This can only happened if size === 1 which is handle\n            // by the case above.\n            if (!item.next) {\n                throw new Error('Invalid list');\n            }\n            item.next.previous = undefined;\n            this._head = item.next;\n        }\n        else if (item === this._tail) {\n            // This can only happened if size === 1 which is handle\n            // by the case above.\n            if (!item.previous) {\n                throw new Error('Invalid list');\n            }\n            item.previous.next = undefined;\n            this._tail = item.previous;\n        }\n        else {\n            const next = item.next;\n            const previous = item.previous;\n            if (!next || !previous) {\n                throw new Error('Invalid list');\n            }\n            next.previous = previous;\n            previous.next = next;\n        }\n        item.next = undefined;\n        item.previous = undefined;\n        this._state++;\n    }\n    touch(item, touch) {\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\n            return;\n        }\n        if (touch === Touch.First) {\n            if (item === this._head) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item\n            if (item === this._tail) {\n                // previous must be defined since item was not head but is tail\n                // So there are more than on item in the map\n                previous.next = undefined;\n                this._tail = previous;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            // Insert the node at head\n            item.previous = undefined;\n            item.next = this._head;\n            this._head.previous = item;\n            this._head = item;\n            this._state++;\n        }\n        else if (touch === Touch.Last) {\n            if (item === this._tail) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item.\n            if (item === this._head) {\n                // next must be defined since item was not tail but is head\n                // So there are more than on item in the map\n                next.previous = undefined;\n                this._head = next;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            item.next = undefined;\n            item.previous = this._tail;\n            this._tail.next = item;\n            this._tail = item;\n            this._state++;\n        }\n    }\n    toJSON() {\n        const data = [];\n        this.forEach((value, key) => {\n            data.push([key, value]);\n        });\n        return data;\n    }\n    fromJSON(data) {\n        this.clear();\n        for (const [key, value] of data) {\n            this.set(key, value);\n        }\n    }\n}\nexports.LinkedMap = LinkedMap;\nclass LRUCache extends LinkedMap {\n    constructor(limit, ratio = 1) {\n        super();\n        this._limit = limit;\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n    }\n    get limit() {\n        return this._limit;\n    }\n    set limit(limit) {\n        this._limit = limit;\n        this.checkTrim();\n    }\n    get ratio() {\n        return this._ratio;\n    }\n    set ratio(ratio) {\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n        this.checkTrim();\n    }\n    get(key, touch = Touch.AsNew) {\n        return super.get(key, touch);\n    }\n    peek(key) {\n        return super.get(key, Touch.None);\n    }\n    set(key, value) {\n        super.set(key, value, Touch.Last);\n        this.checkTrim();\n        return this;\n    }\n    checkTrim() {\n        if (this.size > this._limit) {\n            this.trimOld(Math.round(this._limit * this._ratio));\n        }\n    }\n}\nexports.LRUCache = LRUCache;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AbstractMessageBuffer = void 0;\nconst CR = 13;\nconst LF = 10;\nconst CRLF = '\\r\\n';\nclass AbstractMessageBuffer {\n    constructor(encoding = 'utf-8') {\n        this._encoding = encoding;\n        this._chunks = [];\n        this._totalLength = 0;\n    }\n    get encoding() {\n        return this._encoding;\n    }\n    append(chunk) {\n        const toAppend = typeof chunk === 'string' ? this.fromString(chunk, this._encoding) : chunk;\n        this._chunks.push(toAppend);\n        this._totalLength += toAppend.byteLength;\n    }\n    tryReadHeaders(lowerCaseKeys = false) {\n        if (this._chunks.length === 0) {\n            return undefined;\n        }\n        let state = 0;\n        let chunkIndex = 0;\n        let offset = 0;\n        let chunkBytesRead = 0;\n        row: while (chunkIndex < this._chunks.length) {\n            const chunk = this._chunks[chunkIndex];\n            offset = 0;\n            column: while (offset < chunk.length) {\n                const value = chunk[offset];\n                switch (value) {\n                    case CR:\n                        switch (state) {\n                            case 0:\n                                state = 1;\n                                break;\n                            case 2:\n                                state = 3;\n                                break;\n                            default:\n                                state = 0;\n                        }\n                        break;\n                    case LF:\n                        switch (state) {\n                            case 1:\n                                state = 2;\n                                break;\n                            case 3:\n                                state = 4;\n                                offset++;\n                                break row;\n                            default:\n                                state = 0;\n                        }\n                        break;\n                    default:\n                        state = 0;\n                }\n                offset++;\n            }\n            chunkBytesRead += chunk.byteLength;\n            chunkIndex++;\n        }\n        if (state !== 4) {\n            return undefined;\n        }\n        // The buffer contains the two CRLF at the end. So we will\n        // have two empty lines after the split at the end as well.\n        const buffer = this._read(chunkBytesRead + offset);\n        const result = new Map();\n        const headers = this.toString(buffer, 'ascii').split(CRLF);\n        if (headers.length < 2) {\n            return result;\n        }\n        for (let i = 0; i < headers.length - 2; i++) {\n            const header = headers[i];\n            const index = header.indexOf(':');\n            if (index === -1) {\n                throw new Error('Message header must separate key and value using :');\n            }\n            const key = header.substr(0, index);\n            const value = header.substr(index + 1).trim();\n            result.set(lowerCaseKeys ? key.toLowerCase() : key, value);\n        }\n        return result;\n    }\n    tryReadBody(length) {\n        if (this._totalLength < length) {\n            return undefined;\n        }\n        return this._read(length);\n    }\n    get numberOfBytes() {\n        return this._totalLength;\n    }\n    _read(byteCount) {\n        if (byteCount === 0) {\n            return this.emptyBuffer();\n        }\n        if (byteCount > this._totalLength) {\n            throw new Error(`Cannot read so many bytes!`);\n        }\n        if (this._chunks[0].byteLength === byteCount) {\n            // super fast path, precisely first chunk must be returned\n            const chunk = this._chunks[0];\n            this._chunks.shift();\n            this._totalLength -= byteCount;\n            return this.asNative(chunk);\n        }\n        if (this._chunks[0].byteLength > byteCount) {\n            // fast path, the reading is entirely within the first chunk\n            const chunk = this._chunks[0];\n            const result = this.asNative(chunk, byteCount);\n            this._chunks[0] = chunk.slice(byteCount);\n            this._totalLength -= byteCount;\n            return result;\n        }\n        const result = this.allocNative(byteCount);\n        let resultOffset = 0;\n        let chunkIndex = 0;\n        while (byteCount > 0) {\n            const chunk = this._chunks[chunkIndex];\n            if (chunk.byteLength > byteCount) {\n                // this chunk will survive\n                const chunkPart = chunk.slice(0, byteCount);\n                result.set(chunkPart, resultOffset);\n                resultOffset += byteCount;\n                this._chunks[chunkIndex] = chunk.slice(byteCount);\n                this._totalLength -= byteCount;\n                byteCount -= byteCount;\n            }\n            else {\n                // this chunk will be entirely read\n                result.set(chunk, resultOffset);\n                resultOffset += chunk.byteLength;\n                this._chunks.shift();\n                this._totalLength -= chunk.byteLength;\n                byteCount -= chunk.byteLength;\n            }\n        }\n        return result;\n    }\n}\nexports.AbstractMessageBuffer = AbstractMessageBuffer;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReadableStreamMessageReader = exports.AbstractMessageReader = exports.MessageReader = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst events_1 = require(\"./events\");\nconst semaphore_1 = require(\"./semaphore\");\nvar MessageReader;\n(function (MessageReader) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\n    }\n    MessageReader.is = is;\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\nclass AbstractMessageReader {\n    constructor() {\n        this.errorEmitter = new events_1.Emitter();\n        this.closeEmitter = new events_1.Emitter();\n        this.partialMessageEmitter = new events_1.Emitter();\n    }\n    dispose() {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n    get onError() {\n        return this.errorEmitter.event;\n    }\n    fireError(error) {\n        this.errorEmitter.fire(this.asError(error));\n    }\n    get onClose() {\n        return this.closeEmitter.event;\n    }\n    fireClose() {\n        this.closeEmitter.fire(undefined);\n    }\n    get onPartialMessage() {\n        return this.partialMessageEmitter.event;\n    }\n    firePartialMessage(info) {\n        this.partialMessageEmitter.fire(info);\n    }\n    asError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else {\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\n        }\n    }\n}\nexports.AbstractMessageReader = AbstractMessageReader;\nvar ResolvedMessageReaderOptions;\n(function (ResolvedMessageReaderOptions) {\n    function fromOptions(options) {\n        let charset;\n        let result;\n        let contentDecoder;\n        const contentDecoders = new Map();\n        let contentTypeDecoder;\n        const contentTypeDecoders = new Map();\n        if (options === undefined || typeof options === 'string') {\n            charset = options ?? 'utf-8';\n        }\n        else {\n            charset = options.charset ?? 'utf-8';\n            if (options.contentDecoder !== undefined) {\n                contentDecoder = options.contentDecoder;\n                contentDecoders.set(contentDecoder.name, contentDecoder);\n            }\n            if (options.contentDecoders !== undefined) {\n                for (const decoder of options.contentDecoders) {\n                    contentDecoders.set(decoder.name, decoder);\n                }\n            }\n            if (options.contentTypeDecoder !== undefined) {\n                contentTypeDecoder = options.contentTypeDecoder;\n                contentTypeDecoders.set(contentTypeDecoder.name, contentTypeDecoder);\n            }\n            if (options.contentTypeDecoders !== undefined) {\n                for (const decoder of options.contentTypeDecoders) {\n                    contentTypeDecoders.set(decoder.name, decoder);\n                }\n            }\n        }\n        if (contentTypeDecoder === undefined) {\n            contentTypeDecoder = (0, ral_1.default)().applicationJson.decoder;\n            contentTypeDecoders.set(contentTypeDecoder.name, contentTypeDecoder);\n        }\n        return { charset, contentDecoder, contentDecoders, contentTypeDecoder, contentTypeDecoders };\n    }\n    ResolvedMessageReaderOptions.fromOptions = fromOptions;\n})(ResolvedMessageReaderOptions || (ResolvedMessageReaderOptions = {}));\nclass ReadableStreamMessageReader extends AbstractMessageReader {\n    constructor(readable, options) {\n        super();\n        this.readable = readable;\n        this.options = ResolvedMessageReaderOptions.fromOptions(options);\n        this.buffer = (0, ral_1.default)().messageBuffer.create(this.options.charset);\n        this._partialMessageTimeout = 10000;\n        this.nextMessageLength = -1;\n        this.messageToken = 0;\n        this.readSemaphore = new semaphore_1.Semaphore(1);\n    }\n    set partialMessageTimeout(timeout) {\n        this._partialMessageTimeout = timeout;\n    }\n    get partialMessageTimeout() {\n        return this._partialMessageTimeout;\n    }\n    listen(callback) {\n        this.nextMessageLength = -1;\n        this.messageToken = 0;\n        this.partialMessageTimer = undefined;\n        this.callback = callback;\n        const result = this.readable.onData((data) => {\n            this.onData(data);\n        });\n        this.readable.onError((error) => this.fireError(error));\n        this.readable.onClose(() => this.fireClose());\n        return result;\n    }\n    onData(data) {\n        this.buffer.append(data);\n        while (true) {\n            if (this.nextMessageLength === -1) {\n                const headers = this.buffer.tryReadHeaders(true);\n                if (!headers) {\n                    return;\n                }\n                const contentLength = headers.get('content-length');\n                if (!contentLength) {\n                    this.fireError(new Error('Header must provide a Content-Length property.'));\n                    return;\n                }\n                const length = parseInt(contentLength);\n                if (isNaN(length)) {\n                    this.fireError(new Error('Content-Length value must be a number.'));\n                    return;\n                }\n                this.nextMessageLength = length;\n            }\n            const body = this.buffer.tryReadBody(this.nextMessageLength);\n            if (body === undefined) {\n                /** We haven't received the full message yet. */\n                this.setPartialMessageTimer();\n                return;\n            }\n            this.clearPartialMessageTimer();\n            this.nextMessageLength = -1;\n            // Make sure that we convert one received message after the\n            // other. Otherwise it could happen that a decoding of a second\n            // smaller message finished before the decoding of a first larger\n            // message and then we would deliver the second message first.\n            this.readSemaphore.lock(async () => {\n                const bytes = this.options.contentDecoder !== undefined\n                    ? await this.options.contentDecoder.decode(body)\n                    : body;\n                const message = await this.options.contentTypeDecoder.decode(bytes, this.options);\n                this.callback(message);\n            }).catch((error) => {\n                this.fireError(error);\n            });\n        }\n    }\n    clearPartialMessageTimer() {\n        if (this.partialMessageTimer) {\n            this.partialMessageTimer.dispose();\n            this.partialMessageTimer = undefined;\n        }\n    }\n    setPartialMessageTimer() {\n        this.clearPartialMessageTimer();\n        if (this._partialMessageTimeout <= 0) {\n            return;\n        }\n        this.partialMessageTimer = (0, ral_1.default)().timer.setTimeout((token, timeout) => {\n            this.partialMessageTimer = undefined;\n            if (token === this.messageToken) {\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\n                this.setPartialMessageTimer();\n            }\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\n    }\n}\nexports.ReadableStreamMessageReader = ReadableStreamMessageReader;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WriteableStreamMessageWriter = exports.AbstractMessageWriter = exports.MessageWriter = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst semaphore_1 = require(\"./semaphore\");\nconst events_1 = require(\"./events\");\nconst ContentLength = 'Content-Length: ';\nconst CRLF = '\\r\\n';\nvar MessageWriter;\n(function (MessageWriter) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\n            Is.func(candidate.onError) && Is.func(candidate.write);\n    }\n    MessageWriter.is = is;\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\nclass AbstractMessageWriter {\n    constructor() {\n        this.errorEmitter = new events_1.Emitter();\n        this.closeEmitter = new events_1.Emitter();\n    }\n    dispose() {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n    get onError() {\n        return this.errorEmitter.event;\n    }\n    fireError(error, message, count) {\n        this.errorEmitter.fire([this.asError(error), message, count]);\n    }\n    get onClose() {\n        return this.closeEmitter.event;\n    }\n    fireClose() {\n        this.closeEmitter.fire(undefined);\n    }\n    asError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else {\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\n        }\n    }\n}\nexports.AbstractMessageWriter = AbstractMessageWriter;\nvar ResolvedMessageWriterOptions;\n(function (ResolvedMessageWriterOptions) {\n    function fromOptions(options) {\n        if (options === undefined || typeof options === 'string') {\n            return { charset: options ?? 'utf-8', contentTypeEncoder: (0, ral_1.default)().applicationJson.encoder };\n        }\n        else {\n            return { charset: options.charset ?? 'utf-8', contentEncoder: options.contentEncoder, contentTypeEncoder: options.contentTypeEncoder ?? (0, ral_1.default)().applicationJson.encoder };\n        }\n    }\n    ResolvedMessageWriterOptions.fromOptions = fromOptions;\n})(ResolvedMessageWriterOptions || (ResolvedMessageWriterOptions = {}));\nclass WriteableStreamMessageWriter extends AbstractMessageWriter {\n    constructor(writable, options) {\n        super();\n        this.writable = writable;\n        this.options = ResolvedMessageWriterOptions.fromOptions(options);\n        this.errorCount = 0;\n        this.writeSemaphore = new semaphore_1.Semaphore(1);\n        this.writable.onError((error) => this.fireError(error));\n        this.writable.onClose(() => this.fireClose());\n    }\n    async write(msg) {\n        return this.writeSemaphore.lock(async () => {\n            const payload = this.options.contentTypeEncoder.encode(msg, this.options).then((buffer) => {\n                if (this.options.contentEncoder !== undefined) {\n                    return this.options.contentEncoder.encode(buffer);\n                }\n                else {\n                    return buffer;\n                }\n            });\n            return payload.then((buffer) => {\n                const headers = [];\n                headers.push(ContentLength, buffer.byteLength.toString(), CRLF);\n                headers.push(CRLF);\n                return this.doWrite(msg, headers, buffer);\n            }, (error) => {\n                this.fireError(error);\n                throw error;\n            });\n        });\n    }\n    async doWrite(msg, headers, data) {\n        try {\n            await this.writable.write(headers.join(''), 'ascii');\n            return this.writable.write(data);\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n    end() {\n        this.writable.end();\n    }\n}\nexports.WriteableStreamMessageWriter = WriteableStreamMessageWriter;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Message = exports.NotificationType9 = exports.NotificationType8 = exports.NotificationType7 = exports.NotificationType6 = exports.NotificationType5 = exports.NotificationType4 = exports.NotificationType3 = exports.NotificationType2 = exports.NotificationType1 = exports.NotificationType0 = exports.NotificationType = exports.RequestType9 = exports.RequestType8 = exports.RequestType7 = exports.RequestType6 = exports.RequestType5 = exports.RequestType4 = exports.RequestType3 = exports.RequestType2 = exports.RequestType1 = exports.RequestType = exports.RequestType0 = exports.AbstractMessageSignature = exports.ParameterStructures = exports.ResponseError = exports.ErrorCodes = void 0;\nconst is = require(\"./is\");\n/**\n * Predefined error codes.\n */\nvar ErrorCodes;\n(function (ErrorCodes) {\n    // Defined by JSON RPC\n    ErrorCodes.ParseError = -32700;\n    ErrorCodes.InvalidRequest = -32600;\n    ErrorCodes.MethodNotFound = -32601;\n    ErrorCodes.InvalidParams = -32602;\n    ErrorCodes.InternalError = -32603;\n    /**\n     * This is the start range of JSON RPC reserved error codes.\n     * It doesn't denote a real error code. No application error codes should\n     * be defined between the start and end range. For backwards\n     * compatibility the `ServerNotInitialized` and the `UnknownErrorCode`\n     * are left in the range.\n     *\n     * @since 3.16.0\n    */\n    ErrorCodes.jsonrpcReservedErrorRangeStart = -32099;\n    /** @deprecated use  jsonrpcReservedErrorRangeStart */\n    ErrorCodes.serverErrorStart = -32099;\n    /**\n     * An error occurred when write a message to the transport layer.\n     */\n    ErrorCodes.MessageWriteError = -32099;\n    /**\n     * An error occurred when reading a message from the transport layer.\n     */\n    ErrorCodes.MessageReadError = -32098;\n    /**\n     * The connection got disposed or lost and all pending responses got\n     * rejected.\n     */\n    ErrorCodes.PendingResponseRejected = -32097;\n    /**\n     * The connection is inactive and a use of it failed.\n     */\n    ErrorCodes.ConnectionInactive = -32096;\n    /**\n     * Error code indicating that a server received a notification or\n     * request before the server has received the `initialize` request.\n     */\n    ErrorCodes.ServerNotInitialized = -32002;\n    ErrorCodes.UnknownErrorCode = -32001;\n    /**\n     * This is the end range of JSON RPC reserved error codes.\n     * It doesn't denote a real error code.\n     *\n     * @since 3.16.0\n    */\n    ErrorCodes.jsonrpcReservedErrorRangeEnd = -32000;\n    /** @deprecated use  jsonrpcReservedErrorRangeEnd */\n    ErrorCodes.serverErrorEnd = -32000;\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\n/**\n * An error object return in a response in case a request\n * has failed.\n */\nclass ResponseError extends Error {\n    constructor(code, message, data) {\n        super(message);\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\n        this.data = data;\n        Object.setPrototypeOf(this, ResponseError.prototype);\n    }\n    toJson() {\n        const result = {\n            code: this.code,\n            message: this.message\n        };\n        if (this.data !== undefined) {\n            result.data = this.data;\n        }\n        return result;\n    }\n}\nexports.ResponseError = ResponseError;\nclass ParameterStructures {\n    constructor(kind) {\n        this.kind = kind;\n    }\n    static is(value) {\n        return value === ParameterStructures.auto || value === ParameterStructures.byName || value === ParameterStructures.byPosition;\n    }\n    toString() {\n        return this.kind;\n    }\n}\nexports.ParameterStructures = ParameterStructures;\n/**\n * The parameter structure is automatically inferred on the number of parameters\n * and the parameter type in case of a single param.\n */\nParameterStructures.auto = new ParameterStructures('auto');\n/**\n * Forces `byPosition` parameter structure. This is useful if you have a single\n * parameter which has a literal type.\n */\nParameterStructures.byPosition = new ParameterStructures('byPosition');\n/**\n * Forces `byName` parameter structure. This is only useful when having a single\n * parameter. The library will report errors if used with a different number of\n * parameters.\n */\nParameterStructures.byName = new ParameterStructures('byName');\n/**\n * An abstract implementation of a MessageType.\n */\nclass AbstractMessageSignature {\n    constructor(method, numberOfParams) {\n        this.method = method;\n        this.numberOfParams = numberOfParams;\n    }\n    get parameterStructures() {\n        return ParameterStructures.auto;\n    }\n}\nexports.AbstractMessageSignature = AbstractMessageSignature;\n/**\n * Classes to type request response pairs\n */\nclass RequestType0 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 0);\n    }\n}\nexports.RequestType0 = RequestType0;\nclass RequestType extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.RequestType = RequestType;\nclass RequestType1 extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.RequestType1 = RequestType1;\nclass RequestType2 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 2);\n    }\n}\nexports.RequestType2 = RequestType2;\nclass RequestType3 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 3);\n    }\n}\nexports.RequestType3 = RequestType3;\nclass RequestType4 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 4);\n    }\n}\nexports.RequestType4 = RequestType4;\nclass RequestType5 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 5);\n    }\n}\nexports.RequestType5 = RequestType5;\nclass RequestType6 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 6);\n    }\n}\nexports.RequestType6 = RequestType6;\nclass RequestType7 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 7);\n    }\n}\nexports.RequestType7 = RequestType7;\nclass RequestType8 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 8);\n    }\n}\nexports.RequestType8 = RequestType8;\nclass RequestType9 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 9);\n    }\n}\nexports.RequestType9 = RequestType9;\nclass NotificationType extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.NotificationType = NotificationType;\nclass NotificationType0 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 0);\n    }\n}\nexports.NotificationType0 = NotificationType0;\nclass NotificationType1 extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.NotificationType1 = NotificationType1;\nclass NotificationType2 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 2);\n    }\n}\nexports.NotificationType2 = NotificationType2;\nclass NotificationType3 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 3);\n    }\n}\nexports.NotificationType3 = NotificationType3;\nclass NotificationType4 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 4);\n    }\n}\nexports.NotificationType4 = NotificationType4;\nclass NotificationType5 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 5);\n    }\n}\nexports.NotificationType5 = NotificationType5;\nclass NotificationType6 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 6);\n    }\n}\nexports.NotificationType6 = NotificationType6;\nclass NotificationType7 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 7);\n    }\n}\nexports.NotificationType7 = NotificationType7;\nclass NotificationType8 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 8);\n    }\n}\nexports.NotificationType8 = NotificationType8;\nclass NotificationType9 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 9);\n    }\n}\nexports.NotificationType9 = NotificationType9;\nvar Message;\n(function (Message) {\n    /**\n     * Tests if the given message is a request message\n     */\n    function isRequest(message) {\n        const candidate = message;\n        return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\n    }\n    Message.isRequest = isRequest;\n    /**\n     * Tests if the given message is a notification message\n     */\n    function isNotification(message) {\n        const candidate = message;\n        return candidate && is.string(candidate.method) && message.id === void 0;\n    }\n    Message.isNotification = isNotification;\n    /**\n     * Tests if the given message is a response message\n     */\n    function isResponse(message) {\n        const candidate = message;\n        return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\n    }\n    Message.isResponse = isResponse;\n})(Message = exports.Message || (exports.Message = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nlet _ral;\nfunction RAL() {\n    if (_ral === undefined) {\n        throw new Error(`No runtime abstraction layer installed`);\n    }\n    return _ral;\n}\n(function (RAL) {\n    function install(ral) {\n        if (ral === undefined) {\n            throw new Error(`No runtime abstraction layer provided`);\n        }\n        _ral = ral;\n    }\n    RAL.install = install;\n})(RAL || (RAL = {}));\nexports.default = RAL;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Semaphore = void 0;\nconst ral_1 = require(\"./ral\");\nclass Semaphore {\n    constructor(capacity = 1) {\n        if (capacity <= 0) {\n            throw new Error('Capacity must be greater than 0');\n        }\n        this._capacity = capacity;\n        this._active = 0;\n        this._waiting = [];\n    }\n    lock(thunk) {\n        return new Promise((resolve, reject) => {\n            this._waiting.push({ thunk, resolve, reject });\n            this.runNext();\n        });\n    }\n    get active() {\n        return this._active;\n    }\n    runNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        (0, ral_1.default)().timer.setImmediate(() => this.doRunNext());\n    }\n    doRunNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        const next = this._waiting.shift();\n        this._active++;\n        if (this._active > this._capacity) {\n            throw new Error(`To many thunks active`);\n        }\n        try {\n            const result = next.thunk();\n            if (result instanceof Promise) {\n                result.then((value) => {\n                    this._active--;\n                    next.resolve(value);\n                    this.runNext();\n                }, (err) => {\n                    this._active--;\n                    next.reject(err);\n                    this.runNext();\n                });\n            }\n            else {\n                this._active--;\n                next.resolve(result);\n                this.runNext();\n            }\n        }\n        catch (err) {\n            this._active--;\n            next.reject(err);\n            this.runNext();\n        }\n    }\n}\nexports.Semaphore = Semaphore;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SharedArrayReceiverStrategy = exports.SharedArraySenderStrategy = void 0;\nconst cancellation_1 = require(\"./cancellation\");\nvar CancellationState;\n(function (CancellationState) {\n    CancellationState.Continue = 0;\n    CancellationState.Cancelled = 1;\n})(CancellationState || (CancellationState = {}));\nclass SharedArraySenderStrategy {\n    constructor() {\n        this.buffers = new Map();\n    }\n    enableCancellation(request) {\n        if (request.id === null) {\n            return;\n        }\n        const buffer = new SharedArrayBuffer(4);\n        const data = new Int32Array(buffer, 0, 1);\n        data[0] = CancellationState.Continue;\n        this.buffers.set(request.id, buffer);\n        request.$cancellationData = buffer;\n    }\n    async sendCancellation(_conn, id) {\n        const buffer = this.buffers.get(id);\n        if (buffer === undefined) {\n            return;\n        }\n        const data = new Int32Array(buffer, 0, 1);\n        Atomics.store(data, 0, CancellationState.Cancelled);\n    }\n    cleanup(id) {\n        this.buffers.delete(id);\n    }\n    dispose() {\n        this.buffers.clear();\n    }\n}\nexports.SharedArraySenderStrategy = SharedArraySenderStrategy;\nclass SharedArrayBufferCancellationToken {\n    constructor(buffer) {\n        this.data = new Int32Array(buffer, 0, 1);\n    }\n    get isCancellationRequested() {\n        return Atomics.load(this.data, 0) === CancellationState.Cancelled;\n    }\n    get onCancellationRequested() {\n        throw new Error(`Cancellation over SharedArrayBuffer doesn't support cancellation events`);\n    }\n}\nclass SharedArrayBufferCancellationTokenSource {\n    constructor(buffer) {\n        this.token = new SharedArrayBufferCancellationToken(buffer);\n    }\n    cancel() {\n    }\n    dispose() {\n    }\n}\nclass SharedArrayReceiverStrategy {\n    constructor() {\n        this.kind = 'request';\n    }\n    createCancellationTokenSource(request) {\n        const buffer = request.$cancellationData;\n        if (buffer === undefined) {\n            return new cancellation_1.CancellationTokenSource();\n        }\n        return new SharedArrayBufferCancellationTokenSource(buffer);\n    }\n}\nexports.SharedArrayReceiverStrategy = SharedArrayReceiverStrategy;\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) 2018-2022 TypeFox GmbH (http://www.typefox.io). All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\nimport { AbstractMessageReader } from 'vscode-jsonrpc/lib/common/messageReader';\r\nexport class WebSocketMessageReader extends AbstractMessageReader {\r\n    constructor(socket) {\r\n        super();\r\n        this.socket = socket;\r\n        this.state = 'initial';\r\n        this.events = [];\r\n        this.socket.onMessage(message => this.readMessage(message));\r\n        this.socket.onError(error => this.fireError(error));\r\n        this.socket.onClose((code, reason) => {\r\n            if (code !== 1000) {\r\n                const error = {\r\n                    name: '' + code,\r\n                    message: `Error during socket reconnect: code = ${code}, reason = ${reason}`\r\n                };\r\n                this.fireError(error);\r\n            }\r\n            this.fireClose();\r\n        });\r\n    }\r\n    listen(callback) {\r\n        if (this.state === 'initial') {\r\n            this.state = 'listening';\r\n            this.callback = callback;\r\n            while (this.events.length !== 0) {\r\n                const event = this.events.pop();\r\n                if (event.message) {\r\n                    this.readMessage(event.message);\r\n                }\r\n                else if (event.error) {\r\n                    this.fireError(event.error);\r\n                }\r\n                else {\r\n                    this.fireClose();\r\n                }\r\n            }\r\n        }\r\n        return {\r\n            dispose: () => {\r\n                if (this.callback === callback) {\r\n                    this.callback = undefined;\r\n                }\r\n            }\r\n        };\r\n    }\r\n    readMessage(message) {\r\n        if (this.state === 'initial') {\r\n            this.events.splice(0, 0, { message });\r\n        }\r\n        else if (this.state === 'listening') {\r\n            const data = JSON.parse(message);\r\n            this.callback(data);\r\n        }\r\n    }\r\n    fireError(error) {\r\n        if (this.state === 'initial') {\r\n            this.events.splice(0, 0, { error });\r\n        }\r\n        else if (this.state === 'listening') {\r\n            super.fireError(error);\r\n        }\r\n    }\r\n    fireClose() {\r\n        if (this.state === 'initial') {\r\n            this.events.splice(0, 0, {});\r\n        }\r\n        else if (this.state === 'listening') {\r\n            super.fireClose();\r\n        }\r\n        this.state = 'closed';\r\n    }\r\n}\r\n//# sourceMappingURL=reader.js.map","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) 2018-2022 TypeFox GmbH (http://www.typefox.io). All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\nimport { AbstractMessageWriter } from 'vscode-jsonrpc/lib/common/messageWriter';\r\nexport class WebSocketMessageWriter extends AbstractMessageWriter {\r\n    constructor(socket) {\r\n        super();\r\n        this.socket = socket;\r\n        this.errorCount = 0;\r\n    }\r\n    end() {\r\n    }\r\n    async write(msg) {\r\n        try {\r\n            const content = JSON.stringify(msg);\r\n            this.socket.send(content);\r\n        }\r\n        catch (e) {\r\n            this.errorCount++;\r\n            this.fireError(e, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=writer.js.map","export class ConsoleLogger {\r\n    error(message) {\r\n        console.error(message);\r\n    }\r\n    warn(message) {\r\n        console.warn(message);\r\n    }\r\n    info(message) {\r\n        console.info(message);\r\n    }\r\n    log(message) {\r\n        console.log(message);\r\n    }\r\n    debug(message) {\r\n        console.debug(message);\r\n    }\r\n}\r\n//# sourceMappingURL=logger.js.map","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) 2018-2022 TypeFox GmbH (http://www.typefox.io). All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\nimport { createWebSocketConnection } from './socket';\r\n/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) 2018-2022 TypeFox GmbH (http://www.typefox.io). All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\nimport { ConsoleLogger } from './logger';\r\nexport function listen(options) {\r\n    const { webSocket, onConnection } = options;\r\n    const logger = options.logger || new ConsoleLogger();\r\n    webSocket.onopen = () => {\r\n        const socket = toSocket(webSocket);\r\n        const connection = createWebSocketConnection(socket, logger);\r\n        onConnection(connection);\r\n    };\r\n}\r\nexport function toSocket(webSocket) {\r\n    return {\r\n        send: content => webSocket.send(content),\r\n        onMessage: cb => {\r\n            webSocket.onmessage = event => cb(event.data);\r\n        },\r\n        onError: cb => {\r\n            webSocket.onerror = event => {\r\n                if ('message' in event) {\r\n                    cb(event.message);\r\n                }\r\n            };\r\n        },\r\n        onClose: cb => {\r\n            webSocket.onclose = event => cb(event.code, event.reason);\r\n        },\r\n        dispose: () => webSocket.close()\r\n    };\r\n}\r\n//# sourceMappingURL=connection.js.map","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) 2018-2022 TypeFox GmbH (http://www.typefox.io). All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\nimport { createMessageConnection } from 'vscode-jsonrpc';\r\nimport { WebSocketMessageReader } from './reader';\r\nimport { WebSocketMessageWriter } from './writer';\r\nexport function createWebSocketConnection(socket, logger) {\r\n    const messageReader = new WebSocketMessageReader(socket);\r\n    const messageWriter = new WebSocketMessageWriter(socket);\r\n    const connection = createMessageConnection(messageReader, messageWriter, logger);\r\n    connection.onClose(() => connection.dispose());\r\n    return connection;\r\n}\r\n//# sourceMappingURL=connection.js.map"],"names":["HASH_UNDEFINED","MAX_SAFE_INTEGER","argsTag","asyncTag","funcTag","genTag","nullTag","objectTag","proxyTag","undefinedTag","reIsHostCtor","reIsUint","typedArrayTags","uid","func","transform","freeGlobal","g","Object","freeSelf","self","root","Function","freeExports","exports","nodeType","freeModule","module","moduleExports","freeProcess","process","nodeUtil","require","types","binding","e","nodeIsTypedArray","isTypedArray","arrayProto","Array","prototype","funcProto","objectProto","coreJsData","funcToString","toString","hasOwnProperty","maskSrcKey","exec","keys","IE_PROTO","nativeObjectToString","objectCtorString","call","reIsNative","RegExp","replace","Buffer","undefined","Symbol","Uint8Array","getPrototype","allocUnsafe","getPrototypeOf","arg","objectCreate","create","propertyIsEnumerable","splice","symToStringTag","toStringTag","defineProperty","getNative","nativeIsBuffer","isBuffer","nativeMax","Math","max","nativeNow","Date","now","Map","nativeCreate","baseCreate","object","proto","isObject","result","Hash","entries","index","length","this","clear","entry","set","ListCache","MapCache","Stack","data","__data__","size","assignMergeValue","key","value","eq","baseAssignValue","assignValue","objValue","assocIndexOf","array","has","get","pop","push","getMapData","pairs","LARGE_ARRAY_SIZE","baseGetTag","isOwn","tag","unmasked","getRawTag","objectToString","baseIsArguments","isObjectLike","baseMerge","source","srcIndex","customizer","stack","iteratee","keysFunc","iterable","props","baseFor","srcValue","mergeFunc","safeGet","stacked","typedArray","buffer","arrayBuffer","newValue","isCommon","isArr","isArray","isBuff","isTyped","isArrayLike","copyArray","isDeep","slice","cloneBuffer","constructor","byteLength","byteOffset","Ctor","isPlainObject","isArguments","isNew","copyObject","keysIn","toPlainObject","isFunction","isPrototype","initCloneObject","baseMergeDeep","baseSetToString","string","identity","map","type","getValue","isMasked","test","toSource","baseIsNative","isIndex","setToString","count","lastCalled","stamp","remaining","arguments","apply","shortOut","other","isLength","baseUnary","inherited","isArg","isType","skipIndexes","n","baseTimes","String","arrayLikeKeys","nativeKeysIn","isProto","baseKeysIn","assigner","mergeWith","start","args","otherArgs","thisArg","overRest","baseRest","sources","guard","isIterateeCall","__createBinding","o","m","k","k2","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","__exportStar","p","createMessageConnection","BrowserMessageWriter","BrowserMessageReader","default","install","api_1","AbstractMessageReader","port","super","_onData","Emitter","_messageListener","event","fire","addEventListener","fireError","onmessage","listen","callback","AbstractMessageWriter","errorCount","write","msg","postMessage","Promise","resolve","error","handleError","reject","end","reader","writer","logger","options","NullLogger","ConnectionStrategy","is","connectionStrategy","MessageBuffer","AbstractMessageBuffer","encoding","asciiDecoder","TextDecoder","emptyBuffer","fromString","_encoding","TextEncoder","encode","decode","asNative","allocNative","ReadableStreamWrapper","socket","then","RAL","console","onClose","listener","Disposable","removeEventListener","onError","onEnd","onData","WritableStreamWrapper","Error","send","close","_textEncoder","_ril","freeze","messageBuffer","applicationJson","encoder","name","charset","JSON","stringify","decoder","parse","stream","asReadableStream","asWritableStream","timer","setTimeout","ms","handle","dispose","clearTimeout","setImmediate","setInterval","clearInterval","RIL","ProgressType","ProgressToken","ConnectionOptions","WriteableStreamMessageWriter","MessageWriter","ReadableStreamMessageReader","MessageReader","SharedArrayReceiverStrategy","SharedArraySenderStrategy","CancellationToken","CancellationTokenSource","Event","LRUCache","Touch","LinkedMap","ParameterStructures","NotificationType9","NotificationType8","NotificationType7","NotificationType6","NotificationType5","NotificationType4","NotificationType3","NotificationType2","NotificationType1","NotificationType0","NotificationType","ErrorCodes","ResponseError","RequestType9","RequestType8","RequestType7","RequestType6","RequestType5","RequestType4","RequestType3","RequestType2","RequestType1","RequestType0","RequestType","Message","MessageStrategy","CancellationStrategy","CancellationSenderStrategy","CancellationReceiverStrategy","ConnectionError","ConnectionErrors","LogTraceNotification","SetTraceNotification","TraceFormat","TraceValues","Trace","messages_1","linkedMap_1","disposable_1","events_1","cancellation_1","sharedArrayCancellation_1","messageReader_1","messageWriter_1","messageBuffer_1","connection_1","ral_1","Is","None","isCancellationRequested","onCancellationRequested","Cancelled","candidate","boolean","shortcutEvent","context","bind","MutableToken","_isCancelled","cancel","_emitter","token","_token","RequestCancellationReceiverStrategy","IdCancellationReceiverStrategy","CancelNotification","ProgressNotification","StarRequestHandler","ConnectionState","warn","info","log","Off","Messages","Compact","Verbose","toLowerCase","Text","code","message","setPrototypeOf","cancelUndispatched","kind","createCancellationTokenSource","_","sendCancellation","conn","id","sendNotification","cleanup","receiver","sender","handleMessage","cancellationStrategy","messageStrategy","messageReader","messageWriter","_logger","sequenceNumber","notificationSequenceNumber","unknownResponseSequenceNumber","version","starRequestHandler","requestHandlers","starNotificationHandler","notificationHandlers","progressHandlers","tracer","messageQueue","responsePromises","knownCanceledRequests","Set","requestTokens","trace","traceFormat","state","New","errorEmitter","closeEmitter","unhandledNotificationEmitter","unhandledProgressEmitter","disposeEmitter","createRequestQueueKey","_message","isListening","Listening","isClosed","Closed","isDisposed","Disposed","closeHandler","triggerMessageQueue","shift","processMessageQueue","isRequest","requestMessage","reply","resultOrError","method","startTime","jsonrpc","toJson","traceSendingResponse","catch","replyError","params","stringifyTrace","logLSPMessage","traceReceivedRequest","element","requestHandler","handler","tokenKey","cancellationSource","handlerResult","numberOfParams","InvalidParams","parameterStructures","byName","byPosition","promise","delete","InternalError","replySuccess","MethodNotFound","handleRequest","isNotification","notificationHandler","cancelId","traceReceivedNotification","handleNotification","isResponse","responseMessage","responsePromise","timerStart","traceReceivedResponse","handleResponse","number","responseHandler","handleInvalidMessage","toCancel","strategy","response","cancellationToken","add","queue","addMessageToQueue","lspMessage","isLSPMessage","timestamp","throwIfClosedOrDisposed","undefinedToNull","param","nullToUndefined","isNamedParam","computeSingleParam","auto","computeMessageParams","i","connection","messageParams","first","paramStart","paramEnd","notificationMessage","traceSendingNotification","onNotification","onProgress","_type","sendProgress","onUnhandledProgress","sendRequest","throwIfNotListening","last","disposable","traceSendingRequest","enableCancellation","async","r","MessageWriteError","onRequest","hasPendingResponse","_value","_tracer","sendNotificationOrTraceOptions","_sendNotification","_traceFormat","onUnhandledNotification","onDispose","PendingResponseRejected","values","AlreadyListening","throwIfListening","inspect","verbose","_disposable","CallbackList","bucket","_callbacks","_contexts","remove","foundCallbackWithDifferentContext","len","invoke","ret","callbacks","contexts","isEmpty","_options","_event","thisArgs","disposables","onFirstListenerAdd","_noop","onLastListenerRemove","stringArray","Number","every","elem","_a","First","AsOld","Last","AsNew","_map","_head","_tail","_size","_state","touch","item","next","previous","addItemLast","addItemFirst","removeItem","forEach","callbackfn","current","iterator","done","trimOld","newSize","currentSize","toJSON","fromJSON","limit","ratio","_limit","_ratio","min","checkTrim","peek","round","_chunks","_totalLength","append","chunk","toAppend","tryReadHeaders","lowerCaseKeys","chunkIndex","offset","chunkBytesRead","row","_read","headers","split","header","indexOf","substr","trim","tryReadBody","numberOfBytes","byteCount","resultOffset","chunkPart","semaphore_1","ResolvedMessageReaderOptions","onPartialMessage","partialMessageEmitter","asError","fireClose","firePartialMessage","fromOptions","contentDecoder","contentDecoders","contentTypeDecoder","contentTypeDecoders","readable","_partialMessageTimeout","nextMessageLength","messageToken","readSemaphore","Semaphore","partialMessageTimeout","timeout","partialMessageTimer","contentLength","parseInt","isNaN","body","setPartialMessageTimer","clearPartialMessageTimer","lock","bytes","waitingTime","ResolvedMessageWriterOptions","contentTypeEncoder","contentEncoder","writeSemaphore","doWrite","join","AbstractMessageSignature","ParseError","InvalidRequest","jsonrpcReservedErrorRangeStart","serverErrorStart","MessageReadError","ConnectionInactive","ServerNotInitialized","UnknownErrorCode","jsonrpcReservedErrorRangeEnd","serverErrorEnd","_parameterStructures","_ral","ral","capacity","_capacity","_active","_waiting","thunk","runNext","active","doRunNext","err","CancellationState","Continue","buffers","request","SharedArrayBuffer","Int32Array","$cancellationData","_conn","Atomics","store","SharedArrayBufferCancellationToken","load","SharedArrayBufferCancellationTokenSource","WebSocketMessageReader","events","onMessage","readMessage","reason","WebSocketMessageWriter","content","ConsoleLogger","debug","webSocket","onConnection","onopen","cb","onerror","onclose","toSocket","createWebSocketConnection"],"sourceRoot":""}